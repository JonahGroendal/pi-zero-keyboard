/*! For license information please see remark.mjs.LICENSE.txt */
(()=>{var e,t,n,r,o={686:()=>{!function(){"use strict";var e="function"==typeof Promise?Promise:function(e){var t,n=[],r=0;return e((function(e){t=e,r=1,n.splice(0).forEach(o)})),{then:o};function o(e){return r?setTimeout(e,0,t):n.push(e),this}},t=function(e,t){var n=function(e){for(var t=0,n=e.length;t<n;t++)r(e[t])},r=function(e){var t=e.target,n=e.attributeName,r=e.oldValue;t.attributeChangedCallback(n,r,t.getAttribute(n))};return function(o,i){var s=o.constructor.observedAttributes;return s&&e(i).then((function(){new t(n).observe(o,{attributes:!0,attributeOldValue:!0,attributeFilter:s});for(var e=0,i=s.length;e<i;e++)o.hasAttribute(s[e])&&r({target:o,attributeName:s[e],oldValue:null})})),o}},n=self,r=n.document,o=n.MutationObserver,i=n.Set,s=n.WeakMap,a=function(e){return"querySelectorAll"in e},l=[].filter,c=function(e){var t=new s,n=function(t){var n=e.query;if(n.length)for(var r=0,o=t.length;r<o;r++)c(l.call(t[r].addedNodes,a),!0,n),c(l.call(t[r].removedNodes,a),!1,n)},c=function n(r,o,s){for(var a,l,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new i,d=function(d,f,p,h){if(!c.has(f=r[p])){if(c.add(f),o)for(var g,v=u(f),y=0,_=s.length;y<_;y++)v.call(f,g=s[y])&&(t.has(f)||t.set(f,new i),(d=t.get(f)).has(g)||(d.add(g),e.handle(f,o,g)));else t.has(f)&&(d=t.get(f),t.delete(f),d.forEach((function(t){e.handle(f,o,t)})));n(m(f),o,s,c)}a=d,l=f},f=0,p=r.length;f<p;f++)d(a,l,f)},u=function(e){return e.matches||e.webkitMatchesSelector||e.msMatchesSelector},d=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];c(t,n,e.query)},m=function(e){return h.length?e.querySelectorAll(h):h},f=new o(n),p=e.root||r,h=e.query;return f.observe(p,{childList:!0,subtree:!0}),d(m(p)),{drop:function(e){for(var n=0,r=e.length;n<r;n++)t.delete(e[n])},flush:function(){n(f.takeRecords())},observer:f,parse:d}},u=self,d=u.document,m=u.Map,f=u.MutationObserver,p=u.Object,h=u.Set,g=u.WeakMap,v=u.Element,y=u.HTMLElement,_=u.Node,b=u.Error,w=u.TypeError,M=u.Reflect,S=self.Promise||e,x=p.defineProperty,E=p.keys,k=p.getOwnPropertyNames,O=p.setPrototypeOf,N=!self.customElements,j=function(e){for(var t=E(e),n=[],r=t.length,o=0;o<r;o++)n[o]=e[t[o]],delete e[t[o]];return function(){for(var o=0;o<r;o++)e[t[o]]=n[o]}};if(N){var A=function(){var e=this.constructor;if(!I.has(e))throw new w("Illegal constructor");var t=I.get(e);if(U)return z(U,t);var n=C.call(d,t);return z(O(n,e.prototype),t)},C=d.createElement,I=new m,L=new m,D=new m,T=new m,P=[],R=c({query:P,handle:function(e,t,n){var r=D.get(n);if(t&&!r.isPrototypeOf(e)){var o=j(e);U=O(e,r);try{new r.constructor}finally{U=null,o()}}var i="".concat(t?"":"dis","connectedCallback");i in r&&e[i]()}}).parse,U=null,F=function(t){if(!L.has(t)){var n,r=new e((function(e){n=e}));L.set(t,{$:r,_:n})}return L.get(t).$},z=t(F,f);x(self,"customElements",{configurable:!0,value:{define:function(e,t){if(T.has(e))throw new b('the name "'.concat(e,'" has already been used with this registry'));I.set(t,e),D.set(e,t.prototype),T.set(e,t),P.push(e),F(e).then((function(){R(d.querySelectorAll(e))})),L.get(e)._(t)},get:function(e){return T.get(e)},whenDefined:F}}),x(A.prototype=y.prototype,"constructor",{value:A}),x(self,"HTMLElement",{configurable:!0,value:A}),x(d,"createElement",{configurable:!0,value:function(e,t){var n=t&&t.is,r=n?T.get(n):T.get(e);return r?new r:C.call(d,e)}}),"isConnected"in _.prototype||x(_.prototype,"isConnected",{configurable:!0,get:function(){return!(this.ownerDocument.compareDocumentPosition(this)&this.DOCUMENT_POSITION_DISCONNECTED)}})}else try{var B=function e(){return self.Reflect.construct(HTMLLIElement,[],e)};B.prototype=HTMLLIElement.prototype;var H="extends-li";self.customElements.define("extends-li",B,{extends:"li"}),N=d.createElement("li",{is:H}).outerHTML.indexOf(H)<0;var $=self.customElements,V=$.get,W=$.whenDefined;x(self.customElements,"whenDefined",{configurable:!0,value:function(e){var t=this;return W.call(this,e).then((function(n){return n||V.call(t,e)}))}})}catch(e){N=!N}if(N){var Z=function(e){var t=X.get(e);(0,t.parse)(t.root.querySelectorAll(this),e.isConnected)},G=self.customElements,Y=v.prototype.attachShadow,q=d.createElement,Q=G.define,J=G.get,K=(M||{construct:function(e){return e.call(this)}}).construct,X=new g,ee=new h,te=new m,ne=new m,re=new m,oe=new m,ie=[],se=[],ae=function(e){return oe.get(e)||J.call(G,e)},le=function(e,t,n){var r=re.get(n);if(t&&!r.isPrototypeOf(e)){var o=j(e);fe=O(e,r);try{new r.constructor}finally{fe=null,o()}}var i="".concat(t?"":"dis","connectedCallback");i in r&&e[i]()},ce=c({query:se,handle:le}).parse,ue=c({query:ie,handle:function(e,t){X.has(e)&&(t?ee.add(e):ee.delete(e),se.length&&Z.call(se,e))}}).parse,de=function(e){if(!ne.has(e)){var t,n=new S((function(e){t=e}));ne.set(e,{$:n,_:t})}return ne.get(e).$},me=t(de,f),fe=null;k(self).filter((function(e){return/^HTML/.test(e)})).forEach((function(e){var t=self[e];function n(){var e=this.constructor;if(!te.has(e))throw new w("Illegal constructor");var n=te.get(e),r=n.is,o=n.tag;if(r){if(fe)return me(fe,r);var i=q.call(d,o);return i.setAttribute("is",r),me(O(i,e.prototype),r)}return K.call(this,t,[],e)}x(n.prototype=t.prototype,"constructor",{value:n}),x(self,e,{value:n})})),x(d,"createElement",{configurable:!0,value:function(e,t){var n=t&&t.is;if(n){var r=oe.get(n);if(r&&te.get(r).tag===e)return new r}var o=q.call(d,e);return n&&o.setAttribute("is",n),o}}),Y&&x(v.prototype,"attachShadow",{configurable:!0,value:function(){var e=Y.apply(this,arguments),t=c({query:se,root:e,handle:le}),n=t.parse;return X.set(this,{root:e,parse:n}),e}}),x(G,"get",{configurable:!0,value:ae}),x(G,"whenDefined",{configurable:!0,value:de}),x(G,"define",{configurable:!0,value:function(e,t,n){if(ae(e))throw new b("'".concat(e,"' has already been defined as a custom element"));var r,o=n&&n.extends;te.set(t,o?{is:e,tag:o}:{is:"",tag:e}),o?(r="".concat(o,'[is="').concat(e,'"]'),re.set(r,t.prototype),oe.set(e,t),se.push(r)):(Q.apply(G,arguments),ie.push(r=e)),de(e).then((function(){o?(ce(d.querySelectorAll(r)),ee.forEach(Z,[r])):ue(d.querySelectorAll(r))})),ne.get(e)._(t)}})}}()},334:(e,t)=>{"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=[e],i=t.mix,s=void 0===i?[]:i,a=t.mods,l=void 0===a?{}:a,c=function(t,n){var i=[e,r(t)];"boolean"!=typeof n&&i.push(r(n)),o.push(i.join("_"))};return Object.keys(n).forEach((function(e){!l.hasOwnProperty(e)&&n[e]&&c(e,n[e])})),Object.keys(l).forEach((function(e){l[e]&&c(e,l[e])})),s&&(o=o.concat(s)),o.join(" ")}function r(e){return e.toString().replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}Object.defineProperty(t,"__esModule",{value:!0}),e.exports=n,t.default=n},166:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(this&&this[n]||n);else if(Array.isArray(n))e.push(o.apply(this,n));else if("object"===i)for(var s in n)r.call(n,s)&&n[s]&&e.push(this&&this[s]||s)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},184:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var s=o.apply(null,n);s&&e.push(s)}else if("object"===i)for(var a in n)r.call(n,a)&&n[a]&&e.push(a)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},316:e=>{function t(e,t,n,r){var o,i=null==(o=r)||"number"==typeof o||"boolean"==typeof o?r:n(r),s=t.get(i);return void 0===s&&(s=e.call(this,r),t.set(i,s)),s}function n(e,t,n){var r=Array.prototype.slice.call(arguments,3),o=n(r),i=t.get(o);return void 0===i&&(i=e.apply(this,r),t.set(o,i)),i}function r(e,t,n,r,o){return n.bind(t,e,r,o)}function o(e,o){return r(e,this,1===e.length?t:n,o.cache.create(),o.serializer)}function i(){return JSON.stringify(arguments)}function s(){this.cache=Object.create(null)}s.prototype.has=function(e){return e in this.cache},s.prototype.get=function(e){return this.cache[e]},s.prototype.set=function(e,t){this.cache[e]=t};var a={create:function(){return new s}};e.exports=function(e,t){var n=t&&t.cache?t.cache:a,r=t&&t.serializer?t.serializer:i;return(t&&t.strategy?t.strategy:o)(e,{cache:n,serializer:r})},e.exports.strategies={variadic:function(e,t){return r(e,this,n,t.cache.create(),t.serializer)},monadic:function(e,n){return r(e,this,t,n.cache.create(),n.serializer)}}},679:(e,t,n)=>{"use strict";var r=n(296),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?s:a[e.$$typeof]||o}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(p){var o=f(n);o&&o!==p&&e(t,o,r)}var s=u(n);d&&(s=s.concat(d(n)));for(var a=l(t),h=l(n),g=0;g<s.length;++g){var v=s[g];if(!(i[v]||r&&r[v]||h&&h[v]||a&&a[v])){var y=m(n,v);try{c(t,v,y)}catch(e){}}}}return t}},103:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,m=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,h=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case i:case a:case s:case f:return e;default:switch(e=e&&e.$$typeof){case c:case m:case g:case h:case l:return e;default:return t}}case o:return t}}}function M(e){return w(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=m,t.Fragment=i,t.Lazy=g,t.Memo=h,t.Portal=o,t.Profiler=a,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return M(e)||w(e)===u},t.isConcurrentMode=M,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===m},t.isFragment=function(e){return w(e)===i},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===h},t.isPortal=function(e){return w(e)===o},t.isProfiler=function(e){return w(e)===a},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===d||e===a||e===s||e===f||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===h||e.$$typeof===l||e.$$typeof===c||e.$$typeof===m||e.$$typeof===y||e.$$typeof===_||e.$$typeof===b||e.$$typeof===v)},t.typeOf=w},296:(e,t,n)=>{"use strict";e.exports=n(103)},703:(e,t,n)=>{"use strict";var r=n(414);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},697:(e,t,n)=>{e.exports=n(703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},359:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for;n&&Symbol.for("react.element"),n&&Symbol.for("react.portal"),n&&Symbol.for("react.fragment"),n&&Symbol.for("react.strict_mode"),n&&Symbol.for("react.profiler"),n&&Symbol.for("react.provider"),n&&Symbol.for("react.context"),n&&Symbol.for("react.async_mode"),n&&Symbol.for("react.concurrent_mode"),n&&Symbol.for("react.forward_ref"),n&&Symbol.for("react.suspense"),n&&Symbol.for("react.suspense_list"),n&&Symbol.for("react.memo"),n&&Symbol.for("react.lazy"),n&&Symbol.for("react.block"),n&&Symbol.for("react.fundamental"),n&&Symbol.for("react.responder"),n&&Symbol.for("react.scope")},973:(e,t,n)=>{"use strict";n(359)},138:e=>{"use strict";e.exports=function(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),r=Object.keys(t),o=n.length;if(r.length!==o)return!1;for(var i=0;i<o;i++){var s=n[i];if(e[s]!==t[s]||!Object.prototype.hasOwnProperty.call(t,s))return!1}return!0}},121:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r}),e=n.hmd(e);const r=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:e)},386:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="/web/dev.svg"},881:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMjAgMTAuMDYwOUMyMCA0LjUwMzA0IDE1LjUyNDIgMCAxMCAwQzQuNDc1ODEgMCAwIDQuNTAzMDQgMCAxMC4wNjA5QzAgMTUuMDgyNCAzLjY1Njg2IDE5LjI0NDYgOC40Mzc1IDIwVjEyLjk2OTJINS44OTcxOFYxMC4wNjA5SDguNDM3NVY3Ljg0NDIyQzguNDM3NSA1LjMyMjkyIDkuOTI5NDQgMy45MzAyMiAxMi4yMTQ1IDMuOTMwMjJDMTMuMzA4OSAzLjkzMDIyIDE0LjQ1MzIgNC4xMjY1NyAxNC40NTMyIDQuMTI2NTdWNi42MDEyMkgxMy4xOTE5QzExLjk1IDYuNjAxMjIgMTEuNTYyNSA3LjM3Njg4IDExLjU2MjUgOC4xNzI0MVYxMC4wNjA5SDE0LjMzNTlMMTMuODkyMyAxMi45NjkySDExLjU2MjVWMjBDMTYuMzQzMSAxOS4yNDQ2IDIwIDE1LjA4MjQgMjAgMTAuMDYwOVoiIGZpbGw9IiMwQTgyRUQiLz48L3N2Zz4K"},953:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTYuNyAxNi4xbC0uMi4yYy0uMiAwLS4yLS4xLS4yLS4ybC4yLS4xLjIuMXptLTEuMy0uMmMwIC4xIDAgLjIuMi4ySDZjMC0uMSAwLS4yLS4yLS4zbC0uMy4xem0xLjggMGMtLjEgMC0uMiAwLS4yLjJoLjNsLjItLjEtLjMtLjJ6TTEwIDBBOS44IDkuOCAwIDAwMCAxMGMwIDQuNyAyLjggOC42IDYuOCAxMCAuNiAwIC43LS4yLjctLjV2LTIuNnMtMi44LjctMy40LTEuMmMwIDAtLjUtMS4yLTEuMS0xLjUgMCAwLTEtLjcgMC0uNiAwIDAgMSAwIDEuNiAxIC45IDEuNiAyLjQgMS4yIDMgLjkgMC0uNy4zLTEuMS42LTEuNC0yLjMtLjMtNC41LS42LTQuNS00LjYgMC0xLjEuMy0xLjcgMS0yLjRhNCA0IDAgMDEwLTIuOGMuOS0uMyAyLjggMS4xIDIuOCAxLjFhOS4zIDkuMyAwIDAxNSAwczItMS40IDIuOC0xLjFhNCA0IDAgMDEuMiAyLjhjLjYuNyAxIDEuMyAxIDIuNCAwIDQtMi40IDQuMy00LjYgNC42LjMuMy42IDEgLjYgMnYzLjRjMCAuMi4yLjYuNy41IDQtMS40IDYuOC01LjMgNi44LTEwQTEwIDEwIDAgMDA5LjkgMHptLTYgMTQuM3YuMmguM3YtLjJoLS4zem0tLjQtLjR2LjJoLjNsLS4xLS4yaC0uMnptMS4zIDEuNXYuM2guM3YtLjNoLS4zem0tLjUtLjZ2LjJjLjEuMS4yLjIuMy4xVjE1Yy0uMS0uMS0uMi0uMi0uMy0uMXoiIGZpbGw9IiNmZmYiLz48L3N2Zz4K"},171:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTYuNyAxNi4xbC0uMi4yYy0uMiAwLS4yLS4xLS4yLS4ybC4yLS4xLjIuMXptLTEuMy0uMmMwIC4xIDAgLjIuMi4ySDZjMC0uMSAwLS4yLS4yLS4zbC0uMy4xem0xLjggMGMtLjEgMC0uMiAwLS4yLjJoLjNsLjItLjEtLjMtLjJ6TTEwIDBBOS44IDkuOCAwIDAwMCAxMGMwIDQuNyAyLjggOC42IDYuOCAxMCAuNiAwIC43LS4yLjctLjV2LTIuNnMtMi44LjctMy40LTEuMmMwIDAtLjUtMS4yLTEuMS0xLjUgMCAwLTEtLjcgMC0uNiAwIDAgMSAwIDEuNiAxIC45IDEuNiAyLjQgMS4yIDMgLjkgMC0uNy4zLTEuMS42LTEuNC0yLjMtLjMtNC41LS42LTQuNS00LjYgMC0xLjEuMy0xLjcgMS0yLjRhNCA0IDAgMDEwLTIuOGMuOS0uMyAyLjggMS4xIDIuOCAxLjFhOS4zIDkuMyAwIDAxNSAwczItMS40IDIuOC0xLjFhNCA0IDAgMDEuMiAyLjhjLjYuNyAxIDEuMyAxIDIuNCAwIDQtMi40IDQuMy00LjYgNC42LjMuMy42IDEgLjYgMnYzLjRjMCAuMi4yLjYuNy41IDQtMS40IDYuOC01LjMgNi44LTEwQTEwIDEwIDAgMDA5LjkgMHptLTYgMTQuM3YuMmguM3YtLjJoLS4zem0tLjQtLjR2LjJoLjNsLS4xLS4yaC0uMnptMS4zIDEuNXYuM2guM3YtLjNoLS4zem0tLjUtLjZ2LjJjLjEuMS4yLjIuMy4xVjE1Yy0uMS0uMS0uMi0uMi0uMy0uMXoiIGZpbGw9IiMwMDAiLz48L3N2Zz4K"},16:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE5IDEwLjJjMC0uNiAwLTEuMi0uMi0xLjhoLTguNnYzLjRoNWE0LjIgNC4yIDAgMDEtMS45IDIuOHYyLjJoM2E4LjcgOC43IDAgMDAyLjctNi42eiIgZmlsbD0iIzQyODVGNCIvPjxwYXRoIGQ9Ik0xMC4yIDE5YzIuNSAwIDQuNS0uOCA2LTIuMmwtMi45LTIuMmMtLjguNS0xLjkuOC0zLjEuOEE1LjUgNS41IDAgMDE1IDExLjdIMlYxNGMxLjUgMyA0LjcgNSA4LjIgNXoiIGZpbGw9IiMzNEE4NTMiLz48cGF0aCBkPSJNNSAxMS43YTUuMyA1LjMgMCAwMTAtMy40VjZIMmE4LjggOC44IDAgMDAwIDhsMy0yLjN6IiBmaWxsPSIjRkJCQzA0Ii8+PHBhdGggZD0iTTEwLjIgNC42YTUgNSAwIDAxMy41IDEuM2wyLjYtMi42QTkuMiA5LjIgMCAwMDIgNmwzIDIuNGE1LjUgNS41IDAgMDE1LjItMy43eiIgZmlsbD0iI0VBNDMzNSIvPjwvc3ZnPgo="},999:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iI0VDNEMyMyIgZD0iTTAgMGg5djlIMHoiLz48cGF0aCBmaWxsPSIjN0RCMzAwIiBkPSJNMTEgMGg5djloLTl6Ii8+PHBhdGggZmlsbD0iI0Y3QjMwMiIgZD0iTTExIDExaDl2OWgtOXoiLz48cGF0aCBmaWxsPSIjMDE5RkU4IiBkPSJNMCAxMWg5djlIMHoiLz48L3N2Zz4K"},856:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE3Ljk0IDUuNTRjLjAyLjIuMDIuNC4wMi41OCAwIDUuOTQtNC4xMyAxMi43Ny0xMS42NyAxMi43Ny0yLjMyIDAtNC40OC0uNzQtNi4yOS0yLjAyYTcuNzcgNy43NyAwIDAwNi4wOC0xLjg2IDQuMTcgNC4xNyAwIDAxLTMuODMtMy4xIDMuOTkgMy45OSAwIDAwMS44NS0uMDhBNC40IDQuNCAwIDAxLjggNy40di0uMDZjLjU1LjMzIDEuMTguNTQgMS44NS41N2E0Ljc4IDQuNzggMCAwMS0xLjI3LTYgMTEuMzUgMTEuMzUgMCAwMDguNDYgNC43Yy0uMDctLjM0LS4xLS42OS0uMS0xLjAzIDAtMi40OCAxLjgyLTQuNDkgNC4xLTQuNDkgMS4xOCAwIDIuMjQuNTQgMi45OSAxLjQyLjkzLS4yIDEuODEtLjU3IDIuNi0xLjA5YTQuNDIgNC40MiAwIDAxLTEuOCAyLjQ4Yy44Mi0uMSAxLjYyLS4zNSAyLjM2LS43YTkuMzEgOS4zMSAwIDAxLTIuMDYgMi4zMnoiIGZpbGw9IiMxREExRjIiLz48L3N2Zz4K"},672:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE1LjM2IDBoLTEuNzNjLS4xNSAwLS4yNS4wNy0uMjcuMTgtLjAyLjEtMi41OSA3Ljc4LTIuNzggOC40MmwtLjY2IDIuNDQtLjktMi40QzguODEgOCA2LjcyIDIuMyA2LjY3IDIuMDhjLS4wNC0uMTMtLjEtLjI5LS4zMi0uMjlINC42NmMtLjE2IDAtLjI1LjE4LS4yLjMuMDQuMDggMy4wOSA4LjAyIDQuMzIgMTEuMDV2Ni42OGMwIC4xMi4wNS4xOS4xNy4xOWgxLjZjLjEgMCAuMTctLjA3LjE3LS4yVjEzLjJjMS4wMy0yLjgxIDQuNzctMTIuOCA0LjgxLTEyLjkuMDUtLjE1LjA0LS4yOS0uMTctLjI5eiIgZmlsbD0icmVkIi8+PC9zdmc+Cg=="},955:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="/web/avatar-icon.svg"}},i={};function s(e){if(i[e])return i[e].exports;var t=i[e]={id:e,loaded:!1,exports:{}};return o[e](t,t.exports,s),t.loaded=!0,t.exports}s.m=o,s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var o=Object.create(null);s.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,s.d(o,i),o},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,n)=>(s.f[n](e,t),t)),[])),s.u=e=>({43:"ja",135:"fi",220:"ua",231:"fr",300:"tr",313:"be",352:"es",371:"node-emoji",372:"bg",491:"ko",640:"pl",677:"bp",697:"ru",913:"de",922:"zh",936:"vi"}[e]+".mjs"),s.miniCssF=e=>{},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="remark42:",s.l=(e,t,o,i)=>{if(n[e])n[e].push(t);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+o){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.setAttribute("data-webpack",r+o),a.src=e),n[e]=[t];var m=(t,r)=>{a.onerror=a.onload=null,clearTimeout(f);var o=n[e];if(delete n[e],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((e=>e(r))),t)return t(r)},f=setTimeout(m.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=m.bind(null,a.onerror),a.onload=m.bind(null,a.onload),l&&document.head.appendChild(a)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="/web/",(()=>{var e={829:0};s.f.j=(t,n)=>{var r=s.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(((n,o)=>{r=e[t]=[n,o]}));n.push(r[2]=o);var i=s.p+s.u(t),a=new Error;s.l(i,(n=>{if(s.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",a.name="ChunkLoadError",a.type=o,a.request=i,r[1](a)}}),"chunk-"+t,t)}};var t=(t,n)=>{for(var r,o,[i,a,l]=n,c=0,u=[];c<i.length;c++)o=i[c],s.o(e,o)&&e[o]&&u.push(e[o][0]),e[o]=0;for(r in a)s.o(a,r)&&(s.m[r]=a[r]);for(l&&l(s),t&&t(n);u.length;)u.shift()()},n=self.webpackChunkremark42=self.webpackChunkremark42||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e={};s.r(e),s.d(e,{Children:()=>Re,Component:()=>w,Fragment:()=>b,PureComponent:()=>Ce,StrictMode:()=>wt,Suspense:()=>Fe,SuspenseList:()=>He,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:()=>st,cloneElement:()=>vt,createContext:()=>$,createElement:()=>v,createFactory:()=>ht,createPortal:()=>Ze,createRef:()=>_,default:()=>Mt,findDOMNode:()=>_t,forwardRef:()=>Te,hydrate:()=>Je,isValidElement:()=>gt,lazy:()=>Be,memo:()=>Ie,render:()=>Qe,unmountComponentAtNode:()=>yt,unstable_IdlePriority:()=>dt,unstable_ImmediatePriority:()=>at,unstable_LowPriority:()=>ut,unstable_NormalPriority:()=>ct,unstable_UserBlockingPriority:()=>lt,unstable_batchedUpdates:()=>bt,unstable_now:()=>ft,unstable_runWithPriority:()=>mt,useCallback:()=>_e,useContext:()=>be,useDebugValue:()=>we,useEffect:()=>pe,useErrorBoundary:()=>Me,useImperativeHandle:()=>ve,useLayoutEffect:()=>he,useMemo:()=>ye,useReducer:()=>fe,useRef:()=>ge,useState:()=>me,version:()=>pt});var t={};s.r(t),s.d(t,{info:()=>Md});var n={};s.r(n),s.d(n,{theme:()=>Sd});var r={};s.r(r),s.d(r,{bannedUsers:()=>Ed,hiddenUsers:()=>kd,user:()=>xd});var o={};s.r(o),s.d(o,{userComments:()=>Od});var i={};s.r(i),s.d(i,{collapsedThreads:()=>Nd});var a,l,c,u,d,m={},f=[],p=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function h(e,t){for(var n in t)e[n]=t[n];return e}function g(e){var t=e.parentNode;t&&t.removeChild(e)}function v(e,t,n){var r,o,i,s=arguments,a={};for(i in t)"key"==i?r=t[i]:"ref"==i?o=t[i]:a[i]=t[i];if(arguments.length>3)for(n=[n],i=3;i<arguments.length;i++)n.push(s[i]);if(null!=n&&(a.children=n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===a[i]&&(a[i]=e.defaultProps[i]);return y(e,a,r,o,null)}function y(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++a.__v:o};return null!=a.vnode&&a.vnode(i),i}function _(){return{current:null}}function b(e){return e.children}function w(e,t){this.props=e,this.context=t}function M(e,t){if(null==t)return e.__?M(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?M(e):null}function S(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return S(e)}}function x(e){(!e.__d&&(e.__d=!0)&&l.push(e)&&!E.__r++||u!==a.debounceRendering)&&((u=a.debounceRendering)||c)(E)}function E(){for(var e;E.__r=l.length;)e=l.sort((function(e,t){return e.__v.__b-t.__v.__b})),l=[],e.some((function(e){var t,n,r,o,i,s;e.__d&&(i=(o=(t=e).__v).__e,(s=t.__P)&&(n=[],(r=h({},o)).__v=o.__v+1,D(s,o,r,t.__n,void 0!==s.ownerSVGElement,null!=o.__h?[i]:null,n,null==i?M(o):i,o.__h),T(n,o),o.__e!=i&&S(o)))}))}function k(e,t,n,r,o,i,s,a,l,c){var u,d,p,h,g,v,_,w=r&&r.__k||f,S=w.length;for(n.__k=[],u=0;u<t.length;u++)if(null!=(h=n.__k[u]=null==(h=t[u])||"boolean"==typeof h?null:"string"==typeof h||"number"==typeof h?y(null,h,null,null,h):Array.isArray(h)?y(b,{children:h},null,null,null):h.__b>0?y(h.type,h.props,h.key,null,h.__v):h)){if(h.__=n,h.__b=n.__b+1,null===(p=w[u])||p&&h.key==p.key&&h.type===p.type)w[u]=void 0;else for(d=0;d<S;d++){if((p=w[d])&&h.key==p.key&&h.type===p.type){w[d]=void 0;break}p=null}D(e,h,p=p||m,o,i,s,a,l,c),g=h.__e,(d=h.ref)&&p.ref!=d&&(_||(_=[]),p.ref&&_.push(p.ref,null,h),_.push(d,h.__c||g,h)),null!=g?(null==v&&(v=g),"function"==typeof h.type&&null!=h.__k&&h.__k===p.__k?h.__d=l=O(h,l,e):l=j(e,h,p,w,g,l),c||"option"!==n.type?"function"==typeof n.type&&(n.__d=l):e.value=""):l&&p.__e==l&&l.parentNode!=e&&(l=M(p))}for(n.__e=v,u=S;u--;)null!=w[u]&&("function"==typeof n.type&&null!=w[u].__e&&w[u].__e==n.__d&&(n.__d=M(r,u+1)),U(w[u],w[u]));if(_)for(u=0;u<_.length;u++)R(_[u],_[++u],_[++u])}function O(e,t,n){var r,o;for(r=0;r<e.__k.length;r++)(o=e.__k[r])&&(o.__=e,t="function"==typeof o.type?O(o,t,n):j(n,o,o,e.__k,o.__e,t));return t}function N(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){N(e,t)})):t.push(e)),t}function j(e,t,n,r,o,i){var s,a,l;if(void 0!==t.__d)s=t.__d,t.__d=void 0;else if(null==n||o!=i||null==o.parentNode)e:if(null==i||i.parentNode!==e)e.appendChild(o),s=null;else{for(a=i,l=0;(a=a.nextSibling)&&l<r.length;l+=2)if(a==o)break e;e.insertBefore(o,i),s=i}return void 0!==s?s:o.nextSibling}function A(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||p.test(t)?n:n+"px"}function C(e,t,n,r,o){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||A(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||A(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r||e.addEventListener(t,i?L:I,i):e.removeEventListener(t,i?L:I,i);else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function I(e){this.l[e.type+!1](a.event?a.event(e):e)}function L(e){this.l[e.type+!0](a.event?a.event(e):e)}function D(e,t,n,r,o,i,s,l,c){var u,d,m,f,p,g,v,y,_,M,S,x=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(c=n.__h,l=t.__e=n.__e,t.__h=null,i=[l]),(u=a.__b)&&u(t);try{e:if("function"==typeof x){if(y=t.props,_=(u=x.contextType)&&r[u.__c],M=u?_?_.props.value:u.__:r,n.__c?v=(d=t.__c=n.__c).__=d.__E:("prototype"in x&&x.prototype.render?t.__c=d=new x(y,M):(t.__c=d=new w(y,M),d.constructor=x,d.render=F),_&&_.sub(d),d.props=y,d.state||(d.state={}),d.context=M,d.__n=r,m=d.__d=!0,d.__h=[]),null==d.__s&&(d.__s=d.state),null!=x.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=h({},d.__s)),h(d.__s,x.getDerivedStateFromProps(y,d.__s))),f=d.props,p=d.state,m)null==x.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==x.getDerivedStateFromProps&&y!==f&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(y,M),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(y,d.__s,M)||t.__v===n.__v){d.props=y,d.state=d.__s,t.__v!==n.__v&&(d.__d=!1),d.__v=t,t.__e=n.__e,t.__k=n.__k,d.__h.length&&s.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(y,d.__s,M),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(f,p,g)}))}d.context=M,d.props=y,d.state=d.__s,(u=a.__r)&&u(t),d.__d=!1,d.__v=t,d.__P=e,u=d.render(d.props,d.state,d.context),d.state=d.__s,null!=d.getChildContext&&(r=h(h({},r),d.getChildContext())),m||null==d.getSnapshotBeforeUpdate||(g=d.getSnapshotBeforeUpdate(f,p)),S=null!=u&&u.type===b&&null==u.key?u.props.children:u,k(e,Array.isArray(S)?S:[S],t,n,r,o,i,s,l,c),d.base=t.__e,t.__h=null,d.__h.length&&s.push(d),v&&(d.__E=d.__=null),d.__e=!1}else null==i&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=P(n.__e,t,n,r,o,i,s,c);(u=a.diffed)&&u(t)}catch(e){t.__v=null,(c||null!=i)&&(t.__e=l,t.__h=!!c,i[i.indexOf(l)]=null),a.__e(e,t,n)}}function T(e,t){a.__c&&a.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){a.__e(e,t.__v)}}))}function P(e,t,n,r,o,i,s,a){var l,c,u,d,p=n.props,h=t.props,v=t.type,y=0;if("svg"===v&&(o=!0),null!=i)for(;y<i.length;y++)if((l=i[y])&&(l===e||(v?l.localName==v:3==l.nodeType))){e=l,i[y]=null;break}if(null==e){if(null===v)return document.createTextNode(h);e=o?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,h.is&&h),i=null,a=!1}if(null===v)p===h||a&&e.data===h||(e.data=h);else{if(i=i&&f.slice.call(e.childNodes),c=(p=n.props||m).dangerouslySetInnerHTML,u=h.dangerouslySetInnerHTML,!a){if(null!=i)for(p={},d=0;d<e.attributes.length;d++)p[e.attributes[d].name]=e.attributes[d].value;(u||c)&&(u&&(c&&u.__html==c.__html||u.__html===e.innerHTML)||(e.innerHTML=u&&u.__html||""))}if(function(e,t,n,r,o){var i;for(i in n)"children"===i||"key"===i||i in t||C(e,i,null,n[i],r);for(i in t)o&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===t[i]||C(e,i,t[i],n[i],r)}(e,h,p,o,a),u)t.__k=[];else if(y=t.props.children,k(e,Array.isArray(y)?y:[y],t,n,r,o&&"foreignObject"!==v,i,s,e.firstChild,a),null!=i)for(y=i.length;y--;)null!=i[y]&&g(i[y]);a||("value"in h&&void 0!==(y=h.value)&&(y!==e.value||"progress"===v&&!y)&&C(e,"value",y,p.value,!1),"checked"in h&&void 0!==(y=h.checked)&&y!==e.checked&&C(e,"checked",y,p.checked,!1))}return e}function R(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){a.__e(e,n)}}function U(e,t,n){var r,o,i;if(a.unmount&&a.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||R(r,null,t)),n||"function"==typeof e.type||(n=null!=(o=e.__e)),e.__e=e.__d=void 0,null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){a.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&U(r[i],t,n);null!=o&&g(o)}function F(e,t,n){return this.constructor(e,n)}function z(e,t,n){var r,o,i;a.__&&a.__(e,t),o=(r="function"==typeof n)?null:n&&n.__k||t.__k,i=[],D(t,e=(!r&&n||t).__k=v(b,null,[e]),o||m,m,void 0!==t.ownerSVGElement,!r&&n?[n]:o?null:t.firstChild?f.slice.call(t.childNodes):null,i,!r&&n?n:o?o.__e:t.firstChild,r),T(i,e)}function B(e,t){z(e,t,B)}function H(e,t,n){var r,o,i,s=arguments,a=h({},e.props);for(i in t)"key"==i?r=t[i]:"ref"==i?o=t[i]:a[i]=t[i];if(arguments.length>3)for(n=[n],i=3;i<arguments.length;i++)n.push(s[i]);return null!=n&&(a.children=n),y(e.type,a,r||e.key,o||e.ref,null)}function $(e,t){var n={__c:t="__cC"+d++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some(x)},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}a={__e:function(e,t){for(var n,r,o;t=t.__;)if((n=t.__c)&&!n.__)try{if((r=n.constructor)&&null!=r.getDerivedStateFromError&&(n.setState(r.getDerivedStateFromError(e)),o=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),o=n.__d),o)return n.__E=n}catch(t){e=t}throw e},__v:0},w.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=h({},this.state),"function"==typeof e&&(e=e(h({},n),this.props)),e&&h(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),x(this))},w.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),x(this))},w.prototype.render=b,l=[],c="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,E.__r=0,d=0;var V=s(121),W=function(){return Math.random().toString(36).substring(7).split("").join(".")},Z={INIT:"@@redux/INIT"+W(),REPLACE:"@@redux/REPLACE"+W(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+W()}};function G(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Y(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function q(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var o=t[r];"function"==typeof e[o]&&(n[o]=e[o])}var i,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:Z.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:Z.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+Z.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(e){i=e}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var r=!1,o={},a=0;a<s.length;a++){var l=s[a],c=n[l],u=e[l],d=c(u,t);if(void 0===d){var m=Y(l,t);throw new Error(m)}o[l]=d,r=r||d!==u}return(r=r||s.length!==Object.keys(e).length)?o:e}}function Q(e,t){return function(){return t(e.apply(this,arguments))}}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(n,!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var te,ne,re,oe=0,ie=[],se=a.__b,ae=a.__r,le=a.diffed,ce=a.__c,ue=a.unmount;function de(e,t){a.__h&&a.__h(ne,e,oe||t),oe=0;var n=ne.__H||(ne.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function me(e){return oe=1,fe(Ne,e)}function fe(e,t,n){var r=de(te++,2);return r.t=e,r.__c||(r.__=[n?n(t):Ne(void 0,t),function(e){var t=r.t(r.__[0],e);r.__[0]!==t&&(r.__=[t,r.__[1]],r.__c.setState({}))}],r.__c=ne),r.__}function pe(e,t){var n=de(te++,3);!a.__s&&Oe(n.__H,t)&&(n.__=e,n.__H=t,ne.__H.__h.push(n))}function he(e,t){var n=de(te++,4);!a.__s&&Oe(n.__H,t)&&(n.__=e,n.__H=t,ne.__h.push(n))}function ge(e){return oe=5,ye((function(){return{current:e}}),[])}function ve(e,t,n){oe=6,he((function(){"function"==typeof e?e(t()):e&&(e.current=t())}),null==n?n:n.concat(e))}function ye(e,t){var n=de(te++,7);return Oe(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function _e(e,t){return oe=8,ye((function(){return e}),t)}function be(e){var t=ne.context[e.__c],n=de(te++,9);return n.__c=e,t?(null==n.__&&(n.__=!0,t.sub(ne)),t.props.value):e.__}function we(e,t){a.useDebugValue&&a.useDebugValue(t?t(e):e)}function Me(e){var t=de(te++,10),n=me();return t.__=e,ne.componentDidCatch||(ne.componentDidCatch=function(e){t.__&&t.__(e),n[1](e)}),[n[0],function(){n[1](void 0)}]}function Se(){ie.forEach((function(e){if(e.__P)try{e.__H.__h.forEach(Ee),e.__H.__h.forEach(ke),e.__H.__h=[]}catch(t){e.__H.__h=[],a.__e(t,e.__v)}})),ie=[]}a.__b=function(e){ne=null,se&&se(e)},a.__r=function(e){ae&&ae(e),te=0;var t=(ne=e.__c).__H;t&&(t.__h.forEach(Ee),t.__h.forEach(ke),t.__h=[])},a.diffed=function(e){le&&le(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==ie.push(t)&&re===a.requestAnimationFrame||((re=a.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(r),xe&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);xe&&(t=requestAnimationFrame(n))})(Se)),ne=void 0},a.__c=function(e,t){t.some((function(e){try{e.__h.forEach(Ee),e.__h=e.__h.filter((function(e){return!e.__||ke(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],a.__e(n,e.__v)}})),ce&&ce(e,t)},a.unmount=function(e){ue&&ue(e);var t=e.__c;if(t&&t.__H)try{t.__H.__.forEach(Ee)}catch(e){a.__e(e,t.__v)}};var xe="function"==typeof requestAnimationFrame;function Ee(e){var t=ne;"function"==typeof e.__c&&e.__c(),ne=t}function ke(e){var t=ne;e.__c=e.__(),ne=t}function Oe(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function Ne(e,t){return"function"==typeof t?t(e):t}function je(e,t){for(var n in t)e[n]=t[n];return e}function Ae(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function Ce(e){this.props=e}function Ie(e,t){function n(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:Ae(this.props,e)}function r(t){return this.shouldComponentUpdate=n,v(e,t)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(Ce.prototype=new w).isPureReactComponent=!0,Ce.prototype.shouldComponentUpdate=function(e,t){return Ae(this.props,e)||Ae(this.state,t)};var Le=a.__b;a.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Le&&Le(e)};var De="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Te(e){function t(t,n){var r=je({},t);return delete r.ref,e(r,(n=t.ref||n)&&("object"!=typeof n||"current"in n)?n:null)}return t.$$typeof=De,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var Pe=function(e,t){return null==e?null:N(N(e).map(t))},Re={map:Pe,forEach:Pe,count:function(e){return e?N(e).length:0},only:function(e){var t=N(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:N},Ue=a.__e;function Fe(){this.__u=0,this.t=null,this.__b=null}function ze(e){var t=e.__.__c;return t&&t.__e&&t.__e(e)}function Be(e){var t,n,r;function o(o){if(t||(t=e()).then((function(e){n=e.default||e}),(function(e){r=e})),r)throw r;if(!n)throw t;return v(n,o)}return o.displayName="Lazy",o.__f=!0,o}function He(){this.u=null,this.o=null}a.__e=function(e,t,n){if(e.then)for(var r,o=t;o=o.__;)if((r=o.__c)&&r.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t);Ue(e,t,n)},(Fe.prototype=new w).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var o=ze(r.__v),i=!1,s=function(){i||(i=!0,n.componentWillUnmount=n.__c,o?o(a):a())};n.__c=n.componentWillUnmount,n.componentWillUnmount=function(){s(),n.__c&&n.__c()};var a=function(){if(!--r.__u){if(r.state.__e){var e=r.state.__e;r.__v.__k[0]=function e(t,n,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map((function(t){return e(t,n,r)})),t.__c&&t.__c.__P===n&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__e:r.__b=null});t=r.t.pop();)t.forceUpdate()}},l=!0===t.__h;r.__u++||l||r.setState({__e:r.__b=r.__v.__k[0]}),e.then(s,s)},Fe.prototype.componentWillUnmount=function(){this.t=[]},Fe.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=function e(t,n,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),t.__c.__H=null),null!=(t=je({},t)).__c&&(t.__c.__P===r&&(t.__c.__P=n),t.__c=null),t.__k=t.__k&&t.__k.map((function(t){return e(t,n,r)}))),t}(this.__b,n,r.__O=r.__P)}this.__b=null}var o=t.__e&&v(b,null,e.fallback);return o&&(o.__h=null),[v(b,null,t.__e?null:e.children),o]};var $e=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function Ve(e){return this.getChildContext=function(){return e.context},e.children}function We(e){var t=this,n=e.i;t.componentWillUnmount=function(){z(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),e.__v?(t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(e){this.childNodes.push(e),t.i.appendChild(e)},insertBefore:function(e,n){this.childNodes.push(e),t.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.i.removeChild(e)}}),z(v(Ve,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function Ze(e,t){return v(We,{__v:e,i:t})}(He.prototype=new w).__e=function(e){var t=this,n=ze(t.__v),r=t.o.get(e);return r[0]++,function(o){var i=function(){t.props.revealOrder?(r.push(o),$e(t,e,r)):o()};n?n(i):i()}},He.prototype.render=function(e){this.u=null,this.o=new Map;var t=N(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},He.prototype.componentDidUpdate=He.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){$e(e,n,t)}))};var Ge="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Ye=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,qe=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(e)};function Qe(e,t,n){return null==t.__k&&(t.textContent=""),z(e,t),"function"==typeof n&&n(),e?e.__c:null}function Je(e,t,n){return B(e,t),"function"==typeof n&&n(),e?e.__c:null}w.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(w.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var Ke=a.event;function Xe(){}function et(){return this.cancelBubble}function tt(){return this.defaultPrevented}a.event=function(e){return Ke&&(e=Ke(e)),e.persist=Xe,e.isPropagationStopped=et,e.isDefaultPrevented=tt,e.nativeEvent=e};var nt,rt={configurable:!0,get:function(){return this.class}},ot=a.vnode;a.vnode=function(e){var t=e.type,n=e.props,r=n;if("string"==typeof t){for(var o in r={},n){var i=n[o];"value"===o&&"defaultValue"in n&&null==i||("defaultValue"===o&&"value"in n&&null==n.value?o="value":"download"===o&&!0===i?i="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+t)&&!qe(n.type)?o="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(o)?o=o.toLowerCase():Ye.test(o)?o=o.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===i&&(i=void 0),r[o]=i)}"select"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=N(n.children).forEach((function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)}))),"select"==t&&null!=r.defaultValue&&(r.value=N(n.children).forEach((function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value}))),e.props=r}t&&n.class!=n.className&&(rt.enumerable="className"in n,null!=n.className&&(r.class=n.className),Object.defineProperty(r,"className",rt)),e.$$typeof=Ge,ot&&ot(e)};var it=a.__r;a.__r=function(e){it&&it(e),nt=e.__c};var st={ReactCurrentDispatcher:{current:{readContext:function(e){return nt.__n[e.__c].props.value}}}},at=1,lt=2,ct=3,ut=4,dt=5;function mt(e,t){return t()}var ft="object"==typeof performance&&"function"==typeof performance.now?performance.now.bind(performance):function(){return Date.now()},pt="16.8.0";function ht(e){return v.bind(null,e)}function gt(e){return!!e&&e.$$typeof===Ge}function vt(e){return gt(e)?H.apply(null,arguments):e}function yt(e){return!!e.__k&&(z(null,e),!0)}function _t(e){return e&&(e.base||1===e.nodeType&&e)||null}var bt=function(e,t){return e(t)},wt=b;const Mt={useState:me,useReducer:fe,useEffect:pe,useLayoutEffect:he,useRef:ge,useImperativeHandle:ve,useMemo:ye,useCallback:_e,useContext:be,useDebugValue:we,version:"16.8.0",Children:Re,render:Qe,hydrate:Je,unmountComponentAtNode:yt,createPortal:Ze,createElement:v,createContext:$,createFactory:ht,cloneElement:vt,createRef:_,Fragment:b,isValidElement:gt,findDOMNode:_t,Component:w,PureComponent:Ce,memo:Ie,forwardRef:Te,unstable_batchedUpdates:bt,StrictMode:b,Suspense:Fe,SuspenseList:He,lazy:Be,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:st};s(697);var St=Mt.createContext(null),xt=function(e){e()},Et=function(){return xt},kt={notify:function(){}},Ot=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=kt,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=function(){var e=Et(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,o=n={callback:e,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){r&&null!==t&&(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=kt)},e}();const Nt=function(e){var t=e.store,n=e.context,r=e.children,o=ye((function(){var e=new Ot(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),i=ye((function(){return t.getState()}),[t]);pe((function(){var e=o.subscription;return e.trySubscribe(),i!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[o,i]);var s=n||St;return Mt.createElement(s.Provider,{value:o},r)};var jt=s(679),At=s.n(jt),Ct=(s(973),"undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?he:pe);function It(){return be(St)}function Lt(e){void 0===e&&(e=St);var t=e===St?It:function(){return be(e)};return function(){return t().store}}var Dt=Lt();function Tt(e){void 0===e&&(e=St);var t=e===St?Dt:Lt(e);return function(){return t().dispatch}}var Pt=Tt(),Rt=function(e,t){return e===t};function Ut(e){void 0===e&&(e=St);var t=e===St?It:function(){return be(e)};return function(e,n){void 0===n&&(n=Rt);var r=t(),o=function(e,t,n,r){var o,i=fe((function(e){return e+1}),0)[1],s=ye((function(){return new Ot(n,r)}),[n,r]),a=ge(),l=ge(),c=ge(),u=ge(),d=n.getState();try{o=e!==l.current||d!==c.current||a.current?e(d):u.current}catch(e){throw a.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+a.current.stack+"\n\n"),e}return Ct((function(){l.current=e,c.current=d,u.current=o,a.current=void 0})),Ct((function(){function e(){try{var e=l.current(n.getState());if(t(e,u.current))return;u.current=e}catch(e){a.current=e}i()}return s.onStateChange=e,s.trySubscribe(),e(),function(){return s.tryUnsubscribe()}}),[n,s]),o}(e,n,r.store,r.subscription);return we(o),o}}var Ft=Ut();function zt(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function Bt(e,t){if(zt(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!zt(e[n[o]],t[n[o]]))return!1;return!0}xt=bt;var Ht=function(e,t){return(Ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function $t(e,t){function n(){this.constructor=e}Ht(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Vt=function(){return(Vt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Wt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function Zt(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}Object.create,Object.create,At().default||At();var Gt=$(null),Yt=(Gt.Consumer,Gt.Provider),qt=Gt;function Qt(e,t,n){if(void 0===n&&(n=Error),!e)throw new n(t)}var Jt=function(e,t){return(Jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Kt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Jt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Xt=function(){return(Xt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function en(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}Object.create,Object.create;var tn=function(e,t){return(tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function nn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}tn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var rn=function(){return(rn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function on(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}Object.create,Object.create;var sn,an,ln=function(e,t){return(ln=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},cn=function(){return(cn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function un(e){return e.type===sn.literal}function dn(e){return e.type===sn.argument}function mn(e){return e.type===sn.number}function fn(e){return e.type===sn.date}function pn(e){return e.type===sn.time}function hn(e){return e.type===sn.select}function gn(e){return e.type===sn.plural}function vn(e){return e.type===sn.pound}function yn(e){return e.type===sn.tag}function _n(e){return!(!e||"object"!=typeof e||0!==e.type)}function bn(e){return!(!e||"object"!=typeof e||1!==e.type)}Object.create,Object.create,function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"}(sn||(sn={})),function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"}(an||(an={}));var wn=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g,Mn=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,Sn=/^(@+)?(\+|#+)?$/g,xn=/(\*)(0+)|(#+)(0+)|(0+)/g,En=/^(0+)$/;function kn(e){var t={};return e.replace(Sn,(function(e,n,r){return"string"!=typeof r?(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length):"+"===r?t.minimumSignificantDigits=n.length:"#"===n[0]?t.maximumSignificantDigits=n.length:(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length+("string"==typeof r?r.length:0)),""})),t}function On(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function Nn(e){var t;if("E"===e[0]&&"E"===e[1]?(t={notation:"engineering"},e=e.slice(2)):"E"===e[0]&&(t={notation:"scientific"},e=e.slice(1)),t){var n=e.slice(0,2);if("+!"===n?(t.signDisplay="always",e=e.slice(2)):"+?"===n&&(t.signDisplay="exceptZero",e=e.slice(2)),!En.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function jn(e){return On(e)||{}}function An(e){for(var t={},n=0,r=e;n<r.length;n++){var o=r[n];switch(o.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=o.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=o.options[0].replace(/^(.*?)-/,"");continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=cn(cn(cn({},t),{notation:"scientific"}),o.options.reduce((function(e,t){return cn(cn({},e),jn(t))}),{}));continue;case"engineering":t=cn(cn(cn({},t),{notation:"engineering"}),o.options.reduce((function(e,t){return cn(cn({},e),jn(t))}),{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(o.options[0]);continue;case"integer-width":if(o.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");o.options[0].replace(xn,(function(e,n,r,o,i,s){if(n)t.minimumIntegerDigits=r.length;else{if(o&&i)throw new Error("We currently do not support maximum integer digits");if(s)throw new Error("We currently do not support exact integer digits")}return""}));continue}if(En.test(o.stem))t.minimumIntegerDigits=o.stem.length;else if(Mn.test(o.stem)){if(o.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");o.stem.replace(Mn,(function(e,n,r,o,i,s){return"*"===r?t.minimumFractionDigits=n.length:o&&"#"===o[0]?t.maximumFractionDigits=o.length:i&&s?(t.minimumFractionDigits=i.length,t.maximumFractionDigits=i.length+s.length):(t.minimumFractionDigits=n.length,t.maximumFractionDigits=n.length),""})),o.options.length&&(t=cn(cn({},t),kn(o.options[0])))}else if(Sn.test(o.stem))t=cn(cn({},t),kn(o.stem));else{var i=On(o.stem);i&&(t=cn(cn({},t),i));var s=Nn(o.stem);s&&(t=cn(cn({},t),s))}}return t}var Cn=function(e){function t(n,r,o,i){var s=e.call(this)||this;return s.message=n,s.expected=r,s.found=o,s.location=i,s.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s,t),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ln(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.buildMessage=function(e,t){function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function r(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function i(e){switch(e.type){case"literal":return'"'+r(e.text)+'"';case"class":var t=e.parts.map((function(e){return Array.isArray(e)?o(e[0])+"-"+o(e[1]):o(e)}));return"["+(e.inverted?"^":"")+t+"]";case"any":return"any character";case"end":return"end of input";case"other":return e.description}}return"Expected "+function(e){var t,n,r=e.map(i);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+((s=t)?'"'+r(s)+'"':"end of input")+" found.";var s},t}(Error),In=function(e,t){t=void 0!==t?t:{};var n,r={},o={start:Fe},i=Fe,s="<",a=Le("<",!1),l=function(e){return e.join("")},c=Le("#",!1),u=Te("tagElement"),d=Le("/>",!1),m=Le(">",!1),f=Le("</",!1),p=Te("argumentElement"),h="{",g=Le("{",!1),v="}",y=Le("}",!1),_=Te("numberSkeletonId"),b=/^['\/{}]/,w=De(["'","/","{","}"],!1,!1),M={type:"any"},S=Te("numberSkeletonTokenOption"),x=Le("/",!1),E=Te("numberSkeletonToken"),k="::",O=Le("::",!1),N=function(e){return dt.pop(),e.replace(/\s*$/,"")},j=",",A=Le(",",!1),C="number",I=Le("number",!1),L=function(e,t,n){return cn({type:"number"===t?sn.number:"date"===t?sn.date:sn.time,style:n&&n[2],value:e},ft())},D="'",T=Le("'",!1),P=/^[^']/,R=De(["'"],!0,!1),U=/^[^a-zA-Z'{}]/,F=De([["a","z"],["A","Z"],"'","{","}"],!0,!1),z=/^[a-zA-Z]/,B=De([["a","z"],["A","Z"]],!1,!1),H="date",$=Le("date",!1),V="time",W=Le("time",!1),Z="plural",G=Le("plural",!1),Y="selectordinal",q=Le("selectordinal",!1),Q="offset:",J=Le("offset:",!1),K="select",X=Le("select",!1),ee=Le("=",!1),te=Te("whitespace"),ne=/^[\t-\r \x85\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,re=De([["\t","\r"]," ",""," "," ",[" "," "],"\u2028","\u2029"," "," ","　"],!1,!1),oe=Te("syntax pattern"),ie=/^[!-\/:-@[-\^`{-~\xA1-\xA7\xA9\xAB\xAC\xAE\xB0\xB1\xB6\xBB\xBF\xD7\xF7\u2010-\u2027\u2030-\u203E\u2041-\u2053\u2055-\u205E\u2190-\u245F\u2500-\u2775\u2794-\u2BFF\u2E00-\u2E7F\u3001-\u3003\u3008-\u3020\u3030\uFD3E\uFD3F\uFE45\uFE46]/,se=De([["!","/"],[":","@"],["[","^"],"`",["{","~"],["¡","§"],"©","«","¬","®","°","±","¶","»","¿","×","÷",["‐","‧"],["‰","‾"],["⁁","⁓"],["⁕","⁞"],["←","⑟"],["─","❵"],["➔","⯿"],["⸀","⹿"],["、","〃"],["〈","〠"],"〰","﴾","﴿","﹅","﹆"],!1,!1),ae=Te("optional whitespace"),le=Te("number"),ce=Le("-",!1),ue=(Te("apostrophe"),Te("double apostrophes")),de="''",me=Le("''",!1),fe=Le("\n",!1),pe=Te("argNameOrNumber"),he=Te("validTag"),ge=Te("argNumber"),ve=Le("0",!1),ye=/^[1-9]/,_e=De([["1","9"]],!1,!1),be=/^[0-9]/,we=De([["0","9"]],!1,!1),Me=Te("argName"),Se=Te("tagName"),xe=0,Ee=0,ke=[{line:1,column:1}],Oe=0,Ne=[],je=0;if(void 0!==t.startRule){if(!(t.startRule in o))throw new Error("Can't start parsing from rule \""+t.startRule+'".');i=o[t.startRule]}function Ae(){return e.substring(Ee,xe)}function Ce(){return Re(Ee,xe)}function Ie(e,t){throw function(e,t){return new Cn(e,[],"",t)}(e,t=void 0!==t?t:Re(Ee,xe))}function Le(e,t){return{type:"literal",text:e,ignoreCase:t}}function De(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function Te(e){return{type:"other",description:e}}function Pe(t){var n,r=ke[t];if(r)return r;for(n=t-1;!ke[n];)n--;for(r={line:(r=ke[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return ke[t]=r,r}function Re(e,t){var n=Pe(e),r=Pe(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function Ue(e){xe<Oe||(xe>Oe&&(Oe=xe,Ne=[]),Ne.push(e))}function Fe(){return ze()}function ze(){var e,t;for(e=[],t=Be();t!==r;)e.push(t),t=Be();return e}function Be(){var t,n;return t=xe,Ee=xe,(vt?r:void 0)!==r&&(n=function(){var e,t,n,o,i,s,a;return je++,(e=Ve())===r&&(e=xe,(t=We())!==r&&(n=ze())!==r&&(o=Ze())!==r?(Ee=e,s=n,(i=t)!==(a=o)&&Ie('Mismatch tag "'+i+'" !== "'+a+'"',Ce()),e=t=cn({type:sn.tag,value:i,children:s},ft())):(xe=e,e=r)),je--,e===r&&(t=r,0===je&&Ue(u)),e}())!==r?(Ee=t,t=n):(xe=t,t=r),t===r&&(t=function(){var e,t,n;return e=xe,(t=He())!==r&&(Ee=e,n=t,t=cn({type:sn.literal,value:n},ft())),t}())===r&&(t=function(){var t,n,o,i,s;return je++,t=xe,123===e.charCodeAt(xe)?(n=h,xe++):(n=r,0===je&&Ue(g)),n!==r&&nt()!==r&&(o=at())!==r&&nt()!==r?(125===e.charCodeAt(xe)?(i=v,xe++):(i=r,0===je&&Ue(y)),i!==r?(Ee=t,s=o,t=n=cn({type:sn.argument,value:s},ft())):(xe=t,t=r)):(xe=t,t=r),je--,t===r&&(n=r,0===je&&Ue(p)),t}())===r&&(t=function(){var t;return(t=function(){var t,n,o,i,s,a,l,c,u;return t=xe,123===e.charCodeAt(xe)?(n=h,xe++):(n=r,0===je&&Ue(g)),n!==r&&nt()!==r&&(o=at())!==r&&nt()!==r?(44===e.charCodeAt(xe)?(i=j,xe++):(i=r,0===je&&Ue(A)),i!==r&&nt()!==r?(e.substr(xe,6)===C?(s=C,xe+=6):(s=r,0===je&&Ue(I)),s!==r&&nt()!==r?(a=xe,44===e.charCodeAt(xe)?(l=j,xe++):(l=r,0===je&&Ue(A)),l!==r&&(c=nt())!==r&&(u=function(){var t,n,o;return t=xe,e.substr(xe,2)===k?(n=k,xe+=2):(n=r,0===je&&Ue(O)),n!==r&&(o=function(){var e,t,n,o;if(e=xe,t=[],(n=qe())!==r)for(;n!==r;)t.push(n),n=qe();else t=r;return t!==r&&(Ee=e,t=cn({type:0,tokens:o=t,parsedOptions:yt?An(o):{}},ft())),t}())!==r?(Ee=t,t=n=o):(xe=t,t=r),t===r&&(t=xe,Ee=xe,dt.push("numberArgStyle"),(n=(n=!0)?void 0:r)!==r&&(o=He())!==r?(Ee=t,t=n=N(o)):(xe=t,t=r)),t}())!==r?a=l=[l,c,u]:(xe=a,a=r),a===r&&(a=null),a!==r&&(l=nt())!==r?(125===e.charCodeAt(xe)?(c=v,xe++):(c=r,0===je&&Ue(y)),c!==r?(Ee=t,t=n=L(o,s,a)):(xe=t,t=r)):(xe=t,t=r)):(xe=t,t=r)):(xe=t,t=r)):(xe=t,t=r),t}())===r&&(t=function(){var t,n,o,i,s,a,l,c,u;return t=xe,123===e.charCodeAt(xe)?(n=h,xe++):(n=r,0===je&&Ue(g)),n!==r&&nt()!==r&&(o=at())!==r&&nt()!==r?(44===e.charCodeAt(xe)?(i=j,xe++):(i=r,0===je&&Ue(A)),i!==r&&nt()!==r?(e.substr(xe,4)===H?(s=H,xe+=4):(s=r,0===je&&Ue($)),s===r&&(e.substr(xe,4)===V?(s=V,xe+=4):(s=r,0===je&&Ue(W))),s!==r&&nt()!==r?(a=xe,44===e.charCodeAt(xe)?(l=j,xe++):(l=r,0===je&&Ue(A)),l!==r&&(c=nt())!==r&&(u=function(){var t,n,o;return t=xe,e.substr(xe,2)===k?(n=k,xe+=2):(n=r,0===je&&Ue(O)),n!==r&&(o=function(){var t,n,o,i,s,a,l;if(t=xe,n=xe,o=[],(i=Qe())===r&&(i=Je()),i!==r)for(;i!==r;)o.push(i),(i=Qe())===r&&(i=Je());else o=r;return(n=o!==r?e.substring(n,xe):o)!==r&&(Ee=t,n=cn({type:1,pattern:s=n,parsedOptions:yt?(a=s,l={},a.replace(wn,(function(e){var t=e.length;switch(e[0]){case"G":l.era=4===t?"long":5===t?"narrow":"short";break;case"y":l.year=2===t?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":l.month=["numeric","2-digit","short","long","narrow"][t-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":l.day=["numeric","2-digit"][t-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":l.weekday=4===t?"short":5===t?"narrow":"short";break;case"e":if(t<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");l.weekday=["short","long","narrow","short"][t-4];break;case"c":if(t<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");l.weekday=["short","long","narrow","short"][t-4];break;case"a":l.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":l.hourCycle="h12",l.hour=["numeric","2-digit"][t-1];break;case"H":l.hourCycle="h23",l.hour=["numeric","2-digit"][t-1];break;case"K":l.hourCycle="h11",l.hour=["numeric","2-digit"][t-1];break;case"k":l.hourCycle="h24",l.hour=["numeric","2-digit"][t-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":l.minute=["numeric","2-digit"][t-1];break;case"s":l.second=["numeric","2-digit"][t-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":l.timeZoneName=t<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""})),l):{}},ft())),n}())!==r?(Ee=t,t=n=o):(xe=t,t=r),t===r&&(t=xe,Ee=xe,dt.push("dateOrTimeArgStyle"),(n=(n=!0)?void 0:r)!==r&&(o=He())!==r?(Ee=t,t=n=N(o)):(xe=t,t=r)),t}())!==r?a=l=[l,c,u]:(xe=a,a=r),a===r&&(a=null),a!==r&&(l=nt())!==r?(125===e.charCodeAt(xe)?(c=v,xe++):(c=r,0===je&&Ue(y)),c!==r?(Ee=t,t=n=L(o,s,a)):(xe=t,t=r)):(xe=t,t=r)):(xe=t,t=r)):(xe=t,t=r)):(xe=t,t=r),t}()),t}())===r&&(t=function(){var t,n,o,i,s,a,l,c,u,d,m;if(t=xe,123===e.charCodeAt(xe)?(n=h,xe++):(n=r,0===je&&Ue(g)),n!==r)if(nt()!==r)if((o=at())!==r)if(nt()!==r)if(44===e.charCodeAt(xe)?(i=j,xe++):(i=r,0===je&&Ue(A)),i!==r)if(nt()!==r)if(e.substr(xe,6)===Z?(s=Z,xe+=6):(s=r,0===je&&Ue(G)),s===r&&(e.substr(xe,13)===Y?(s=Y,xe+=13):(s=r,0===je&&Ue(q))),s!==r)if(nt()!==r)if(44===e.charCodeAt(xe)?(a=j,xe++):(a=r,0===je&&Ue(A)),a!==r)if(nt()!==r)if(l=xe,e.substr(xe,7)===Q?(c=Q,xe+=7):(c=r,0===je&&Ue(J)),c!==r&&(u=nt())!==r&&(d=rt())!==r?l=c=[c,u,d]:(xe=l,l=r),l===r&&(l=null),l!==r)if((c=nt())!==r){if(u=[],(d=Xe())!==r)for(;d!==r;)u.push(d),d=Xe();else u=r;u!==r&&(d=nt())!==r?(125===e.charCodeAt(xe)?(m=v,xe++):(m=r,0===je&&Ue(y)),m!==r?(Ee=t,t=n=function(e,t,n,r){return cn({type:sn.plural,pluralType:"plural"===t?"cardinal":"ordinal",value:e,offset:n?n[2]:0,options:r.reduce((function(e,t){var n=t.id,r=t.value,o=t.location;return n in e&&Ie('Duplicate option "'+n+'" in plural element: "'+Ae()+'"',Ce()),e[n]={value:r,location:o},e}),{})},ft())}(o,s,l,u)):(xe=t,t=r)):(xe=t,t=r)}else xe=t,t=r;else xe=t,t=r;else xe=t,t=r;else xe=t,t=r;else xe=t,t=r;else xe=t,t=r;else xe=t,t=r;else xe=t,t=r;else xe=t,t=r;else xe=t,t=r;else xe=t,t=r;else xe=t,t=r;return t}())===r&&(t=function(){var t,n,o,i,s,a,l,c,u;if(t=xe,123===e.charCodeAt(xe)?(n=h,xe++):(n=r,0===je&&Ue(g)),n!==r)if(nt()!==r)if((o=at())!==r)if(nt()!==r)if(44===e.charCodeAt(xe)?(i=j,xe++):(i=r,0===je&&Ue(A)),i!==r)if(nt()!==r)if(e.substr(xe,6)===K?(s=K,xe+=6):(s=r,0===je&&Ue(X)),s!==r)if(nt()!==r)if(44===e.charCodeAt(xe)?(a=j,xe++):(a=r,0===je&&Ue(A)),a!==r)if(nt()!==r){if(l=[],(c=Ke())!==r)for(;c!==r;)l.push(c),c=Ke();else l=r;l!==r&&(c=nt())!==r?(125===e.charCodeAt(xe)?(u=v,xe++):(u=r,0===je&&Ue(y)),u!==r?(Ee=t,t=n=function(e,t){return cn({type:sn.select,value:e,options:t.reduce((function(e,t){var n=t.id,r=t.value,o=t.location;return n in e&&Ie('Duplicate option "'+n+'" in select element: "'+Ae()+'"',Ce()),e[n]={value:r,location:o},e}),{})},ft())}(o,l)):(xe=t,t=r)):(xe=t,t=r)}else xe=t,t=r;else xe=t,t=r;else xe=t,t=r;else xe=t,t=r;else xe=t,t=r;else xe=t,t=r;else xe=t,t=r;else xe=t,t=r;else xe=t,t=r;else xe=t,t=r;return t}())===r&&(t=function(){var t,n;return t=xe,35===e.charCodeAt(xe)?(n="#",xe++):(n=r,0===je&&Ue(c)),n!==r&&(Ee=t,n=cn({type:sn.pound},ft())),n}()),t}function He(){var t,n,o,i;if(t=xe,Ee=xe,(n=(n=vt)?void 0:r)!==r){if(o=[],(i=ot())===r&&(i=it())===r&&(i=st())===r&&(60===e.charCodeAt(xe)?(i=s,xe++):(i=r,0===je&&Ue(a))),i!==r)for(;i!==r;)o.push(i),(i=ot())===r&&(i=it())===r&&(i=st())===r&&(60===e.charCodeAt(xe)?(i=s,xe++):(i=r,0===je&&Ue(a)));else o=r;o!==r?(Ee=t,t=n=l(o)):(xe=t,t=r)}else xe=t,t=r;if(t===r){if(t=xe,n=[],(o=ot())===r&&(o=it())===r&&(o=st())===r&&(o=$e()),o!==r)for(;o!==r;)n.push(o),(o=ot())===r&&(o=it())===r&&(o=st())===r&&(o=$e());else n=r;n!==r&&(Ee=t,n=l(n)),t=n}return t}function $e(){var t,n,o;return t=xe,n=xe,je++,(o=We())===r&&(o=Ze())===r&&(o=Ve()),je--,o===r?n=void 0:(xe=n,n=r),n!==r?(60===e.charCodeAt(xe)?(o=s,xe++):(o=r,0===je&&Ue(a)),o!==r?(Ee=t,t=n="<"):(xe=t,t=r)):(xe=t,t=r),t}function Ve(){var t,n,o,i,l,c,u;return t=xe,n=xe,60===e.charCodeAt(xe)?(o=s,xe++):(o=r,0===je&&Ue(a)),o!==r&&(i=lt())!==r&&(l=nt())!==r?("/>"===e.substr(xe,2)?(c="/>",xe+=2):(c=r,0===je&&Ue(d)),c!==r?n=o=[o,i,l,c]:(xe=n,n=r)):(xe=n,n=r),n!==r&&(Ee=t,u=n,n=cn({type:sn.literal,value:u.join("")},ft())),n}function We(){var t,n,o,i;return t=xe,60===e.charCodeAt(xe)?(n=s,xe++):(n=r,0===je&&Ue(a)),n!==r&&(o=lt())!==r?(62===e.charCodeAt(xe)?(i=">",xe++):(i=r,0===je&&Ue(m)),i!==r?(Ee=t,t=n=o):(xe=t,t=r)):(xe=t,t=r),t}function Ze(){var t,n,o,i;return t=xe,"</"===e.substr(xe,2)?(n="</",xe+=2):(n=r,0===je&&Ue(f)),n!==r&&(o=lt())!==r?(62===e.charCodeAt(xe)?(i=">",xe++):(i=r,0===je&&Ue(m)),i!==r?(Ee=t,t=n=o):(xe=t,t=r)):(xe=t,t=r),t}function Ge(){var t,n,o,i,s;if(je++,t=xe,n=[],o=xe,i=xe,je++,(s=et())===r&&(b.test(e.charAt(xe))?(s=e.charAt(xe),xe++):(s=r,0===je&&Ue(w))),je--,s===r?i=void 0:(xe=i,i=r),i!==r?(e.length>xe?(s=e.charAt(xe),xe++):(s=r,0===je&&Ue(M)),s!==r?o=i=[i,s]:(xe=o,o=r)):(xe=o,o=r),o!==r)for(;o!==r;)n.push(o),o=xe,i=xe,je++,(s=et())===r&&(b.test(e.charAt(xe))?(s=e.charAt(xe),xe++):(s=r,0===je&&Ue(w))),je--,s===r?i=void 0:(xe=i,i=r),i!==r?(e.length>xe?(s=e.charAt(xe),xe++):(s=r,0===je&&Ue(M)),s!==r?o=i=[i,s]:(xe=o,o=r)):(xe=o,o=r);else n=r;return t=n!==r?e.substring(t,xe):n,je--,t===r&&(n=r,0===je&&Ue(_)),t}function Ye(){var t,n,o;return je++,t=xe,47===e.charCodeAt(xe)?(n="/",xe++):(n=r,0===je&&Ue(x)),n!==r&&(o=Ge())!==r?(Ee=t,t=n=o):(xe=t,t=r),je--,t===r&&(n=r,0===je&&Ue(S)),t}function qe(){var e,t,n,o;if(je++,e=xe,nt()!==r)if((t=Ge())!==r){for(n=[],o=Ye();o!==r;)n.push(o),o=Ye();n!==r?(Ee=e,e=function(e,t){return{stem:e,options:t}}(t,n)):(xe=e,e=r)}else xe=e,e=r;else xe=e,e=r;return je--,e===r&&0===je&&Ue(E),e}function Qe(){var t,n,o,i;if(t=xe,39===e.charCodeAt(xe)?(n=D,xe++):(n=r,0===je&&Ue(T)),n!==r){if(o=[],(i=ot())===r&&(P.test(e.charAt(xe))?(i=e.charAt(xe),xe++):(i=r,0===je&&Ue(R))),i!==r)for(;i!==r;)o.push(i),(i=ot())===r&&(P.test(e.charAt(xe))?(i=e.charAt(xe),xe++):(i=r,0===je&&Ue(R)));else o=r;o!==r?(39===e.charCodeAt(xe)?(i=D,xe++):(i=r,0===je&&Ue(T)),i!==r?t=n=[n,o,i]:(xe=t,t=r)):(xe=t,t=r)}else xe=t,t=r;if(t===r)if(t=[],(n=ot())===r&&(U.test(e.charAt(xe))?(n=e.charAt(xe),xe++):(n=r,0===je&&Ue(F))),n!==r)for(;n!==r;)t.push(n),(n=ot())===r&&(U.test(e.charAt(xe))?(n=e.charAt(xe),xe++):(n=r,0===je&&Ue(F)));else t=r;return t}function Je(){var t,n;if(t=[],z.test(e.charAt(xe))?(n=e.charAt(xe),xe++):(n=r,0===je&&Ue(B)),n!==r)for(;n!==r;)t.push(n),z.test(e.charAt(xe))?(n=e.charAt(xe),xe++):(n=r,0===je&&Ue(B));else t=r;return t}function Ke(){var t,n,o,i,s,a,l;return t=xe,nt()!==r&&(n=ut())!==r&&nt()!==r?(123===e.charCodeAt(xe)?(o=h,xe++):(o=r,0===je&&Ue(g)),o!==r?(Ee=xe,dt.push("select"),void 0!==r&&(i=ze())!==r?(125===e.charCodeAt(xe)?(s=v,xe++):(s=r,0===je&&Ue(y)),s!==r?(Ee=t,a=n,l=i,dt.pop(),t=cn({id:a,value:l},ft())):(xe=t,t=r)):(xe=t,t=r)):(xe=t,t=r)):(xe=t,t=r),t}function Xe(){var t,n,o,i,s,a,l;return t=xe,nt()!==r&&(n=function(){var t,n,o,i;return t=xe,n=xe,61===e.charCodeAt(xe)?(o="=",xe++):(o=r,0===je&&Ue(ee)),o!==r&&(i=rt())!==r?n=o=[o,i]:(xe=n,n=r),(t=n!==r?e.substring(t,xe):n)===r&&(t=ut()),t}())!==r&&nt()!==r?(123===e.charCodeAt(xe)?(o=h,xe++):(o=r,0===je&&Ue(g)),o!==r?(Ee=xe,dt.push("plural"),void 0!==r&&(i=ze())!==r?(125===e.charCodeAt(xe)?(s=v,xe++):(s=r,0===je&&Ue(y)),s!==r?(Ee=t,a=n,l=i,dt.pop(),t=cn({id:a,value:l},ft())):(xe=t,t=r)):(xe=t,t=r)):(xe=t,t=r)):(xe=t,t=r),t}function et(){var t;return je++,ne.test(e.charAt(xe))?(t=e.charAt(xe),xe++):(t=r,0===je&&Ue(re)),je--,t===r&&0===je&&Ue(te),t}function tt(){var t;return je++,ie.test(e.charAt(xe))?(t=e.charAt(xe),xe++):(t=r,0===je&&Ue(se)),je--,t===r&&0===je&&Ue(oe),t}function nt(){var t,n,o;for(je++,t=xe,n=[],o=et();o!==r;)n.push(o),o=et();return t=n!==r?e.substring(t,xe):n,je--,t===r&&(n=r,0===je&&Ue(ae)),t}function rt(){var t,n,o,i;return je++,t=xe,45===e.charCodeAt(xe)?(n="-",xe++):(n=r,0===je&&Ue(ce)),n===r&&(n=null),n!==r&&(o=ct())!==r?(Ee=t,t=n=(i=o)?n?-i:i:0):(xe=t,t=r),je--,t===r&&(n=r,0===je&&Ue(le)),t}function ot(){var t,n;return je++,t=xe,e.substr(xe,2)===de?(n=de,xe+=2):(n=r,0===je&&Ue(me)),n!==r&&(Ee=t,n="'"),je--,(t=n)===r&&(n=r,0===je&&Ue(ue)),t}function it(){var t,n,o,i,s,a;if(t=xe,39===e.charCodeAt(xe)?(n=D,xe++):(n=r,0===je&&Ue(T)),n!==r)if((o=function(){var t,n,o,i;return t=xe,n=xe,e.length>xe?(o=e.charAt(xe),xe++):(o=r,0===je&&Ue(M)),o!==r?(Ee=xe,(i=(i=function(e){return"<"===e||">"===e||"{"===e||"}"===e||mt()&&"#"===e}(o))?void 0:r)!==r?n=o=[o,i]:(xe=n,n=r)):(xe=n,n=r),t=n!==r?e.substring(t,xe):n}())!==r){for(i=xe,s=[],e.substr(xe,2)===de?(a=de,xe+=2):(a=r,0===je&&Ue(me)),a===r&&(P.test(e.charAt(xe))?(a=e.charAt(xe),xe++):(a=r,0===je&&Ue(R)));a!==r;)s.push(a),e.substr(xe,2)===de?(a=de,xe+=2):(a=r,0===je&&Ue(me)),a===r&&(P.test(e.charAt(xe))?(a=e.charAt(xe),xe++):(a=r,0===je&&Ue(R)));(i=s!==r?e.substring(i,xe):s)!==r?(39===e.charCodeAt(xe)?(s=D,xe++):(s=r,0===je&&Ue(T)),s===r&&(s=null),s!==r?(Ee=t,t=n=o+i.replace("''","'")):(xe=t,t=r)):(xe=t,t=r)}else xe=t,t=r;else xe=t,t=r;return t}function st(){var t,n,o,i;return t=xe,n=xe,e.length>xe?(o=e.charAt(xe),xe++):(o=r,0===je&&Ue(M)),o!==r?(Ee=xe,(i=(i=function(e){return!("<"===e||"{"===e||mt()&&"#"===e||dt.length>1&&"}"===e)}(o))?void 0:r)!==r?n=o=[o,i]:(xe=n,n=r)):(xe=n,n=r),n===r&&(10===e.charCodeAt(xe)?(n="\n",xe++):(n=r,0===je&&Ue(fe))),n!==r?e.substring(t,xe):n}function at(){var t,n;return je++,t=xe,(n=ct())===r&&(n=ut()),t=n!==r?e.substring(t,xe):n,je--,t===r&&(n=r,0===je&&Ue(pe)),t}function lt(){var t,n;return je++,t=xe,(n=ct())===r&&(n=function(){var t,n,o,i,s;if(je++,t=xe,n=[],45===e.charCodeAt(xe)?(o="-",xe++):(o=r,0===je&&Ue(ce)),o===r&&(o=xe,i=xe,je++,(s=et())===r&&(s=tt()),je--,s===r?i=void 0:(xe=i,i=r),i!==r?(e.length>xe?(s=e.charAt(xe),xe++):(s=r,0===je&&Ue(M)),s!==r?o=i=[i,s]:(xe=o,o=r)):(xe=o,o=r)),o!==r)for(;o!==r;)n.push(o),45===e.charCodeAt(xe)?(o="-",xe++):(o=r,0===je&&Ue(ce)),o===r&&(o=xe,i=xe,je++,(s=et())===r&&(s=tt()),je--,s===r?i=void 0:(xe=i,i=r),i!==r?(e.length>xe?(s=e.charAt(xe),xe++):(s=r,0===je&&Ue(M)),s!==r?o=i=[i,s]:(xe=o,o=r)):(xe=o,o=r));else n=r;return t=n!==r?e.substring(t,xe):n,je--,t===r&&(n=r,0===je&&Ue(Se)),t}()),t=n!==r?e.substring(t,xe):n,je--,t===r&&(n=r,0===je&&Ue(he)),t}function ct(){var t,n,o,i,s;if(je++,t=xe,48===e.charCodeAt(xe)?(n="0",xe++):(n=r,0===je&&Ue(ve)),n!==r&&(Ee=t,n=0),(t=n)===r){if(t=xe,n=xe,ye.test(e.charAt(xe))?(o=e.charAt(xe),xe++):(o=r,0===je&&Ue(_e)),o!==r){for(i=[],be.test(e.charAt(xe))?(s=e.charAt(xe),xe++):(s=r,0===je&&Ue(we));s!==r;)i.push(s),be.test(e.charAt(xe))?(s=e.charAt(xe),xe++):(s=r,0===je&&Ue(we));i!==r?n=o=[o,i]:(xe=n,n=r)}else xe=n,n=r;n!==r&&(Ee=t,n=parseInt(n.join(""),10)),t=n}return je--,t===r&&(n=r,0===je&&Ue(ge)),t}function ut(){var t,n,o,i,s;if(je++,t=xe,n=[],o=xe,i=xe,je++,(s=et())===r&&(s=tt()),je--,s===r?i=void 0:(xe=i,i=r),i!==r?(e.length>xe?(s=e.charAt(xe),xe++):(s=r,0===je&&Ue(M)),s!==r?o=i=[i,s]:(xe=o,o=r)):(xe=o,o=r),o!==r)for(;o!==r;)n.push(o),o=xe,i=xe,je++,(s=et())===r&&(s=tt()),je--,s===r?i=void 0:(xe=i,i=r),i!==r?(e.length>xe?(s=e.charAt(xe),xe++):(s=r,0===je&&Ue(M)),s!==r?o=i=[i,s]:(xe=o,o=r)):(xe=o,o=r);else n=r;return t=n!==r?e.substring(t,xe):n,je--,t===r&&(n=r,0===je&&Ue(Me)),t}var dt=["root"];function mt(){return"plural"===dt[dt.length-1]}function ft(){return t&&t.captureLocation?{location:Ce()}:{}}var pt,ht,gt,vt=t&&t.ignoreTag,yt=t&&t.shouldParseSkeleton;if((n=i())!==r&&xe===e.length)return n;throw n!==r&&xe<e.length&&Ue({type:"end"}),pt=Ne,ht=Oe<e.length?e.charAt(Oe):null,gt=Oe<e.length?Re(Oe,Oe+1):Re(Oe,Oe),new Cn(Cn.buildMessage(pt,ht),pt,ht,gt)},Ln=/(^|[^\\])#/g;function Dn(e){e.forEach((function(e){(gn(e)||hn(e))&&Object.keys(e.options).forEach((function(t){for(var n,r=e.options[t],o=-1,i=void 0,s=0;s<r.value.length;s++){var a=r.value[s];if(un(a)&&Ln.test(a.value)){o=s,i=a;break}}if(i){var l=i.value.replace(Ln,"$1{"+e.value+", number}"),c=In(l);(n=r.value).splice.apply(n,function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}([o,1],c))}Dn(r.value)}))}))}function Tn(e,t){t=cn({normalizeHashtagInPlural:!0,shouldParseSkeleton:!0},t||{});var n=In(e,t);return t.normalizeHashtagInPlural&&Dn(n),n}var Pn,Rn=s(316),Un=s.n(Rn);!function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"}(Pn||(Pn={}));var Fn,zn=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.code=n,o.originalMessage=r,o}return nn(t,e),t.prototype.toString=function(){return"[formatjs Error: "+this.code+"] "+this.message},t}(Error),Bn=function(e){function t(t,n,r,o){return e.call(this,'Invalid values for "'+t+'": "'+n+'". Options are "'+Object.keys(r).join('", "')+'"',"INVALID_VALUE",o)||this}return nn(t,e),t}(zn),Hn=function(e){function t(t,n,r){return e.call(this,'Value for "'+t+'" must be of type '+n,"INVALID_VALUE",r)||this}return nn(t,e),t}(zn),$n=function(e){function t(t,n){return e.call(this,'The intl string context variable "'+t+'" was not provided to the string "'+n+'"',"MISSING_VALUE",n)||this}return nn(t,e),t}(zn);function Vn(e){return"function"==typeof e}function Wn(e,t,n,r,o,i,s){if(1===e.length&&un(e[0]))return[{type:0,value:e[0].value}];for(var a=[],l=0,c=e;l<c.length;l++){var u=c[l];if(un(u))a.push({type:0,value:u.value});else if(vn(u))"number"==typeof i&&a.push({type:0,value:n.getNumberFormat(t).format(i)});else{var d=u.value;if(!o||!(d in o))throw new $n(d,s);var m=o[d];if(dn(u))m&&"string"!=typeof m&&"number"!=typeof m||(m="string"==typeof m||"number"==typeof m?String(m):""),a.push({type:"string"==typeof m?0:1,value:m});else if(fn(u)){var f="string"==typeof u.style?r.date[u.style]:bn(u.style)?u.style.parsedOptions:void 0;a.push({type:0,value:n.getDateTimeFormat(t,f).format(m)})}else if(pn(u))f="string"==typeof u.style?r.time[u.style]:bn(u.style)?u.style.parsedOptions:void 0,a.push({type:0,value:n.getDateTimeFormat(t,f).format(m)});else if(mn(u))(f="string"==typeof u.style?r.number[u.style]:_n(u.style)?u.style.parsedOptions:void 0)&&f.scale&&(m*=f.scale||1),a.push({type:0,value:n.getNumberFormat(t,f).format(m)});else{if(yn(u)){var p=u.children,h=u.value,g=o[h];if(!Vn(g))throw new Hn(h,"function",s);var v=g(Wn(p,t,n,r,o,i).map((function(e){return e.value})));Array.isArray(v)||(v=[v]),a.push.apply(a,v.map((function(e){return{type:"string"==typeof e?0:1,value:e}})))}if(hn(u)){if(!(y=u.options[m]||u.options.other))throw new Bn(u.value,m,Object.keys(u.options),s);a.push.apply(a,Wn(y.value,t,n,r,o))}else if(gn(u)){var y;if(!(y=u.options["="+m])){if(!Intl.PluralRules)throw new zn('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',"MISSING_INTL_API",s);var _=n.getPluralRules(t,{type:u.pluralType}).select(m-(u.offset||0));y=u.options[_]||u.options.other}if(!y)throw new Bn(u.value,m,Object.keys(u.options),s);a.push.apply(a,Wn(y.value,t,n,r,o,m-(u.offset||0)))}}}}return(b=a).length<2?b:b.reduce((function(e,t){var n=e[e.length-1];return n&&0===n.type&&0===t.type?n.value+=t.value:e.push(t),e}),[]);var b}function Zn(e){return{create:function(){return{has:function(t){return t in e},get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}!function(e){e[e.literal=0]="literal",e[e.object=1]="object"}(Fn||(Fn={}));var Gn,Yn=Un()||Rn,qn=function(){function e(t,n,r,o){var i,s,a,l=this;if(void 0===n&&(n=e.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=l.formatToParts(e);if(1===t.length)return t[0].value;var n=t.reduce((function(e,t){return e.length&&0===t.type&&"string"==typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e}),[]);return n.length<=1?n[0]||"":n},this.formatToParts=function(e){return Wn(l.ast,l.locales,l.formatters,l.formats,e,void 0,l.message)},this.resolvedOptions=function(){return{locale:Intl.NumberFormat.supportedLocalesOf(l.locales)[0]}},this.getAst=function(){return l.ast},"string"==typeof t){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=e.__parse(t,{normalizeHashtagInPlural:!1,ignoreTag:null==o?void 0:o.ignoreTag})}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=(s=e.formats,(a=r)?Object.keys(s).reduce((function(e,t){var n,r;return e[t]=(n=s[t],(r=a[t])?rn(rn(rn({},n||{}),r||{}),Object.keys(n).reduce((function(e,t){return e[t]=rn(rn({},n[t]),r[t]||{}),e}),{})):n),e}),rn({},s)):s),this.locales=n,this.formatters=o&&o.formatters||(void 0===(i=this.formatterCache)&&(i={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Yn((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,on([void 0],t)))}),{cache:Zn(i.number),strategy:Yn.strategies.variadic}),getDateTimeFormat:Yn((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,on([void 0],t)))}),{cache:Zn(i.dateTime),strategy:Yn.strategies.variadic}),getPluralRules:Yn((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,on([void 0],t)))}),{cache:Zn(i.pluralRules),strategy:Yn.strategies.variadic})})}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.__parse=Tn,e.formats={number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}();!function(e){e.FORMAT_ERROR="FORMAT_ERROR",e.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",e.INVALID_CONFIG="INVALID_CONFIG",e.MISSING_DATA="MISSING_DATA",e.MISSING_TRANSLATION="MISSING_TRANSLATION"}(Gn||(Gn={}));var Qn=function(e){function t(n,r,o){var i=e.call(this,"[@formatjs/intl Error "+n+"] "+r+" \n"+(o?"\n"+o.message+"\n"+o.stack:""))||this;return i.code=n,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(i,t),i}return Kt(t,e),t}(Error),Jn=function(e){function t(t,n){return e.call(this,Gn.UNSUPPORTED_FORMATTER,t,n)||this}return Kt(t,e),t}(Qn),Kn=function(e){function t(t,n){return e.call(this,Gn.INVALID_CONFIG,t,n)||this}return Kt(t,e),t}(Qn),Xn=function(e){function t(t,n){return e.call(this,Gn.MISSING_DATA,t,n)||this}return Kt(t,e),t}(Qn),er=function(e){function t(t,n,r,o){var i=e.call(this,Gn.FORMAT_ERROR,t+" \nLocale: "+n+"\nMessageID: "+(null==r?void 0:r.id)+"\nDefault Message: "+(null==r?void 0:r.defaultMessage)+"\nDescription: "+(null==r?void 0:r.description)+" \n",o)||this;return i.descriptor=r,i}return Kt(t,e),t}(Qn),tr=function(e){function t(t,n){var r=e.call(this,Gn.MISSING_TRANSLATION,'Missing message: "'+t.id+'" for locale "'+n+'", using '+(t.defaultMessage?"default message":"id")+" as fallback.")||this;return r.descriptor=t,r}return Kt(t,e),t}(Qn);function nr(e,t,n){return void 0===n&&(n={}),t.reduce((function(t,r){return r in e?t[r]=e[r]:r in n&&(t[r]=n[r]),t}),{})}var rr={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},onError:function(e){}};function or(e){return{create:function(){return{has:function(t){return t in e},get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}var ir=Un()||Rn;function sr(e,t,n,r){var o,i=e&&e[t];if(i&&(o=i[n]),o)return o;r(new Jn("No "+t+" format named: "+n))}function ar(e){Qt(e,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var lr=Vt(Vt({},rr),{textComponent:b});function cr(e,t){return Object.keys(e).reduce((function(n,r){return n[r]=Xt({timeZone:t},e[r]),n}),{})}function ur(e,t){return Object.keys(Xt(Xt({},e),t)).reduce((function(n,r){return n[r]=Xt(Xt({},e[r]||{}),t[r]||{}),n}),{})}function dr(e,t){if(!t)return e;var n=qn.formats;return Xt(Xt(Xt({},n),e),{date:ur(cr(n.date,t),cr(e.date||{},t)),time:ur(cr(n.time,t),cr(e.time||{},t))})}function mr(e,t,n,r,o){var i=e.locale,s=e.formats,a=e.messages,l=e.defaultLocale,c=e.defaultFormats,u=e.onError,d=e.timeZone,m=e.defaultRichTextElements;void 0===n&&(n={id:""});var f=n.id,p=n.defaultMessage;Qt(!!f,"[@formatjs/intl] An `id` must be provided to format a message.");var h=String(f),g=a&&Object.prototype.hasOwnProperty.call(a,h)&&a[h];if(Array.isArray(g)&&1===g.length&&g[0].type===sn.literal)return g[0].value;if(!r&&g&&"string"==typeof g&&!m)return g.replace(/'\{(.*?)\}'/gi,"{$1}");if(r=Xt(Xt({},m),r||{}),s=dr(s,d),c=dr(c,d),!g){if((!p||i&&i.toLowerCase()!==l.toLowerCase())&&u(new tr(n,i)),p)try{return t.getMessageFormat(p,l,c,o).format(r)}catch(e){return u(new er('Error formatting default message for: "'+h+'", rendering default message verbatim',i,n,e)),"string"==typeof p?p:h}return h}try{return t.getMessageFormat(g,i,s,Xt({formatters:t},o||{})).format(r)}catch(e){u(new er('Error formatting message: "'+h+'", using '+(p?"default message":"id")+" as fallback.",i,n,e))}if(p)try{return t.getMessageFormat(p,l,c,o).format(r)}catch(e){u(new er('Error formatting the default message for: "'+h+'", rendering message verbatim',i,n,e))}return"string"==typeof g?g:"string"==typeof p?p:h}var fr=["localeMatcher","style","currency","currencyDisplay","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay"];function pr(e,t,n){var r=e.locale,o=e.formats,i=e.onError;void 0===n&&(n={});var s=n.format,a=s&&sr(o,"number",s,i)||{};return t(r,nr(n,fr,a))}function hr(e,t,n,r){void 0===r&&(r={});try{return pr(e,t,r).format(n)}catch(t){e.onError(new Qn(Gn.FORMAT_ERROR,"Error formatting number.",t))}return String(n)}function gr(e,t,n,r){void 0===r&&(r={});try{return pr(e,t,r).formatToParts(n)}catch(t){e.onError(new Qn(Gn.FORMAT_ERROR,"Error formatting number.",t))}return[]}var vr=["numeric","style"];function yr(e,t,n,r,o){void 0===o&&(o={}),r||(r="second"),Intl.RelativeTimeFormat||e.onError(new zn('Intl.RelativeTimeFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-relativetimeformat"\n',"MISSING_INTL_API"));try{return function(e,t,n){var r=e.locale,o=e.formats,i=e.onError;void 0===n&&(n={});var s=n.format,a=!!s&&sr(o,"relative",s,i)||{};return t(r,nr(n,vr,a))}(e,t,o).format(n,r)}catch(t){e.onError(new er("Error formatting relative time.",t))}return String(n)}var _r=["localeMatcher","formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","fractionalSecondDigits","calendar","numberingSystem"];function br(e,t,n,r){var o=e.locale,i=e.formats,s=e.onError,a=e.timeZone;void 0===r&&(r={});var l=r.format,c=Xt(Xt({},a&&{timeZone:a}),l&&sr(i,t,l,s)),u=nr(r,_r,c);return"time"!==t||u.hour||u.minute||u.second||u.timeStyle||u.dateStyle||(u=Xt(Xt({},u),{hour:"numeric",minute:"numeric"})),n(o,u)}function wr(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],i=n[1],s=void 0===i?{}:i,a="string"==typeof o?new Date(o||0):o;try{return br(e,"date",t,s).format(a)}catch(t){e.onError(new Qn(Gn.FORMAT_ERROR,"Error formatting date.",t))}return String(a)}function Mr(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],i=n[1],s=void 0===i?{}:i,a="string"==typeof o?new Date(o||0):o;try{return br(e,"time",t,s).format(a)}catch(t){e.onError(new Qn(Gn.FORMAT_ERROR,"Error formatting time.",t))}return String(a)}function Sr(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],i=n[1],s=n[2],a=void 0===s?{}:s,l=e.timeZone,c=e.locale,u=e.onError,d=nr(a,_r,l?{timeZone:l}:{});try{return t(c,d).formatRange(o,i)}catch(e){u(new Qn(Gn.FORMAT_ERROR,"Error formatting date time range.",e))}return String(o)}function xr(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],i=n[1],s=void 0===i?{}:i,a="string"==typeof o?new Date(o||0):o;try{return br(e,"date",t,s).formatToParts(a)}catch(t){e.onError(new Qn(Gn.FORMAT_ERROR,"Error formatting date.",t))}return[]}function Er(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],i=n[1],s=void 0===i?{}:i,a="string"==typeof o?new Date(o||0):o;try{return br(e,"time",t,s).formatToParts(a)}catch(t){e.onError(new Qn(Gn.FORMAT_ERROR,"Error formatting time.",t))}return[]}var kr=["localeMatcher","type"];function Or(e,t,n,r){var o=e.locale,i=e.onError;void 0===r&&(r={}),Intl.PluralRules||i(new zn('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',"MISSING_INTL_API"));var s=nr(r,kr);try{return t(o,s).select(n)}catch(e){i(new er("Error formatting plural.",e))}return"other"}var Nr=["localeMatcher","type","style"],jr=Date.now();function Ar(e,t,n,r){var o=e.locale,i=e.onError;void 0===r&&(r={}),Intl.ListFormat||i(new zn('Intl.ListFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-listformat"\n',"MISSING_INTL_API"));var s=nr(r,Nr);try{var a={},l=n.map((function(e,t){if("object"==typeof e){var n=function(e){return jr+"_"+e+"_"+jr}(t);return a[n]=e,n}return String(e)}));return Object.keys(a).length?t(o,s).formatToParts(l).reduce((function(e,t){var n=t.value;return a[n]?e.push(a[n]):"string"==typeof e[e.length-1]?e[e.length-1]+=n:e.push(n),e}),[]):t(o,s).format(l)}catch(e){i(new Qn(Gn.FORMAT_ERROR,"Error formatting list.",e))}return n}var Cr=["localeMatcher","style","type","fallback"];function Ir(e,t,n,r){var o=e.locale,i=e.onError;Intl.DisplayNames||i(new zn('Intl.DisplayNames is not available in this environment.\nTry polyfilling it using "@formatjs/intl-displaynames"\n',"MISSING_INTL_API"));var s=nr(r,Cr);try{return t(o,s).of(n)}catch(e){i(new Qn(Gn.FORMAT_ERROR,"Error formatting display name.",e))}}function Lr(e,t){var n=function(e){void 0===e&&(e={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}});var t=Intl.RelativeTimeFormat,n=Intl.ListFormat,r=Intl.DisplayNames,o=ir((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,en([void 0],t)))}),{cache:or(e.dateTime),strategy:ir.strategies.variadic}),i=ir((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,en([void 0],t)))}),{cache:or(e.number),strategy:ir.strategies.variadic}),s=ir((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,en([void 0],t)))}),{cache:or(e.pluralRules),strategy:ir.strategies.variadic});return{getDateTimeFormat:o,getNumberFormat:i,getMessageFormat:ir((function(e,t,n,r){return new qn(e,t,n,Xt({formatters:{getNumberFormat:i,getDateTimeFormat:o,getPluralRules:s}},r||{}))}),{cache:or(e.message),strategy:ir.strategies.variadic}),getRelativeTimeFormat:ir((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new(t.bind.apply(t,en([void 0],e)))}),{cache:or(e.relativeTime),strategy:ir.strategies.variadic}),getPluralRules:s,getListFormat:ir((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(n.bind.apply(n,en([void 0],e)))}),{cache:or(e.list),strategy:ir.strategies.variadic}),getDisplayNames:ir((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(r.bind.apply(r,en([void 0],e)))}),{cache:or(e.displayNames),strategy:ir.strategies.variadic})}}(t),r=Xt(Xt({},rr),e),o=r.locale,i=r.defaultLocale,s=r.onError;return o?!Intl.NumberFormat.supportedLocalesOf(o).length&&s?s(new Xn('Missing locale data for locale: "'+o+'" in Intl.NumberFormat. Using default locale: "'+i+'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details')):!Intl.DateTimeFormat.supportedLocalesOf(o).length&&s&&s(new Xn('Missing locale data for locale: "'+o+'" in Intl.DateTimeFormat. Using default locale: "'+i+'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details')):(s&&s(new Kn('"locale" was not configured, using "'+i+'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details')),r.locale=r.defaultLocale||"en"),function(e){e.defaultRichTextElements&&function(e){return"string"==typeof(e?e[Object.keys(e)[0]]:void 0)}(e.messages||{})&&console.warn('[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. \nPlease consider using "@formatjs/cli" to pre-compile your messages for performance.\nFor more details see https://formatjs.io/docs/getting-started/message-distribution')}(r),Xt(Xt({},r),{formatters:n,formatNumber:hr.bind(null,r,n.getNumberFormat),formatNumberToParts:gr.bind(null,r,n.getNumberFormat),formatRelativeTime:yr.bind(null,r,n.getRelativeTimeFormat),formatDate:wr.bind(null,r,n.getDateTimeFormat),formatDateToParts:xr.bind(null,r,n.getDateTimeFormat),formatTime:Mr.bind(null,r,n.getDateTimeFormat),formatDateTimeRange:Sr.bind(null,r,n.getDateTimeFormat),formatTimeToParts:Er.bind(null,r,n.getDateTimeFormat),formatPlural:Or.bind(null,r,n.getPluralRules),formatMessage:mr.bind(null,r,n),formatList:Ar.bind(null,r,n.getListFormat),formatDisplayName:Ir.bind(null,r,n.getDisplayNames)})}var Dr=s(138),Tr=s.n(Dr),Pr=Tr()||Dr;function Rr(e){return{locale:e.locale,timeZone:e.timeZone,formats:e.formats,textComponent:e.textComponent,messages:e.messages,defaultLocale:e.defaultLocale,defaultFormats:e.defaultFormats,onError:e.onError,wrapRichTextChunksInFragment:e.wrapRichTextChunksInFragment,defaultRichTextElements:e.defaultRichTextElements}}function Ur(e){return e?Object.keys(e).reduce((function(t,n){var r,o=e[n];return t[n]=Vn(o)?(r=o,function(e){return r(Re.toArray(e))}):o,t}),{}):e}var Fr=function(e,t,n,r){for(var o=[],i=4;i<arguments.length;i++)o[i-4]=arguments[i];var s=Ur(r),a=mr.apply(void 0,Zt([e,t,n,s],o));return Array.isArray(a)?Re.toArray(a):a},zr=function(e,t){var n=e.defaultRichTextElements,r=Wt(e,["defaultRichTextElements"]),o=Ur(n),i=Lr(Vt(Vt(Vt({},lr),r),{defaultRichTextElements:o}),t);return Vt(Vt({},i),{formatMessage:Fr.bind(null,{locale:i.locale,timeZone:i.timeZone,formats:i.formats,defaultLocale:i.defaultLocale,defaultFormats:i.defaultFormats,messages:i.messages,onError:i.onError,defaultRichTextElements:o},i.formatters)})};const Br=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cache={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}},t.state={cache:t.cache,intl:zr(Rr(t.props),t.cache),prevConfig:Rr(t.props)},t}return $t(t,e),t.getDerivedStateFromProps=function(e,t){var n=t.prevConfig,r=t.cache,o=Rr(e);return Pr(n,o)?null:{intl:zr(o,r),prevConfig:o}},t.prototype.render=function(){return ar(this.state.intl),v(Yt,{value:this.state.intl},this.props.children)},t.displayName="IntlProvider",t.defaultProps=lr,t}(Ce);const Hr={};var $r,Vr,Wr=s(334),Zr=s.n(Wr);function Gr(e){var t=function(t){return v(qt.Consumer,null,(function(n){ar(n);var r=t.value,o=t.children,i=Wt(t,["value","children"]),s="string"==typeof r?new Date(r||0):r;return o("formatDate"===e?n.formatDateToParts(s,i):n.formatTimeToParts(s,i))}))};return t.displayName=Vr[e],t}function Yr(e){var t=function(t){return v(qt.Consumer,null,(function(n){ar(n);var r=t.value,o=t.children,i=Wt(t,["value","children"]),s=n[e](r,i);return"function"==typeof o?o(s):v(n.textComponent||b,null,s)}))};return t.displayName=$r[e],t}!function(e){e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName"}($r||($r={})),function(e){e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts"}(Vr||(Vr={})),Yr("formatDate"),Yr("formatTime"),Yr("formatNumber"),Yr("formatList"),Yr("formatDisplayName"),Gr("formatDate"),Gr("formatTime");var qr=Tr()||Dr;const Qr=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return $t(n,t),n.prototype.shouldComponentUpdate=function(e){var t=this.props,n=t.values,r=Wt(t,["values"]),o=e.values,i=Wt(e,["values"]);return!qr(o,n)||!qr(r,i)},n.prototype.render=function(){var t=this;return v(qt.Consumer,null,(function(n){ar(n);var r=n.formatMessage,o=n.textComponent,i=void 0===o?b:o,s=t.props,a=s.id,l=s.description,c=s.defaultMessage,u=s.values,d=s.children,m=s.tagName,f=void 0===m?i:m,p=r({id:a,description:l,defaultMessage:c},u,{ignoreTag:s.ignoreTag});return Array.isArray(p)||(p=[p]),"function"==typeof d?d(p):f?v.apply(e,Zt([f,null],p)):p}))},n.displayName="FormattedMessage",n}(w);function Jr(){var e=be(qt);return ar(e),e}var Kr=s(184),Xr=s.n(Kr);const eo=window.remark_config.host||"http://127.0.0.1:8080",to="/api/v1",no="__remarkCollapsed",ro="__remark_comment_value",oo="__remarkHiddenUsers",io="__remarkSort",so="__remarkEmail",ao=["light","dark"],lo=/Android|webOS|iPhone|iPad|iPod|Opera Mini|Windows Phone/i.test(navigator.userAgent),co=(()=>{try{localStorage.setItem("localstorage_availability_test",""),localStorage.removeItem("localstorage_availability_test")}catch(e){return!1}return!0})(),uo=(()=>{try{return window.parent.location.host!==window.location.host}catch(e){return!0}})();function mo(e=window.location.search){const t={};return new URLSearchParams(e).forEach(((e,n)=>{t[n]=e})),t}const fo=mo();fo.max_shown_comments?fo.max_shown_comments=parseInt(fo.max_shown_comments,10):fo.max_shown_comments=10,fo.theme&&-1!==ao.indexOf(fo.theme)||(fo.theme=ao[0]),fo.show_email_subscription="false"!==fo.show_email_subscription;const po=fo.site_id,ho=fo.page_title,go=fo.url,vo=fo.max_shown_comments,yo=(fo.token,fo.theme,{config:{version:"",edit_duration:5e3,max_comment_size:5e3,admins:[],admin_email:"",auth_providers:[],critical_score:0,low_score:0,positive_score:!1,readonly_age:0,max_image_size:0,simple_view:!1,anon_vote:!1,email_notifications:!1,emoji_enabled:!1},query:fo}),_o={failedFetch:{id:"errors.failed-fetch",defaultMessage:"Failed to fetch. Please check your internet connection or try again a bit later",description:{code:-2}},0:{id:"errors.0",defaultMessage:"Something went wrong. Please try again a bit later.",description:{code:0}},1:{id:"errors.1",defaultMessage:"Comment cannot be found. Please refresh the page and try again.",description:{code:1}},2:{id:"errors.2",defaultMessage:"Failed to unmarshal incoming request.",description:{code:2}},3:{id:"errors.3",defaultMessage:"You don't have permission for this operation.",description:{code:3}},4:{id:"errors.4",defaultMessage:"Invalid comment data.",description:{code:4}},5:{id:"errors.5",defaultMessage:"Comment cannot be found.  Please refresh the page and try again.",description:{code:5}},6:{id:"errors.6",defaultMessage:"Site cannot be found.  Please refresh the page and try again.",description:{code:6}},7:{id:"errors.7",defaultMessage:"User has been blocked.",description:{code:7}},8:{id:"errors.8",defaultMessage:"User has been blocked.",description:{code:8}},9:{id:"errors.9",defaultMessage:"Comment changing failed. Please try again a bit later.",description:{code:9}},10:{id:"errors.10",defaultMessage:"It is too late to edit the comment.",description:{code:10}},11:{id:"errors.11",defaultMessage:"Comment already has reply, editing is not possible.",description:{code:11}},12:{id:"errors.12",defaultMessage:"Cannot save voting result. Please try again a bit later.",description:{code:12}},13:{id:"errors.13",defaultMessage:"You cannot vote for your own comment.",description:{code:13}},14:{id:"errors.14",defaultMessage:"You have already voted for the comment.",description:{code:14}},15:{id:"errors.15",defaultMessage:"Too many votes for the comment.",description:{code:15}},16:{id:"errors.16",defaultMessage:"Min score reached for the comment.",description:{code:16}},17:{id:"errors.17",defaultMessage:"Action rejected. Please try again a bit later.",description:{code:17}},18:{id:"errors.18",defaultMessage:"Requested file cannot be found.",description:{code:18}}},bo=new Map;Object.entries(_o).forEach((([,e])=>{bo.set(e.description.code,e)}));const wo={notAuthorized:{id:"errors.not-authorized",defaultMessage:"Not authorized."},forbidden:{id:"errors.forbidden",defaultMessage:"Forbidden."},toManyRequest:{id:"errors.to-many-request",defaultMessage:"You have reached maximum request limit."},unexpectedError:{id:"errors.unexpected-error",defaultMessage:"Something went wrong."}},Mo=new Map([[401,wo.notAuthorized],[403,wo.forbidden],[429,wo.toManyRequest]]);function So(e,t){const n=t.formatMessage(bo.get(0)||_o[0]);if(!e)return n;if("string"==typeof e)return e;if("number"==typeof e.code&&(bo.has(e.code)||Mo.has(e.code))){const n=bo.get(e.code)||Mo.get(e.code)||_o[0];return t.formatMessage(n)}return n}class xo extends Error{constructor(e,t){super(e),this.code=t,this.error=e}}const Eo="X-JWT";let ko;const Oo=(e="")=>{const t=(t,n,r={},o)=>function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function*(){var i;const s=new URLSearchParams(Object.assign({site:po},r)),a=`${e}${n}?${s}`,l={},c={method:t};ko&&(l["X-JWT"]=ko),l["X-XSRF-TOKEN"]=function(e){const t=document.cookie.match(new RegExp(`(?:^|; )${"XSRF-TOKEN".replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")}=([^;]*)`));return t?decodeURIComponent(t[1]):void 0}()||"",o instanceof FormData?c.body=o:"object"==typeof o&&null!==o?(l["Content-Type"]="application/json",c.body=JSON.stringify(o)):c.body=o;try{const e=yield fetch(a,Object.assign(Object.assign({},c),{headers:l})),t=e.headers.has("date")&&e.headers.get("date")||"",n=isNaN(Date.parse(t))?0:Date.parse(t),r=((new Date).getTime()-n)/1e3;if(yo.serverClientTimeDiff=r,e.headers.has(Eo)&&(ko=e.headers.get(Eo)),[401,403].includes(e.status)&&(ko=void 0),e.status>=400){if(Mo.has(e.status)){const t=Mo.get(e.status)||wo.unexpectedError;throw new xo(t.defaultMessage,e.status)}return e.text().then((e=>{let t;try{t=JSON.parse(e)}catch(e){throw new xo(wo.unexpectedError.defaultMessage,0)}throw t}))}return 0===(null===(i=e.headers.get("Content-Type"))||void 0===i?void 0:i.indexOf("application/json"))?e.json():e.text()}catch(e){if("Failed to fetch"===(null==e?void 0:e.message))throw new xo(e.message,-2);throw e}}));return{get:(e,n,r)=>t("get",e,n,r),put:(e,n,r)=>t("put",e,n,r),post:(e,n,r)=>t("post",e,n,r),delete:(e,n,r)=>t("delete",e,n,r)}},No=Oo(`${eo}/api/v1`),jo=Oo(`${eo}/auth`),Ao=Oo(`${eo}/api/v1/admin`),Co=e=>No.post("/preview",{},{text:e}),Io=()=>No.get("/user").catch((()=>null)),Lo=e=>{const t=new FormData;return t.append("file",e),No.post("/picture",{},t).then((t=>({name:e.name,size:e.size,type:e.type,url:`${eo+to}/picture/${t.id}`})))};function Do(e){return function(e){const t=new Date;switch(e){case"permanently":return t.setFullYear(t.getFullYear()+100),t;case"43200m":return t.setMonth(t.getMonth()+1),t;case"10080m":return t.setDate(t.getDate()+7),t;case"1440m":return t.setDate(t.getDate()+1),t;default:throw new Error("unknown block ttl")}}(e).toISOString()}const To="remark42: localStorage access denied, check browser preferences",Po=co?localStorage.setItem.bind(localStorage):()=>{console.error(To)},Ro=co?localStorage.getItem.bind(localStorage):()=>(console.error(To),null);function Uo(e){try{const t=Ro(e);return null===t?null:JSON.parse(t)}catch(t){return console.error(`remark42: error on read JSON from ${e} in localStorage`,t),null}}function Fo(e,t){try{Po(e,JSON.stringify(t))}catch(t){console.error(`remark42: error on parse JSON from ${e} in localStorage`,t)}}function zo(e,t){const n=Uo(e);if(Array.isArray(t)&&Array.isArray(n))Fo(e,[...n,...t]);else if(null===t||"object"!=typeof t){if("function"!=typeof t)throw new Error(`remark42: error on update JSON for ${e} in localStorage`);Fo(e,t(n))}else Fo(e,Object.assign(Object.assign({},n),t))}function Bo(){try{const e=JSON.parse(Ro(oo)||"{}");if("object"==typeof e&&null!==e&&!Array.isArray(e))return e}catch(e){console.error("incorrect hidden user data in local storage",e)}return{}}co&&localStorage.removeItem.bind(localStorage);const Ho="USER/SET",$o="USER/BANLIST_SET",Vo="USER/BAN",Wo="USER/UNBAN",Zo="USER/HIDELIST_SET",Go="USER/HIDE",Yo="USER/UNHIDE",qo="USER_SUBSCRIPTION/SET";var Qo;!function(e){e[e.None=0]="None",e[e.Reply=1]="Reply",e[e.Edit=2]="Edit"}(Qo||(Qo={}));const Jo="POST_INFO/SET";function Ko(e){return{type:Jo,info:e}}function Xo(e,t){let n=!1;const r=e.reduce(((e,r)=>{if(!t(r))return n=!0,e;const o=r.replies?Object.assign(Object.assign({},r),{replies:Xo(r.replies,t)}):r;return o!==r&&(n=!0),e.push(o),e}),[]);return n?r:e}function ei(e){let t=[];return e.comment.pin&&(t=t.concat(e.comment)),e.replies&&(t=t.concat(e.replies.reduce(((e,t)=>e.concat(ei(t))),[]))),t}function ti(e){return e.reduce(((e,t)=>e.concat(ei(t))),[])}const ni="COMMENTS/SET",ri="COMMENTS/APPEND",oi="COMMENTS/EDIT",ii="COMMENTS/PATCH",si="COMMENT_MODE/SET",ai="COMMENTS/FETCHING",li="COMMENTS/FETCHING_SUCCESS",ci="COMMENTS/SET_SORT";var ui=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const di=(e,t,n)=>r=>ui(void 0,void 0,void 0,(function*(){const o=yield(({title:e,text:t,pid:n})=>No.post("/comment",{},Object.assign({title:e,text:t,locator:{site:po,url:go}},n?{pid:n}:{})))({text:e,title:t,pid:n});r({type:ri,pid:n||null,comment:o})})),mi=(e,t)=>n=>ui(void 0,void 0,void 0,(function*(){const r=yield(({text:e,id:t})=>No.put(`/comment/${t}`,{url:go},{text:e}))({id:e,text:t});n({type:oi,comment:r})})),fi=e=>(t,n)=>ui(void 0,void 0,void 0,(function*(){const{hiddenUsers:r,comments:o}=n(),i=Object.keys(r);t({type:ai});const s=yield(e=>No.get("/find",{url:go,sort:e,format:"tree"}))(e||o.sort);return t({type:li}),i.length>0&&(s.comments=Xo(s.comments,(e=>-1===i.indexOf(e.comment.user.id)))),t((e=>t=>{t({type:ni,comments:e})})(s.comments)),t(Ko(s.info)),s}));function pi(e=null){return{type:si,mode:e}}var hi=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};function gi(e=null){return{type:Ho,user:e}}const vi=(e,t,n)=>r=>hi(void 0,void 0,void 0,(function*(){yield((e,t)=>Ao.put(`/user/${e}`,{block:1,ttl:"permanently"===t?t:void 0}))(e,n),r({type:Vo,user:{id:e,name:t,time:Do(n)}})})),yi=e=>(t,n)=>hi(void 0,void 0,void 0,(function*(){yield(e=>Ao.put(`/user/${e}`,{block:0}))(e),t({type:Wo,id:e});const r=Object.values(n().comments.allComments),o=r.filter((t=>t.user.id===e));if(!o.length)return;const i=r[0].user;t({type:ii,ids:o.map((e=>e.id)),patch:{user:Object.assign(Object.assign({},i),{block:!1})}})})),_i=()=>e=>{const t=Bo();e({type:Zo,payload:t})},bi=e=>(t,n)=>{const r=Bo();r[e.id]=e,Po(oo,JSON.stringify(r));const o=Object.values(n().comments.allComments).filter((t=>t.user.id===e.id)).map((e=>e.id));t({type:Go,user:e}),t({type:ii,ids:o,patch:{hidden:!0}})},wi=e=>({type:qo,payload:e}),Mi="THEME/SET";function Si(){return(Si=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const xi=Te(((e,t)=>{var{children:n,theme:r,mods:o,mix:i,kind:s,type:a="button",size:l}=e,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["children","theme","mods","mix","kind","type","size"]);return v("button",Si({className:Zr()("button",{mods:{kind:s,size:l,theme:r},mix:i},Object.assign({},o)),type:a},c,{ref:t}),n)})),Ei=({mix:e})=>v("div",{className:Zr()("preloader",{mix:e})});function ki(){return(ki=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Oi=e=>e.theme,Ni=e=>Object.assign({role:"button",onClick:e,onKeyPress:t=>((e,t)=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),t&&t(e))})(t,e)},e?{tabIndex:0}:{});function ji(){return(ji=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Ai={id:"settings.block-user",defaultMessage:"Do you want to block {userName}?"},Ci={id:"settings.unblock-user",defaultMessage:"Do you want to unblock {userName}?"},Ii={id:"settings.hidden-users-title",defaultMessage:"Hidden users"},Li={id:"settings.blocked-users-title",defaultMessage:"Blocked users"},Di=(new Date).getFullYear();function Ti({time:e}){const t=Jr();return e.getFullYear()-Di>=50?v(Qr,{id:"settings.permanently",defaultMessage:"permanently"}):v(Qr,{id:"settings.block-time",defaultMessage:"until {day} at {time}",values:{day:t.formatDate(e),time:t.formatTime(e)}})}const Pi=function(e){const t=t=>{const n=Ft(Oi);return v(e,ki({theme:n},t))};return t.displayName=`withTheme(${e.displayName||e.name})`,t}(class extends w{constructor(e){super(e),this.block=e=>{window.confirm(this.props.intl.formatMessage(Ai,{userName:e.name}))&&(this.setState({unblockedUsers:this.state.unblockedUsers.filter((t=>t!==e.id))}),this.props.blockUser(e.id,e.name,"permanently"))},this.unblock=e=>{window.confirm(this.props.intl.formatMessage(Ci,{userName:e.name}))&&(this.setState({unblockedUsers:this.state.unblockedUsers.concat([e.id])}),this.props.unblockUser(e.id),this.props.onUnblockSomeone())},this.hide=e=>{this.setState({unhiddenUsers:this.state.unhiddenUsers.filter((t=>t!==e.id))}),this.props.hideUser(e)},this.unhide=e=>{this.setState({unhiddenUsers:this.state.unhiddenUsers.concat([e.id])}),this.props.unhideUser(e.id),this.props.onUnblockSomeone()},this.__isUserHidden=e=>-1===this.state.unhiddenUsers.indexOf(e.id),this.state={blockedUsers:e.blockedUsers.slice(),unblockedUsers:[],hiddenUsers:Object.assign({},e.hiddenUsers),unhiddenUsers:[]}}render({user:e,theme:t},{blockedUsers:n,unblockedUsers:r,unhiddenUsers:o}){const i=Object.values(this.state.hiddenUsers),s=this.props.intl;return v("div",{className:Zr()("settings",{},{theme:t})},v("div",{className:"settings__section settings__hidden-users",role:"region","aria-label":s.formatMessage(Ii)},v("h3",null,v(Qr,{id:"settings.hidden-user-header",defaultMessage:"Hidden users:"})),!i.length&&v("h4",{className:"settings__dimmed"},v(Qr,{id:"settings.no-hidden-users",defaultMessage:"There are no hidden users."})),!!i.length&&v("ul",{className:"settings__list"},i.map((e=>v("li",{className:"settings__list-item"},v("span",{className:["settings__username",o.includes(e.id)?"settings__invisible":null].join(" "),title:e.id},e.name?e.name:v(Qr,{id:"settings.unknown",defaultMessage:"unknown"})),this.__isUserHidden(e)?v("span",ji({className:"settings__action"},Ni((()=>this.unhide(e)))),v(Qr,{id:"settings.show",defaultMessage:"show"})):v("span",ji({className:"settings__action"},Ni((()=>this.hide(e)))),v(Qr,{id:"settings.hide",defaultMessage:"hide"})),v("div",null,v("span",{className:"settings__user-id"},"id: ",v("span",null,e.id)))))))),e&&e.admin&&v("div",{className:"settings__section settings__blocked-users",role:"region","aria-label":s.formatMessage(Li)},v("h3",null,v(Qr,{id:"settings.blocked-users-header",defaultMessage:"Blocked users:"})),!n.length&&v("h4",{className:"settings__dimmed"},v(Qr,{id:"settings.no-blocked-users",defaultMessage:"There are no blocked users."})),!!n.length&&v("ul",{className:"settings__list settings__blocked-users-list"},n.map((e=>{const t=r.includes(e.id);return v("li",{className:"settings__list-item"},v("span",{className:["settings__username",t?"settings__invisible":null].join(" "),title:e.id},e.name?e.name:v(Qr,{id:"settings.unknown",defaultMessage:"unknown"})),v("span",{className:"settings__blocked-users-user-block-ttl"}," ",v(Ti,{time:new Date(e.time)})),t&&v("span",ji({},Ni((()=>this.block(e))),{className:"settings__action"}),v(Qr,{id:"settings.block",defaultMessage:"block"})),!t&&v("span",ji({},Ni((()=>this.unblock(e))),{className:"settings__action"}),v(Qr,{id:"settings.unblock",defaultMessage:"unblock"})),v("div",null,v("span",{className:"settings__user-id"},"id: ",v("span",null,e.id))))})))))}});function Ri(){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const e=yield No.post("/deleteme"),t=yo.config.admin_email,{subject:n,message:r}=function(e,t,n){return{subject:encodeURIComponent("Request to delete user's information"),message:encodeURIComponent(`Request to delete all information about ${e} from remark42 on ${t}\n\n[you can provide the reason for removal request, optional]\n\n=== DO NOT REMOVE THE TEXT BELOW THIS LINE ===\n\nsite: ${t}\nuser: ${e}\nlink: ${n}\n`).replace("%0A","%0D%0A")}}(e.user_id,po,e.link);window.location.href=`mailto:${t}?subject=${n}&body=${r}`}))}function Ui(e){return!(!window.parent||window.parent===window||(window.parent.postMessage(JSON.stringify(e),"*"),0))}function Fi(e=1e3){return new Promise((t=>setTimeout(t,e)))}var zi=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class Bi extends w{constructor(e){super(e),this.rootNode={current:null},this.storedDocumentHeight=null,this.storedDocumentHeightSet=!1,this.checkInterval=void 0,this.onTitleClick=()=>{const e=!this.state.isActive,t=e?this.state.contentTranslateX:0;this.setState({contentTranslateX:t,isActive:e},(()=>zi(this,void 0,void 0,(function*(){yield this.__adjustDropDownContent(),e?(this.__onOpen(),this.props.onOpen&&this.props.onOpen(this.rootNode.current)):(this.__onClose(),this.props.onClose&&this.props.onClose(this.rootNode.current)),this.props.onTitleClick&&this.props.onTitleClick()}))))},this.state={isActive:e.isActive||!1,contentTranslateX:0},this.onOutsideClick=this.onOutsideClick.bind(this),this.receiveMessage=this.receiveMessage.bind(this),this.__onOpen=this.__onOpen.bind(this),this.__onClose=this.__onClose.bind(this)}__onOpen(){if((()=>{if(!this.rootNode.current)return!1;let e=this.rootNode.current.parentElement;for(;e!==document.body;){if(e.classList.contains("dropdown"))return!0;e=e.parentElement}return!1})())return;this.storedDocumentHeight=document.body.style.minHeight,this.storedDocumentHeightSet=!0;let e=null;this.checkInterval=window.setInterval((()=>{if(!this.rootNode.current||!this.state.isActive)return;const t=window.innerHeight,n=(()=>{const e=Array.from(this.rootNode.current.children).find((e=>e.classList.contains("dropdown__content")));if(!e)return 0;const t=e.getBoundingClientRect();return window.scrollY+Math.abs(t.top)+e.scrollHeight+10})();null===e&&n<=t||n!==e&&(e=n,document.body.style.minHeight=`${n}px`)}),100)}__onClose(){window.clearInterval(this.checkInterval),this.storedDocumentHeightSet&&(document.body.style.minHeight="string"==typeof this.storedDocumentHeight?this.storedDocumentHeight:"")}__adjustDropDownContent(){return zi(this,void 0,void 0,(function*(){if(!this.rootNode.current)return;const e=this.rootNode.current.querySelector(".dropdown__content");if(!e)return;yield Fi(0);const t=e.getBoundingClientRect();if(t.left>0){const e=window.innerWidth;if(t.right<=e)return;const n=t.right-e,r=Math.min(t.left,n);this.setState({contentTranslateX:-r})}else this.setState({contentTranslateX:-t.left})}))}receiveMessage(e){try{if(!("string"==typeof e.data?JSON.parse(e.data):e.data).clickOutside)return;if(!this.state.isActive)return;this.setState({contentTranslateX:0,isActive:!1},(()=>{this.__onClose(),this.props.onClose&&this.props.onClose(this.rootNode.current)}))}catch(e){}}onOutsideClick(e){this.rootNode.current&&!this.rootNode.current.contains(e.target)&&this.state.isActive&&this.setState({contentTranslateX:0,isActive:!1},(()=>{this.__onClose(),this.props.onClose&&this.props.onClose(this.rootNode.current)}))}componentDidMount(){document.addEventListener("click",this.onOutsideClick),window.addEventListener("message",this.receiveMessage)}componentWillUnmount(){document.removeEventListener("click",this.onOutsideClick),window.removeEventListener("message",this.receiveMessage)}render({title:e,titleClass:t="",heading:n,children:r,mix:o,theme:i,disabled:s,buttonTitle:a},{isActive:l}){return v("div",{className:Zr()("dropdown",{mix:o},{theme:i,active:l}),ref:this.rootNode},v(xi,{"aria-haspopup":"listbox","aria-expanded":l&&"true",onClick:this.onTitleClick,theme:i,mix:["dropdown__title",t],kind:"link",disabled:s,title:a},e),l&&v("div",{className:"dropdown__content",tabIndex:-1,role:"listbox",style:{transform:`translateX(${this.state.contentTranslateX}px)`}},n&&v("div",{className:"dropdown__heading"},n),v("div",{className:"dropdown__items"},r)))}}const Hi=({children:e,separator:t=!1})=>v("div",{className:Zr()("dropdown__item",{},{separator:t})},e);var $i=s(166),Vi=s.n($i);function Wi(){return(Wi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Zi=Vi().bind({input:"input-module__input_f6995",invalid:"input-module__invalid_820e2"}),Gi=e=>{var{children:t,className:n,type:r="text",invalid:o}=e,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["children","className","type","invalid"]);return v("input",Wi({className:Zi(n,"input",{invalid:o}),type:r},i),t)};function Yi(){return(Yi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qi(e){e.style.height="",e.style.height=`${e.scrollHeight}px`}const Qi=Te(((e,t)=>{var{onInput:n,value:r}=e,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["onInput","value"]);const i=ge(),s=t||i;return pe((()=>{qi(s.current)}),[r,s]),v("textarea",Yi({},o,{onInput:e=>{if(n)return n.call(s.current,e);qi(s.current)},value:r,ref:s}))})),Ji={button:"button-module__button_b7044",suffix:"button-module__suffix_6ab7b",selected:"button-module__selected_d2395",small:"button-module__small_5332d",transparent:"button-module__transparent_6d4a4"};function Ki(){return(Ki=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Xi=Vi().bind(Ji),es=e=>{var{children:t,size:n,kind:r,suffix:o,selected:i,className:s}=e,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["children","size","kind","suffix","selected","className"]);return v("button",Ki({className:Xi(s,Ji.button,r,n,{selected:i})},a),t,o&&v("div",{className:Ji.suffix},o))};function ts(){return Ft((({theme:e})=>e))}const ns={signin:{id:"auth.signin",defaultMessage:"Sign In"},or:{id:"auth.or",defaultMessage:"or"},username:{id:"auth.username",defaultMessage:"Username"},usernameRestriction:{id:"auth.symbols-restriction",defaultMessage:"Username must contain only letters, numbers, underscores or spaces"},userNotFound:{id:"auth.user-not-found",defaultMessage:"No user was found"},emailAddress:{id:"auth.email-address",defaultMessage:"Email Address"},token:{id:"token",defaultMessage:"Token"},expiredToken:{id:"token.expired",defaultMessage:"Token is expired"},invalidToken:{id:"token.invalid",defaultMessage:"Token is invalid"},oauthSource:{id:"auth.oauth-source",defaultMessage:"Use Social Network"},oauthTitle:{id:"auth.oauth-button",defaultMessage:"Sign In with {provider}"},back:{id:"auth.back",defaultMessage:"Back"},loading:{id:"auth.loading",defaultMessage:"Loading..."},submit:{id:"auth.submit",defaultMessage:"Submit"}},rs={facebook:s(881).Z,twitter:s(856).Z,google:s(16).Z,microsoft:s(999).Z,yandex:s(672).Z,dev:s(386).Z,github:{name:"GitHub",icons:{light:s(171).Z,dark:s(953).Z}}},os=Object.keys(rs);let is,ss=!1,as=null;function ls(e){return as=window.open(e),ss?Promise.resolve(null):new Promise(((e,t)=>{function n(){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){if(!document.hasFocus()||document.hidden||!(null==as?void 0:as.closed))return;const t=yield Io();if(clearTimeout(is),null===t)return is=setTimeout((()=>{n()}),6e4),null;e(t),document.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n),ss=!1,clearTimeout(is)}))}setTimeout((()=>{t()}),3e5),document.addEventListener("visibilitychange",n),window.addEventListener("focus",n)}))}const cs={root:"oauth-module__root_c133c",item:"oauth-module__item_3b36c",button:"oauth-module__button_0d123",name:"oauth-module__name_6508a",full:"oauth-module__full_c65e3"};const us=encodeURIComponent(`${window.location.origin}${window.location.pathname}?selfClose`);function ds({providers:e}){const t=Jr(),n=Pt(),r=ts(),o=2===(i=e.length)?"name":1===i?"full":"icon";var i;const s=e=>function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const{href:t}=e.currentTarget;e.preventDefault();const r=yield ls(t);null!==r&&n(gi(r))}));return v("ul",{className:Xr()("oauth",cs.root)},e.map((e=>{const{name:n,icon:i}=function(e,t){const n=rs[e];return"string"!=typeof n?{name:n.name,icon:n.icons[t]}:{name:(r=e,`${r.charAt(0).toLocaleUpperCase()}${r.slice(1)}`),icon:n};var r}(e,r);return v("li",{className:Xr()("oauth-item",cs.item)},v("a",{target:"_blank",rel:"noopener noreferrer",href:`${eo}/auth/${e}/login?from=${us}&site=${po}`,onClick:s,className:Xr()("oauth-button",cs.button,cs[o],cs[e]),"data-provider-name":n,title:t.formatMessage(ns.oauthTitle,{provider:n})},v("img",{className:"oauth-icon",src:i,width:"20",height:"20",alt:"","aria-hidden":!0})))})))}function ms(e){const{top:t}=e.getBoundingClientRect(),n=window.scrollY+Math.abs(t)+e.scrollHeight+20;window.innerHeight>n||document.body.style.setProperty("min-height",`${n}px`)}function fs(e){const{exp:t}=function(e){const[,t]=e.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(n).split("").map((e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`)).join(""));return JSON.parse(r)}(e);return 1e3*t<Date.now()}const ps="/email/login",hs={root:"auth-module__root_641f4",buttonArrow:"auth-module__buttonArrow_4970d",dropdown:"auth-module__dropdown_cf466",title:"auth-module__title_f76db",divider:"auth-module__divider_1fe73",tabs:"auth-module__tabs_c4203",provider:"auth-module__provider_89bc0",radio:"auth-module__radio_02e79",row:"auth-module__row_1b3b9",backButton:"auth-module__backButton_566bb",backButtonArrow:"auth-module__backButtonArrow_112cc",closeButton:"auth-module__closeButton_e4d03",textarea:"auth-module__textarea_c3818 input-module__input_f6995",honeypot:"auth-module__honeypot_7ea53",submit:"auth-module__submit_da776",spinner:"auth-module__spinner_5cdf3",spin:"auth-module__spin_ab592",error:"auth-module__error_76b4a"};function gs(){const e=Jr(),t=Pt(),[n,r]=function(){const e=[],t=[];return yo.config.auth_providers.forEach((n=>{os.includes(n)?e.push(n):t.push(n)})),[e,t]}(),[o,i]=me(!1),[s,a]=me(r[0]),[l,c,u]=function(e){const t=ge(null),[n,r]=me(!1);return pe((()=>{if(!n)return;const o=t.current;function i(t){if("string"==typeof t.data&&!e)try{if(!JSON.parse(t.data).clickOutside)return;r(!1)}catch(e){}}function s(t){e||(null==o?void 0:o.contains(t.target))||r(!1)}return ms(o),document.addEventListener("click",s),window.addEventListener("message",i),()=>{document.removeEventListener("click",s),window.removeEventListener("message",i)}}),[n,e]),pe((()=>{const e=t.current;if(!e||!n)return;const r=new MutationObserver((()=>{ms(e)}));return r.observe(e,{attributes:!0,childList:!0,subtree:!0}),()=>{document.body.style.removeProperty("min-height"),r.disconnect()}}),[n]),[t,n,()=>{r((e=>!e))}]}("token"===s),[d,m]=me(null);function f(e){const{value:t}=e.currentTarget;m(null),a(t)}const p=n.length>0,h=r.length>0,g=null!==d&&ns[d]?e.formatMessage(ns[d]):d,y="token"===s,_=v(b,null,g&&v("div",{className:Xr()("auth-error",hs.error)},g),v(es,{className:"auth-submit",type:"submit",disabled:o},o?v("div",{className:Xr()("spinner",hs.spinner),role:"presentation","aria-label":e.formatMessage(ns.loading)}):e.formatMessage(ns.submit)));return v("div",{className:Xr()("auth",hs.root)},v(es,{className:"auth-button",selected:c,onClick:function(e){e.preventDefault(),u()},suffix:v("svg",{width:"14",height:"14",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v("path",{d:"M6 11.5L14.5 19L22 11",stroke:"currentColor","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}))},e.formatMessage(ns.signin)),c&&v("div",{className:Xr()("auth-dropdown",hs.dropdown),ref:l},v("form",{className:Xr()("auth-form",hs.form),onSubmit:function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const n=new FormData(e.target);e.preventDefault(),i(!0),m(null);try{switch(s){case"anonymous":{const e=n.get("username"),r=yield function(e){return jo.get("/anonymous/login",{user:e,aud:po})}(e);t(gi(r));break}case"email":{const e=n.get("email"),t=n.get("username");yield function(e,t){return jo.get(ps,{address:e,user:t})}(e,t),a("token");break}case"token":{const e=n.get("token"),r=function(e){try{if(fs(e))return"expiredToken"}catch(e){return"invalidToken"}return null}(e);if(r)m(r);else{const n=yield function(e){return jo.get(ps,{token:e})}(e);t(gi(n))}break}}}catch(e){m(e.message||e.error)}i(!1)}))}},y?v(b,null,v("div",{className:Xr()("auth-row",hs.row)},v("div",{className:hs.backButton},v(es,{className:"auth-back-button",size:"small",kind:"transparent",onClick:function(e){e.preventDefault(),a("email")}},v("svg",{className:hs.backButtonArrow,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v("path",{d:"M8.75 3L5 7.25L9 11",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})),e.formatMessage(ns.back))),v("button",{className:Xr()("auth-close-button",hs.closeButton),title:"Close sign-in dropdown",onClick:function(e){e.preventDefault(),a(r[0]),u()}},v("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v("path",{d:"M2 2L12 12M12 2L2 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})))),v("div",{className:Xr()("auth-row",hs.row)},v(Qi,{name:"token",className:Xr()("auth-token-textatea",hs.textarea),placeholder:e.formatMessage(ns.token),disabled:o})),_):v(b,null,p&&v(b,null,v("h5",{className:Xr()("auth-form-title",hs.title)},e.formatMessage(ns.oauthSource)),v(ds,{providers:n})),p&&h&&v("div",{className:Xr()("auth-divider",hs.divider),title:e.formatMessage(ns.or)}),h&&v(b,null,1===r.length?v("h5",{className:Xr()("auth-form-title",hs.title)},r[0]):v("div",{className:Xr()("auth-tabs",hs.tabs)},r.map((e=>v(b,{key:e},v("input",{className:hs.radio,type:"radio",id:`form-provider-${e}`,name:"form-provider",value:e,onChange:f,checked:e===s}),v("label",{className:Xr()("auth-tabs-item",hs.provider),htmlFor:`form-provider-${e}`},e.slice(0,6)))))),v("div",{className:Xr()("auth-row",hs.row)},v(Gi,{className:"auth-input-username",required:!0,name:"username",minLength:3,pattern:"[\\p{L}\\d\\s_]+",title:e.formatMessage(ns.usernameRestriction),placeholder:e.formatMessage(ns.username),disabled:o,onBlur:e=>{const t=e.target;t.value=t.value.trim()}})),"email"===s&&v("div",{className:Xr()("auth-row",hs.row)},v(Gi,{className:"auth-input-email",required:!0,name:"email",type:"email",placeholder:e.formatMessage(ns.emailAddress),disabled:o})),v("input",{className:hs.honeypot,type:"checkbox",tabIndex:-1,autoComplete:"off"}),_)))))}function vs(){return(vs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class ys extends w{constructor(){super(...arguments),this.state={isBlockedVisible:!1,anonymousUsernameInputValue:"anon",sortSelectFocused:!1},this.onSortChange=e=>{const{value:t}=e.target;this.props.onSortChange(t)},this.onSortFocus=()=>{this.setState({sortSelectFocused:!0})},this.onSortBlur=e=>{this.setState({sortSelectFocused:!1}),this.onSortChange(e)},this.toggleBlockedVisibility=()=>{this.state.isBlockedVisible?this.props.onBlockedUsersHide&&this.props.onBlockedUsersHide():this.props.onBlockedUsersShow&&this.props.onBlockedUsersShow(),this.setState({isBlockedVisible:!this.state.isBlockedVisible})},this.toggleCommentsAvailability=()=>{this.props.onCommentsChangeReadOnlyMode(!this.props.isCommentsDisabled)},this.toggleUserInfoVisibility=()=>{const{user:e}=this.props;window.parent&&e&&Ui({isUserInfoShown:!0,user:e})},this.renderAuthorized=e=>{const{onSignOut:t,theme:n}=this.props,r=e&&"anonymous_"===e.id.substr(0,10);return v(b,null,v(Qr,{id:"authPanel.logged-as",defaultMessage:"You logged in as"})," ",v(Bi,{title:e.name,titleClass:"auth-panel__user-dropdown-title",theme:n},v(Hi,{separator:!r},v("div",vs({id:e.id,className:Zr()("auth-panel__user-id",{},{theme:n})},Ni(this.toggleUserInfoVisibility)),e.id)),!r&&v(Hi,null,v(xi,{theme:n,onClick:()=>Ri().then(t)},v(Qr,{id:"authPanel.request-to-delete-data",defaultMessage:"Request my data removal"}))))," ",v(xi,{kind:"link",theme:n,onClick:t},v(Qr,{id:"authPanel.logout",defaultMessage:"Logout?"})))},this.renderThirdPartyWarning=()=>co||!uo?null:v("div",{className:"auth-panel__column"},v(Qr,{id:"authPanel.disabled-cookies",defaultMessage:"Disable third-party cookies blocking to login or open comments in"})," ",v("a",{className:"auth-panel__pseudo-link",href:`${window.location.origin}/web/comments.html${window.location.search}`,target:"_blank",rel:"noreferrer"},v(Qr,{id:"authPanel.new-page",defaultMessage:"new page"}))),this.renderCookiesWarning=()=>co||uo?null:v("div",{className:"auth-panel__column"},v(Qr,{id:"authPanel.enable-cookies",defaultMessage:"Allow cookies to login and comment"})),this.renderSettingsLabel=()=>v(xi,vs({kind:"link",mix:"auth-panel__admin-action"},Ni(this.toggleBlockedVisibility),{role:"link"}),this.state.isBlockedVisible?v(Qr,{id:"authPanel.hide-settings",defaultMessage:"Hide settings"}):v(Qr,{id:"authPanel.show-settings",defaultMessage:"Show settings"})),this.renderReadOnlySwitch=()=>{const{isCommentsDisabled:e}=this.props;return v(xi,vs({kind:"link",mix:"auth-panel__admin-action"},Ni(this.toggleCommentsAvailability),{role:"link"}),v(Qr,e?{id:"authPanel.enable-comments",defaultMessage:"Enable comments"}:{id:"authPanel.disable-comments",defaultMessage:"Disable comments"}))},this.renderSort=()=>{const{sort:e}=this.props,{sortSelectFocused:t}=this.state,n=(r=e,[{value:"-score",label:(o=this.props.intl).formatMessage(_s.best)},{value:"+score",label:o.formatMessage(_s.worst)},{value:"-time",label:o.formatMessage(_s.newest)},{value:"+time",label:o.formatMessage(_s.oldest)},{value:"-active",label:o.formatMessage(_s.recentlyUpdated)},{value:"+active",label:o.formatMessage(_s.leastRecentlyUpdated)},{value:"-controversy",label:o.formatMessage(_s.mostControversial)},{value:"+controversy",label:o.formatMessage(_s.leastControversial)}].map((e=>(e.value===r&&(e.selected=!0),e))));var r,o;return v("span",{className:"auth-panel__sort"},v(Qr,{id:"commentSort.sort-by",defaultMessage:"Sort by"})," ",v("span",{className:"auth-panel__select-label"},v("span",{className:Zr()("auth-panel__select-label-value",{},{focused:t})},n.find((e=>"selected"in e&&e.selected)).label),v("select",{className:"auth-panel__select",onChange:this.onSortChange,onFocus:this.onSortFocus,onBlur:this.onSortBlur},n.map((e=>v("option",{value:e.value,selected:e.selected},e.label))))))}}render({user:e,postInfo:t,theme:n},{isBlockedVisible:r}){const{read_only:o}=t,i=e&&e.admin,s=Object.keys(this.props.hiddenUsers).length>0||i||r;return v("div",{className:Zr()("auth-panel",{},{theme:n,loggedIn:!!e})},v("div",{className:"auth-panel__column"},e?this.renderAuthorized(e):o&&v(gs,null)),this.renderThirdPartyWarning(),this.renderCookiesWarning(),v("div",{className:"auth-panel__column"},s&&this.renderSettingsLabel(),s&&" • ",i&&this.renderReadOnlySwitch(),i&&" • ",!i&&o&&v("span",{className:"auth-panel__readonly-label"},v(Qr,{id:"authPanel.read-only",defaultMessage:"Read-only"})),this.renderSort()))}}const _s={best:{id:"commentsSort.best",defaultMessage:"Best"},worst:{id:"commentsSort.worst",defaultMessage:"Worst"},newest:{id:"commentsSort.newest",defaultMessage:"Newest"},oldest:{id:"commentsSort.oldest",defaultMessage:"Oldest"},recentlyUpdated:{id:"commentsSort.recently-updated",defaultMessage:"Recently updated"},leastRecentlyUpdated:{id:"commentsSort.least-recently-updated",defaultMessage:"Least recently updated"},mostControversial:{id:"commentsSort.most-controversial",defaultMessage:"Most controversial"},leastControversial:{id:"commentsSort.least-controversial",defaultMessage:"Least controversial"}};function bs(e){const t=Jr(),n=ts(),r=Ft((e=>e.comments.sort));return v(ys,vs({intl:t,theme:n,sort:r},e))}function ws(e){return null===e||"anonymous_"===e.id.substr(0,10)}function Ms(e,t,n){return e.substr(0,t[0])+n+e.substr(t[1])}function Ss(){return(Ss=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var xs=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const Es=/[^@]+@[^.]+\..+/;var ks;!function(e){e[e.Email=0]="Email",e[e.Token=1]="Token",e[e.Final=2]="Final",e[e.Close=3]="Close",e[e.Subscribed=4]="Subscribed",e[e.Unsubscribed=5]="Unsubscribed"}(ks||(ks={}));const Os={token:{id:"token",defaultMessage:"Token"},expiredToken:{id:"token.expired",defaultMessage:"Token is expired"},haveSubscribed:{id:"subscribeByEmail.have-been-subscribed",defaultMessage:"You have been subscribed on updates by email"},subscribed:{id:"subscribeByEmail.subscribed",defaultMessage:"You are subscribed on updates by email"},submit:{id:"subscribeByEmail.submit",defaultMessage:"Submit"},subscribe:{id:"subscribeByEmail.subscribe",defaultMessage:"Subscribe"},subscribeByEmail:{id:"subscribeByEmail.subscribe-by-email",defaultMessage:"Subscribe by Email"},onlyRegisteredUsers:{id:"subscribeByEmail.only-registered-users",defaultMessage:"Available only for registered users"},email:{id:"subscribeByEmail.email",defaultMessage:"Email"}},Ns=()=>{const e=ts(),t=Pt(),n=Jr(),r=Ft((({user:e})=>null!==e&&Boolean(e.email_subscription))),o=ge(null),[i,s]=me(r?ks.Subscribed:ks.Email),[a,l]=me(""),[c,u]=me(localStorage.getItem(so)||""),[d,m]=me(!1),[f,p]=me(null),h=_e(((e=a)=>xs(void 0,void 0,void 0,(function*(){m(!0),p(null);try{switch(i){case ks.Email:yield(e=>No.post("/email/subscribe",{address:e}))(c),l(""),s(ks.Token);break;case ks.Token:yield(e=>No.post("/email/confirm",{tkn:e}))(e),t(wi(!0)),o.current=ks.Token,s(ks.Subscribed)}}catch(e){p(So(e,n))}finally{m(!1)}}))),[m,p,s,i,c,a,t,n]),g=_e((e=>{const{value:t}=e.target;e.preventDefault(),p(null),u(t)}),[]),y=_e((e=>{const{value:t}=e.target;e.preventDefault(),p(null);try{t.length>0&&fs(t)?p(n.formatMessage(Os.expiredToken)):h(t)}catch(e){}l(t)}),[h,p,l,n]),_=_e((e=>xs(void 0,void 0,void 0,(function*(){e.preventDefault(),h()}))),[h]),w=Es.test(c),M=_e((()=>xs(void 0,void 0,void 0,(function*(){yield Fi(0),p(null),s(ks.Email)}))),[s]),S=_e((()=>xs(void 0,void 0,void 0,(function*(){m(!0);try{yield No.delete("/email"),t(wi(!1)),o.current=ks.Subscribed,s(ks.Unsubscribed)}catch(e){p(So(e,n))}finally{m(!1)}}))),[m,s,p,t,n]);if(i===ks.Close)return null;if(i===ks.Subscribed){const t=o.current===ks.Token?n.formatMessage(Os.haveSubscribed):n.formatMessage(Os.subscribed);return v("div",{className:Zr()("comment-form__subscribe-by-email",{mods:{subscribed:!0}})},t,v(xi,{kind:"primary",size:"middle",mix:"comment-form__subscribe-by-email__button",theme:e,onClick:S},v(Qr,{id:"subscribeByEmail.unsubscribe",defaultMessage:"Unsubscribe"})))}if(i===ks.Unsubscribed)return v("div",{className:Zr()("comment-form__subscribe-by-email",{mods:{unsubscribed:!0}})},v(Qr,{id:"subscribeByEmail.have-been-unsubscribed",defaultMessage:"You have been unsubscribed by email to updates"}),v(xi,{kind:"primary",size:"middle",mix:"comment-form__subscribe-by-email__button",theme:e,onClick:()=>s(ks.Close)},v(Qr,{id:"subscribeByEmail.close",defaultMessage:"Close"})));const x=i===ks.Email?n.formatMessage(Os.submit):n.formatMessage(Os.subscribe);return v("form",{className:Zr()("comment-form__subscribe-by-email",{},{theme:e}),onSubmit:_},i===ks.Email&&((e,t,n,r)=>v(b,null,v("div",{className:"comment-form__subscribe-by-email__title"},v(Qr,{id:"subscribeByEmail.subscribe-to-replies",defaultMessage:"Subscribe to replies"})),v(Gi,{autofocus:!0,className:"comment-form__subscribe-by-email__input",placeholder:t.formatMessage(Os.email),value:n,onInput:r,disabled:e})))(d,n,c,g),i===ks.Token&&((e,t,n,r,o)=>v(b,null,v(xi,Ss({kind:"link",mix:"auth-email-login-form__back-button"},Ni(o)),v(Qr,{id:"subscribeByEmail.back",defaultMessage:"Back"})),v(Qi,{className:"comment-form__subscribe-by-email__token-input",placeholder:t.formatMessage(Os.token),autofocus:!0,onInput:r,disabled:e,value:n})))(d,n,a,y,M),null!==f&&v("div",{className:"comment-form__subscribe-by-email__error",role:"alert"},f),v(xi,{mix:"comment-form__subscribe-by-email__button",kind:"primary",size:"large",type:"submit",disabled:!w||d},d?v(Ei,{mix:"comment-form__subscribe-by-email__preloader"}):x))},js=()=>{const e=ts(),t=Jr(),n=ws(Ft((({user:e})=>e))),r=t.formatMessage(n?Os.onlyRegisteredUsers:Os.subscribeByEmail);return v(Bi,{mix:"comment-form__email-dropdown",title:t.formatMessage(Os.email),theme:e,disabled:n,buttonTitle:r},v(Ns,null))},As=(e,t="")=>`${eo}/api/v1/rss/${e}?site=${po}${t}`,Cs={id:"subscribeByRSS.thread",defaultMessage:"Thread"},Is={id:"subscribeByRSS.site",defaultMessage:"Site"},Ls={id:"subscribeByRSS.replies",defaultMessage:"Replies"},Ds={id:"subscribeByRSS.button-title",defaultMessage:"Subscribe by RSS"},Ts={id:"subscribeByRSS.title",defaultMessage:"RSS"},Ps=({userId:e})=>{const t=ts(),n=Jr(),r=ye((()=>[[As("post",`&url=${go}`),n.formatMessage(Cs)],[As("site"),n.formatMessage(Is)],[As("reply",`&user=${e}`),n.formatMessage(Ls)]]),[e,n]);return v(Bi,{title:n.formatMessage(Ts),titleClass:"comment-form__rss-dropdown__title",buttonTitle:n.formatMessage(Ds),mix:"comment-form__rss-dropdown",theme:t},r.map((([e,t])=>v(Hi,null,v("a",{href:e,className:"comment-form__rss-dropdown__link",target:"_blank",rel:"noreferrer"},t)))))};s(686);const Rs=["[data-md-button]","md-header","md-bold","md-italic","md-quote","md-code","md-link","md-image","md-unordered-list","md-ordered-list","md-task-list","md-mention","md-ref","md-strikethrough"];function Us(e){const t=[];for(const n of e.querySelectorAll(Rs.join(", ")))n.hidden||n.offsetWidth<=0&&n.offsetHeight<=0||n.closest("markdown-toolbar")===e&&t.push(n);return t}const Fs=new WeakMap;class zs extends HTMLElement{constructor(){super();const e=()=>{const e=Fs.get(this);e&&da(this,e)};this.addEventListener("keydown",function(e){return function(t){" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),e(t))}}(e)),this.addEventListener("click",e)}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","button")}click(){const e=Fs.get(this);e&&da(this,e)}}class Bs extends zs{constructor(){super();const e=parseInt(this.getAttribute("level")||"3",10);if(e<1||e>6)return;const t=`${"#".repeat(e)} `;Fs.set(this,{prefix:t})}}window.customElements.get("md-header")||(window.MarkdownHeaderButtonElement=Bs,window.customElements.define("md-header",Bs));class Hs extends zs{constructor(){super(),Fs.set(this,{prefix:"**",suffix:"**",trimFirst:!0})}connectedCallback(){super.connectedCallback(),this.setAttribute("hotkey","b")}}window.customElements.get("md-bold")||(window.MarkdownBoldButtonElement=Hs,window.customElements.define("md-bold",Hs));class $s extends zs{constructor(){super(),Fs.set(this,{prefix:"_",suffix:"_",trimFirst:!0})}connectedCallback(){super.connectedCallback(),this.setAttribute("hotkey","i")}}window.customElements.get("md-italic")||(window.MarkdownItalicButtonElement=$s,window.customElements.define("md-italic",$s));class Vs extends zs{constructor(){super(),Fs.set(this,{prefix:"> ",multiline:!0,surroundWithNewlines:!0})}}window.customElements.get("md-quote")||(window.MarkdownQuoteButtonElement=Vs,window.customElements.define("md-quote",Vs));class Ws extends zs{constructor(){super(),Fs.set(this,{prefix:"`",suffix:"`",blockPrefix:"```",blockSuffix:"```"})}}window.customElements.get("md-code")||(window.MarkdownCodeButtonElement=Ws,window.customElements.define("md-code",Ws));class Zs extends zs{constructor(){super(),Fs.set(this,{prefix:"[",suffix:"](url)",replaceNext:"url",scanFor:"https?://"})}connectedCallback(){super.connectedCallback(),this.setAttribute("hotkey","k")}}window.customElements.get("md-link")||(window.MarkdownLinkButtonElement=Zs,window.customElements.define("md-link",Zs));class Gs extends zs{constructor(){super(),Fs.set(this,{prefix:"![",suffix:"](url)",replaceNext:"url",scanFor:"https?://"})}}window.customElements.get("md-image")||(window.MarkdownImageButtonElement=Gs,window.customElements.define("md-image",Gs));class Ys extends zs{constructor(){super(),Fs.set(this,{prefix:"- ",multiline:!0,surroundWithNewlines:!0})}}window.customElements.get("md-unordered-list")||(window.MarkdownUnorderedListButtonElement=Ys,window.customElements.define("md-unordered-list",Ys));class qs extends zs{constructor(){super(),Fs.set(this,{prefix:"1. ",multiline:!0,orderedList:!0})}}window.customElements.get("md-ordered-list")||(window.MarkdownOrderedListButtonElement=qs,window.customElements.define("md-ordered-list",qs));class Qs extends zs{constructor(){super(),Fs.set(this,{prefix:"- [ ] ",multiline:!0,surroundWithNewlines:!0})}connectedCallback(){super.connectedCallback(),this.setAttribute("hotkey","L")}}window.customElements.get("md-task-list")||(window.MarkdownTaskListButtonElement=Qs,window.customElements.define("md-task-list",Qs));class Js extends zs{constructor(){super(),Fs.set(this,{prefix:"@",prefixSpace:!0})}}window.customElements.get("md-mention")||(window.MarkdownMentionButtonElement=Js,window.customElements.define("md-mention",Js));class Ks extends zs{constructor(){super(),Fs.set(this,{prefix:"#",prefixSpace:!0})}}window.customElements.get("md-ref")||(window.MarkdownRefButtonElement=Ks,window.customElements.define("md-ref",Ks));class Xs extends zs{constructor(){super(),Fs.set(this,{prefix:"~~",suffix:"~~",trimFirst:!0})}}window.customElements.get("md-strikethrough")||(window.MarkdownStrikethroughButtonElement=Xs,window.customElements.define("md-strikethrough",Xs));const ea=navigator.userAgent.match(/Macintosh/)?"Meta":"Control";class ta extends HTMLElement{constructor(){super()}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","toolbar"),this.addEventListener("keydown",ra);const e=ia.bind(null,this);this.field&&(this.field.addEventListener("keydown",e),oa.set(this,e)),this.setAttribute("tabindex","0"),this.addEventListener("focus",na,{once:!0})}disconnectedCallback(){const e=oa.get(this);e&&this.field&&(this.field.removeEventListener("keydown",e),oa.delete(this)),this.removeEventListener("keydown",ra)}get field(){const e=this.getAttribute("for");if(!e)return null;const t="getRootNode"in this?this.getRootNode():document;let n;return(t instanceof Document||t instanceof ShadowRoot)&&(n=t.getElementById(e)),n instanceof HTMLTextAreaElement?n:null}}function na({target:e}){if(!(e instanceof Element))return;e.removeAttribute("tabindex");let t="0";for(const n of Us(e))n.setAttribute("tabindex",t),"0"===t&&(n.focus(),t="-1")}function ra(e){const t=e.key;if("ArrowRight"!==t&&"ArrowLeft"!==t&&"Home"!==t&&"End"!==t)return;const n=e.currentTarget;if(!(n instanceof HTMLElement))return;const r=Us(n),o=r.indexOf(e.target),i=r.length;if(-1===o)return;let s=0;"ArrowLeft"===t&&(s=o-1),"ArrowRight"===t&&(s=o+1),"End"===t&&(s=i-1),s<0&&(s=i-1),s>i-1&&(s=0);for(let e=0;e<i;e+=1)r[e].setAttribute("tabindex",e===s?"0":"-1");e.preventDefault(),r[s].focus()}const oa=new WeakMap;function ia(e,t){if(t.metaKey&&"Meta"===ea||t.ctrlKey&&"Control"===ea){const n=function(e,t){for(const n of e.querySelectorAll("[hotkey]"))if(n.getAttribute("hotkey")===t)return n;return null}(e,t.key);n&&(n.click(),t.preventDefault())}}function sa(e){return e.trim().split("\n").length>1}function aa(e,t){return Array(t+1).join(e)}function la(e,t,n){let r=t;const o=n?/\n/:/\s/;for(;e[r]&&!e[r].match(o);)r++;return r}window.customElements.get("markdown-toolbar")||(window.MarkdownToolbarElement=ta,window.customElements.define("markdown-toolbar",ta));let ca=null;function ua(e){const t=e.value.slice(0,e.selectionStart),n=e.value.slice(e.selectionEnd),r=t.match(/\n*$/),o=n.match(/^\n*/),i=r?r[0].length:0,s=o?o[0].length:0;let a,l;return t.match(/\S/)&&i<2&&(a=aa("\n",2-i)),n.match(/\S/)&&s<2&&(l=aa("\n",2-s)),null==a&&(a=""),null==l&&(l=""),{newlinesToAppend:a,newlinesToPrepend:l}}function da(e,t){const n=e.closest("markdown-toolbar");if(!(n instanceof ta))return;const r=Object.assign(Object.assign({},{prefix:"",suffix:"",blockPrefix:"",blockSuffix:"",multiline:!1,replaceNext:"",prefixSpace:!1,scanFor:"",surroundWithNewlines:!1,orderedList:!1,trimFirst:!1}),t),o=n.field;o&&(o.focus(),function(e,t){const n=e.value.slice(e.selectionStart,e.selectionEnd);let r;r=t.orderedList?function(e){const t=/^\d+\.\s+/,n=e.selectionStart===e.selectionEnd;let r,o,i,s,a=e.value.slice(e.selectionStart,e.selectionEnd),l=a,c=a.split("\n");if(n){const t=e.value.slice(0,e.selectionStart).split(/\n/);i=e.selectionStart-t[t.length-1].length,s=la(e.value,e.selectionStart,!0),l=e.value.slice(i,s)}const u=l.split("\n");if(u.every((e=>t.test(e)))){if(c=u.map((e=>e.replace(t,""))),a=c.join("\n"),n&&i&&s){const t=u[0].length-c[0].length;o=r=e.selectionStart-t,e.selectionStart=i,e.selectionEnd=s}}else{c=function(e){let t,n,r;const o=[];for(r=t=0,n=e.length;t<n;r=++t){const t=e[r];o.push(`${r+1}. ${t}`)}return o}(c),a=c.join("\n");const{newlinesToAppend:t,newlinesToPrepend:i}=ua(e);o=e.selectionStart+t.length,r=o+a.length,n&&(o=r),a=t+a+i}return{text:a,selectionStart:o,selectionEnd:r}}(e):t.multiline&&sa(n)?function(e,t){const{prefix:n,suffix:r,surroundWithNewlines:o}=t;let i=e.value.slice(e.selectionStart,e.selectionEnd),s=e.selectionStart,a=e.selectionEnd;const l=i.split("\n");if(l.every((e=>e.startsWith(n)&&e.endsWith(r))))i=l.map((e=>e.slice(n.length,e.length-r.length))).join("\n"),a=s+i.length;else if(i=l.map((e=>n+e+r)).join("\n"),o){const{newlinesToAppend:t,newlinesToPrepend:n}=ua(e);s+=t.length,a=s+i.length,i=t+i+n}return{text:i,selectionStart:s,selectionEnd:a}}(e,t):function(e,t){let n,r;const{prefix:o,suffix:i,blockPrefix:s,blockSuffix:a,replaceNext:l,prefixSpace:c,scanFor:u,surroundWithNewlines:d}=t,m=e.selectionStart,f=e.selectionEnd;let p=e.value.slice(e.selectionStart,e.selectionEnd),h=sa(p)&&s.length>0?`${s}\n`:o,g=sa(p)&&a.length>0?`\n${a}`:i;if(c){const t=e.value[e.selectionStart-1];0===e.selectionStart||null==t||t.match(/\s/)||(h=` ${h}`)}p=function(e,t,n,r=!1){if(e.selectionStart===e.selectionEnd)e.selectionStart=function(e,t){let n=t;for(;e[n]&&null!=e[n-1]&&!e[n-1].match(/\s/);)n--;return n}(e.value,e.selectionStart),e.selectionEnd=la(e.value,e.selectionEnd,r);else{const r=e.selectionStart-t.length,o=e.selectionEnd+n.length,i=e.value.slice(r,e.selectionStart)===t,s=e.value.slice(e.selectionEnd,o)===n;i&&s&&(e.selectionStart=r,e.selectionEnd=o)}return e.value.slice(e.selectionStart,e.selectionEnd)}(e,h,g,t.multiline);let v=e.selectionStart,y=e.selectionEnd;const _=l.length>0&&g.indexOf(l)>-1&&p.length>0;if(d){const t=ua(e);n=t.newlinesToAppend,r=t.newlinesToPrepend,h=n+o,g+=r}if(p.startsWith(h)&&p.endsWith(g)){const e=p.slice(h.length,p.length-g.length);if(m===f){let t=m-h.length;t=Math.max(t,v),t=Math.min(t,v+e.length),v=y=t}else y=v+e.length;return{text:e,selectionStart:v,selectionEnd:y}}if(_){if(u.length>0&&p.match(u)){g=g.replace(l,p);const e=h+g;return v=y=v+h.length,{text:e,selectionStart:v,selectionEnd:y}}{const e=h+p+g;return v=v+h.length+p.length+g.indexOf(l),y=v+l.length,{text:e,selectionStart:v,selectionEnd:y}}}{let e=h+p+g;v=m+h.length,y=f+h.length;const n=p.match(/^\s*|\s*$/g);if(t.trimFirst&&n){const t=n[0]||"",r=n[1]||"";e=t+h+p.trim()+g+r,v+=t.length,y-=r.length}return{text:e,selectionStart:v,selectionEnd:y}}}(e,t),function(e,{text:t,selectionStart:n,selectionEnd:r}){const o=e.selectionStart,i=e.value.slice(0,o),s=e.value.slice(e.selectionEnd);if(null===ca||!0===ca){e.contentEditable="true";try{ca=document.execCommand("insertText",!1,t)}catch(e){ca=!1}e.contentEditable="false"}if(ca&&!e.value.slice(0,e.selectionStart).endsWith(t)&&(ca=!1),!ca){try{document.execCommand("ms-beginUndoUnit")}catch(e){}e.value=i+t+s;try{document.execCommand("ms-endUndoUnit")}catch(e){}e.dispatchEvent(new CustomEvent("input",{bubbles:!0,cancelable:!0}))}null!=n&&null!=r?e.setSelectionRange(n,r):e.setSelectionRange(o,e.selectionEnd)}(e,r)}(o,r))}function ma(){return v("svg",{className:"comment-form__toolbar-icon",viewBox:"0 0 10 16",version:"1.1",width:"10",height:"16","aria-hidden":"true"},v("path",{"fill-rule":"evenodd",d:"M1 2h3.83c2.48 0 4.3.75 4.3 2.95 0 1.14-.63 2.23-1.67 2.61v.06c1.33.3 2.3 1.23 2.3 2.86 0 2.39-1.97 3.52-4.61 3.52H1V2zm3.66 4.95c1.67 0 2.38-.66 2.38-1.69 0-1.17-.78-1.61-2.34-1.61H3.13v3.3h1.53zm.27 5.39c1.77 0 2.75-.64 2.75-1.98 0-1.27-.95-1.81-2.75-1.81h-1.8v3.8h1.8v-.01z"}))}function fa(){return v("svg",{className:"comment-form__toolbar-icon",viewBox:"0 0 18 16",version:"1.1",width:"18",height:"16","aria-hidden":"true"},v("path",{"fill-rule":"evenodd",d:"M13.62 9.08L12.1 3.66h-.06l-1.5 5.42h3.08zM5.7 10.13S4.68 6.52 4.53 6.02h-.08l-1.13 4.11H5.7zM17.31 14h-2.25l-.95-3.25h-4.07L9.09 14H6.84l-.69-2.33H2.87L2.17 14H0l3.3-9.59h2.5l2.17 6.34L10.86 2h2.52l3.94 12h-.01z"}))}function pa(){return v("svg",{className:"comment-form__toolbar-icon",viewBox:"0 0 6 16",version:"1.1",width:"6",height:"16","aria-hidden":"true"},v("path",{"fill-rule":"evenodd",d:"M2.81 5h1.98L3 14H1l1.81-9zm.36-2.7c0-.7.58-1.3 1.33-1.3.56 0 1.13.38 1.13 1.03 0 .75-.59 1.3-1.33 1.3-.58 0-1.13-.38-1.13-1.03z"}))}function ha(){return v("svg",{className:"comment-form__toolbar-icon",viewBox:"0 0 14 16",version:"1.1",width:"14",height:"16","aria-hidden":"true"},v("path",{"fill-rule":"evenodd",d:"M6.16 3.5C3.73 5.06 2.55 6.67 2.55 9.36c.16-.05.3-.05.44-.05 1.27 0 2.5.86 2.5 2.41 0 1.61-1.03 2.61-2.5 2.61-1.9 0-2.99-1.52-2.99-4.25 0-3.8 1.75-6.53 5.02-8.42L6.16 3.5zm7 0c-2.43 1.56-3.61 3.17-3.61 5.86.16-.05.3-.05.44-.05 1.27 0 2.5.86 2.5 2.41 0 1.61-1.03 2.61-2.5 2.61-1.89 0-2.98-1.52-2.98-4.25 0-3.8 1.75-6.53 5.02-8.42l1.14 1.84h-.01z"}))}function ga(){return v("svg",{className:"comment-form__toolbar-icon",viewBox:"0 0 14 16",version:"1.1",width:"14",height:"16","aria-hidden":"true"},v("path",{"fill-rule":"evenodd",d:"M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"}))}function va(){return v("svg",{className:"comment-form__toolbar-icon",viewBox:"0 0 16 16",version:"1.1",width:"16",height:"16","aria-hidden":"true"},v("path",{"fill-rule":"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))}function ya(){return v("svg",{className:"comment-form__toolbar-icon",width:"11.25",height:"15",viewBox:"0 0 384 512","aria-hidden":"true"},v("path",{"fill-rule":"evenodd",d:"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z"}))}function _a(){return v("svg",{className:"comment-form__toolbar-icon",viewBox:"0 0 12 16",version:"1.1",width:"12",height:"16","aria-hidden":"true"},v("path",{"fill-rule":"evenodd",d:"M2 13c0 .59 0 1-.59 1H.59C0 14 0 13.59 0 13c0-.59 0-1 .59-1h.81c.59 0 .59.41.59 1H2zm2.59-9h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1H4.59C4 2 4 2.41 4 3c0 .59 0 1 .59 1zM1.41 7H.59C0 7 0 7.41 0 8c0 .59 0 1 .59 1h.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01zm0-5H.59C0 2 0 2.41 0 3c0 .59 0 1 .59 1h.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01zm10 5H4.59C4 7 4 7.41 4 8c0 .59 0 1 .59 1h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01zm0 5H4.59C4 12 4 12.41 4 13c0 .59 0 1 .59 1h6.81c.59 0 .59-.41.59-1 0-.59 0-1-.59-1h.01z"}))}function ba(){return v("svg",{className:"comment-form__toolbar-icon",viewBox:"0 0 12 16",version:"1.1",width:"12",height:"16","aria-hidden":"true"},v("path",{"fill-rule":"evenodd",d:"M12.01 13c0 .59 0 1-.59 1H4.6c-.59 0-.59-.41-.59-1 0-.59 0-1 .59-1h6.81c.59 0 .59.41.59 1h.01zM4.6 4h6.81C12 4 12 3.59 12 3c0-.59 0-1-.59-1H4.6c-.59 0-.59.41-.59 1 0 .59 0 1 .59 1zm6.81 3H4.6c-.59 0-.59.41-.59 1 0 .59 0 1 .59 1h6.81C12 9 12 8.59 12 8c0-.59 0-1-.59-1zm-9.4-6h-.72c-.3.19-.58.25-1.03.34V2h.75v2.14H.17V5h2.84v-.86h-1V1zm.392 8.12c-.129 0-.592.04-.802.07.53-.56 1.14-1.25 1.14-1.89C2.72 6.52 2.18 6 1.38 6c-.59 0-.97.2-1.38.64l.58.58c.19-.19.38-.38.64-.38.28 0 .48.16.48.52 0 .53-.77 1.2-1.7 2.06V10h3v-.88h-.598zm-.222 3.79v-.03c.44-.19.64-.47.64-.86 0-.7-.56-1.11-1.44-1.11-.48 0-.89.19-1.28.52l.55.64c.25-.2.44-.31.69-.31.27 0 .42.13.42.36 0 .27-.2.44-.86.44v.75c.83 0 .98.17.98.47 0 .25-.23.38-.58.38-.28 0-.56-.14-.81-.38l-.48.66c.3.36.77.56 1.41.56.83 0 1.53-.41 1.53-1.16 0-.5-.31-.81-.77-.94v.01z"}))}const wa={id:"toolbar.bold",defaultMessage:"Add bold text {shortcut}"},Ma={id:"toolbar.header",defaultMessage:"Add header text"},Sa={id:"toolbar.italic",defaultMessage:"Add italic text {shortcut}"},xa={id:"toolbar.quote",defaultMessage:"Insert a quote"},Ea={id:"toolbar.code",defaultMessage:"Insert a code"},ka={id:"toolbar.link",defaultMessage:"Add a link {shortcut}"},Oa={id:"toolbar.unordered-list",defaultMessage:"Add a bulleted list"},Na={id:"toolbar.ordered-list",defaultMessage:"Add a numbered list"},ja={id:"toolbar.attach-image",defaultMessage:"Attach the image, drag & drop or paste from clipboard"};class Aa extends w{constructor(e){super(e),this.uploadImages=this.uploadImages.bind(this)}uploadImages(e){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const t=e.currentTarget;if(!(this.props.allowUpload&&t&&t.files&&0!==t.files.length))return;const n=Array.from(t.files);yield this.props.uploadImages(n),t.value=null}))}render(e){const t=e.intl,n=t.formatMessage(wa,{shortcut:"<cmd-b>"}),r=t.formatMessage(Ma),o=t.formatMessage(Sa,{shortcut:"<cmd-i>"}),i=t.formatMessage(xa),s=t.formatMessage(Ea),a=t.formatMessage(ka,{shortcut:"<cmd-k>"}),l=t.formatMessage(Oa),c=t.formatMessage(Na),u=t.formatMessage(ja);return v("markdown-toolbar",{className:"comment-form__toolbar",for:e.textareaId},v("div",{className:"comment-form__toolbar-group"},v("md-header",{className:"comment-form__toolbar-item",title:r,"aria-label":r},v(fa,null)),v("md-bold",{className:"comment-form__toolbar-item",title:n,"aria-label":n},v(ma,null)),v("md-italic",{className:"comment-form__toolbar-item",title:o,"aria-label":o},v(pa,null))),v("div",{className:"comment-form__toolbar-group"},v("md-quote",{className:"comment-form__toolbar-item",title:i,"aria-label":i},v(ha,null)),v("md-code",{className:"comment-form__toolbar-item",title:s,"aria-label":s},v(ga,null)),v("md-link",{className:"comment-form__toolbar-item",title:a,"aria-label":a},v(va,null)),this.props.allowUpload?v("label",{className:"comment-form__toolbar-item",title:u,"aria-label":u},v("input",{multiple:!0,className:"comment-form__toolbar-file-input",type:"file",onChange:this.uploadImages}),v(ya,null)):null),v("div",{className:"comment-form__toolbar-group"},v("md-unordered-list",{className:"comment-form__toolbar-item",title:l,"aria-label":l},v(_a,null)),v("md-ordered-list",{className:"comment-form__toolbar-item",title:c,"aria-label":c},v(ba,null))))}}const Ca=!!navigator.userAgent.match(/Macintosh/);class Ia{constructor(e,t){this.input=e,this.list=t,this.isComposing=!1,t.id||(t.id=`combobox-${Math.random().toString().slice(2,6)}`),this.keyboardEventHandler=e=>function(e,t){if(!(e.shiftKey||e.metaKey||e.altKey)&&(Ca||!e.ctrlKey)&&!t.isComposing)switch(e.key){case"Enter":case"Tab":(function(e,t){const n=t.querySelector('[aria-selected="true"]');return!!n&&("true"===n.getAttribute("aria-disabled")||n.click(),!0)})(t.input,t.list)&&e.preventDefault();break;case"Escape":t.clearSelection();break;case"ArrowDown":t.navigate(1),e.preventDefault();break;case"ArrowUp":t.navigate(-1),e.preventDefault();break;case"n":Ca&&e.ctrlKey&&(t.navigate(1),e.preventDefault());break;case"p":Ca&&e.ctrlKey&&(t.navigate(-1),e.preventDefault());break;default:if(e.ctrlKey)break;t.clearSelection()}}(e,this),this.compositionEventHandler=e=>function(e,t){t.isComposing="compositionstart"===e.type,document.getElementById(t.input.getAttribute("aria-controls")||"")&&t.clearSelection()}(e,this),this.inputHandler=this.clearSelection.bind(this),e.setAttribute("role","combobox"),e.setAttribute("aria-controls",t.id),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-haspopup","listbox")}destroy(){this.clearSelection(),this.stop(),this.input.removeAttribute("role"),this.input.removeAttribute("aria-controls"),this.input.removeAttribute("aria-expanded"),this.input.removeAttribute("aria-autocomplete"),this.input.removeAttribute("aria-haspopup")}start(){this.input.setAttribute("aria-expanded","true"),this.input.addEventListener("compositionstart",this.compositionEventHandler),this.input.addEventListener("compositionend",this.compositionEventHandler),this.input.addEventListener("input",this.inputHandler),this.input.addEventListener("keydown",this.keyboardEventHandler),this.list.addEventListener("click",La)}stop(){this.clearSelection(),this.input.setAttribute("aria-expanded","false"),this.input.removeEventListener("compositionstart",this.compositionEventHandler),this.input.removeEventListener("compositionend",this.compositionEventHandler),this.input.removeEventListener("input",this.inputHandler),this.input.removeEventListener("keydown",this.keyboardEventHandler),this.list.removeEventListener("click",La)}navigate(e=1){const t=Array.from(this.list.querySelectorAll('[aria-selected="true"]')).filter(Da)[0],n=Array.from(this.list.querySelectorAll('[role="option"]')).filter(Da),r=n.indexOf(t);if(r===n.length-1&&1===e||0===r&&-1===e)return this.clearSelection(),void this.input.focus();let o=1===e?0:n.length-1;if(t&&r>=0){const t=r+e;t>=0&&t<n.length&&(o=t)}const i=n[o];if(i)for(const e of n)i===e?(this.input.setAttribute("aria-activedescendant",i.id),i.setAttribute("aria-selected","true"),Ta(this.list,i)):e.setAttribute("aria-selected","false")}clearSelection(){this.input.removeAttribute("aria-activedescendant");for(const e of this.list.querySelectorAll('[aria-selected="true"]'))e.setAttribute("aria-selected","false")}}function La(e){if(!(e.target instanceof Element))return;const t=e.target.closest('[role="option"]');t&&"true"!==t.getAttribute("aria-disabled")&&function(e){e.dispatchEvent(new CustomEvent("combobox-commit",{bubbles:!0}))}(t)}function Da(e){return!e.hidden&&!(e instanceof HTMLInputElement&&"hidden"===e.type)&&(e.offsetWidth>0||e.offsetHeight>0)}function Ta(e,t){(function(e,t){const n=e.scrollTop,r=n+e.clientHeight,o=t.offsetTop,i=o+t.clientHeight;return o>=n&&i<=r})(e,t)||(e.scrollTop=t.offsetTop)}const Pa=/\s|\(|\[/;function Ra(e,t,n,{multiWord:r,lookBackIndex:o,lastMatchPosition:i}={multiWord:!1,lookBackIndex:0,lastMatchPosition:null}){let s=e.lastIndexOf(t,n-1);if(-1===s)return;if(s<o)return;if(r){if(null!=i){if(i===s)return;s=i-1}if(" "===e[s+1]&&n>=s+2)return;if(e.lastIndexOf("\n",n-1)>s)return;if(e.lastIndexOf(".",n-1)>s)return}else if(e.lastIndexOf(" ",n-1)>s)return;const a=e[s-1];return!a||Pa.test(a)?{text:e.substring(s+t.length,n),position:s+t.length}:void 0}const Ua=["position:absolute;","overflow:auto;","word-wrap:break-word;","top:0px;","left:-9999px;"],Fa=["box-sizing","font-family","font-size","font-style","font-variant","font-weight","height","letter-spacing","line-height","max-height","min-height","padding-bottom","padding-left","padding-right","padding-top","border-bottom","border-left","border-right","border-top","text-decoration","text-indent","text-transform","width","word-spacing"],za=new WeakMap;const Ba=new WeakMap;class Ha{constructor(e,t){this.expander=e,this.input=t,this.combobox=null,this.menu=null,this.match=null,this.justPasted=!1,this.lookBackIndex=0,this.oninput=this.onInput.bind(this),this.onpaste=this.onPaste.bind(this),this.onkeydown=this.onKeydown.bind(this),this.oncommit=this.onCommit.bind(this),this.onmousedown=this.onMousedown.bind(this),this.onblur=this.onBlur.bind(this),this.interactingWithList=!1,t.addEventListener("paste",this.onpaste),t.addEventListener("input",this.oninput),t.addEventListener("keydown",this.onkeydown),t.addEventListener("blur",this.onblur)}destroy(){this.input.removeEventListener("paste",this.onpaste),this.input.removeEventListener("input",this.oninput),this.input.removeEventListener("keydown",this.onkeydown),this.input.removeEventListener("blur",this.onblur)}dismissMenu(){this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex)}activate(e,t){if(this.input!==document.activeElement)return;this.deactivate(),this.menu=t,t.id||(t.id=`text-expander-${Math.floor(1e5*Math.random()).toString()}`),this.expander.append(t),this.combobox=new Ia(this.input,t);const{top:n,left:r}=function(e,t=e.selectionEnd){const{mirror:n,marker:r}=function(e,t){const n=e.nodeName.toLowerCase();if("textarea"!==n&&"input"!==n)throw new Error("expected textField to a textarea or input");let r=za.get(e);if(r&&r.parentElement===e.parentElement)r.innerHTML="";else{r=document.createElement("div"),za.set(e,r);const t=window.getComputedStyle(e),o=Ua.slice(0);"textarea"===n?o.push("white-space:pre-wrap;"):o.push("white-space:nowrap;");for(let e=0,n=Fa.length;e<n;e++){const n=Fa[e];o.push(`${n}:${t.getPropertyValue(n)};`)}r.style.cssText=o.join(" ")}const o=document.createElement("span");let i,s;if(o.style.cssText="position: absolute;",o.innerHTML="&nbsp;","number"==typeof t){let n=e.value.substring(0,t);n&&(i=document.createTextNode(n)),n=e.value.substring(t),n&&(s=document.createTextNode(n))}else{const t=e.value;t&&(i=document.createTextNode(t))}if(i&&r.appendChild(i),r.appendChild(o),s&&r.appendChild(s),!r.parentElement){if(!e.parentElement)throw new Error("textField must have a parentElement to mirror");e.parentElement.insertBefore(r,e)}return r.scrollTop=e.scrollTop,r.scrollLeft=e.scrollLeft,{mirror:r,marker:o}}(e,t),o=n.getBoundingClientRect(),i=r.getBoundingClientRect();return setTimeout((()=>{n.remove()}),5e3),{top:i.top-o.top,left:i.left-o.left}}(this.input,e.position);t.style.top=`${n}px`,t.style.left=`${r}px`,this.combobox.start(),t.addEventListener("combobox-commit",this.oncommit),t.addEventListener("mousedown",this.onmousedown),this.combobox.navigate(1)}deactivate(){const e=this.menu;return!(!e||!this.combobox||(this.menu=null,e.removeEventListener("combobox-commit",this.oncommit),e.removeEventListener("mousedown",this.onmousedown),this.combobox.destroy(),this.combobox=null,e.remove(),0))}onCommit({target:e}){const t=e;if(!(t instanceof HTMLElement))return;if(!this.combobox)return;const n=this.match;if(!n)return;const r=this.input.value.substring(0,n.position-n.key.length),o=this.input.value.substring(n.position+n.text.length),i={item:t,key:n.key,value:null};if(!this.expander.dispatchEvent(new CustomEvent("text-expander-value",{cancelable:!0,detail:i})))return;if(!i.value)return;const s=`${i.value} `;this.input.value=r+s+o;const a=r.length+s.length;this.deactivate(),this.input.focus(),this.input.selectionStart=a,this.input.selectionEnd=a,this.lookBackIndex=a,this.match=null}onBlur(){this.interactingWithList?this.interactingWithList=!1:this.deactivate()}onPaste(){this.justPasted=!0}async onInput(){if(this.justPasted)return void(this.justPasted=!1);const e=this.findMatch();if(e){this.match=e;const t=await this.notifyProviders(e);if(!this.match)return;t?this.activate(e,t):this.deactivate()}else this.match=null,this.deactivate()}findMatch(){const e=this.input.selectionEnd||0,t=this.input.value;e<=this.lookBackIndex&&(this.lookBackIndex=e-1);for(const{key:n,multiWord:r}of this.expander.keys){const o=Ra(t,n,e,{multiWord:r,lookBackIndex:this.lookBackIndex,lastMatchPosition:this.match?this.match.position:null});if(o)return{text:o.text,key:n,position:o.position}}}async notifyProviders(e){const t=[];if(this.expander.dispatchEvent(new CustomEvent("text-expander-change",{cancelable:!0,detail:{provide:e=>t.push(e),text:e.text,key:e.key}})))return(await Promise.all(t)).filter((e=>e.matched)).map((e=>e.fragment))[0]}onMousedown(){this.interactingWithList=!0}onKeydown(e){"Escape"===e.key&&(this.match=null,this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex,e.stopImmediatePropagation(),e.preventDefault()))}}class $a extends HTMLElement{get keys(){const e=this.getAttribute("keys"),t=e?e.split(" "):[],n=this.getAttribute("multiword"),r=n?n.split(" "):[],o=0===r.length&&this.hasAttribute("multiword");return t.map((e=>({key:e,multiWord:o||r.includes(e)})))}connectedCallback(){const e=this.querySelector('input[type="text"], textarea');if(!(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement))return;const t=new Ha(this,e);Ba.set(this,t)}disconnectedCallback(){const e=Ba.get(this);e&&(e.destroy(),Ba.delete(this))}dismiss(){const e=Ba.get(this);e&&e.dismissMenu()}}window.customElements.get("text-expander")||(window.TextExpanderElement=$a,window.customElements.define("text-expander",$a));function Va({items:e,theme:t}){const n="dark"===t,r=Xr()("text-expander-module__suggester_ef4e7",{"text-expander-module__suggesterDark_a9680":n}),o=Xr()("text-expander-module__suggesterItem_73d25",{"text-expander-module__suggesterItemDark_9dc03":n});return v("ul",{className:r},e.map((({key:e,emoji:t})=>v("li",{role:"option",className:o,"data-value":e},v("span",{className:"text-expander-module__emojiResult_e2cc2"},t)," ",e))))}const Wa=({children:e})=>{const t=ge(),n=ts();return pe((()=>{if(t.current){const e=t.current;e.setAttribute("keys",":");const r=e=>{const{provide:t,key:r,text:o}=e.detail;t(function(e,t,n){return s.e(371).then(s.t.bind(s,445,23)).then((r=>{if(":"===e){const e=r.search(t);if(0===e.length)return Promise.resolve({matched:!1});const o=document.createDocumentFragment();return z(v(Va,{theme:n,items:e.slice(0,5)}),o),Promise.resolve({matched:!0,fragment:o.firstChild})}return Promise.resolve({matched:!1})})).catch((()=>Promise.resolve({matched:!1})))}(r,o,n))},o=e=>{const{key:t,item:n}=e.detail;":"===t&&(e.detail.value=`:${n.dataset.value}:`)};return e.addEventListener("text-expander-change",r),e.addEventListener("text-expander-value",o),()=>{e.removeEventListener("text-expander-change",r),e.removeEventListener("text-expander-value",o)}}return()=>{}}),[n]),yo.config.emoji_enabled?v("text-expander",{ref:t},e):v(b,null,e)};var Za=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};let Ga=0;const Ya=/image\//i,qa={placeholder:{id:"commentForm.input-placeholder",defaultMessage:"Your comment here"},uploadFileFail:{id:"commentForm.upload-file-fail",defaultMessage:'{fileName} upload failed with "{errorMessage}"'},uploading:{id:"commentForm.uploading",defaultMessage:"Uploading..."},uploadingFile:{id:"commentForm.uploading-file",defaultMessage:"uploading {fileName}..."},exceededSize:{id:"commentForm.exceeded-size",defaultMessage:"{fileName} exceeds size limit of {maxImageSize}"},newComment:{id:"commentForm.new-comment",defaultMessage:"New comment"},unexpectedError:{id:"commentForm.unexpected-error",defaultMessage:"Something went wrong. Please try again a bit later."},unauthorizedUploadingDisabled:{id:"commentForm.unauthorized-uploading-disabled",defaultMessage:"Image uploading is disabled for unauthorized users. You should login before uploading."},anonymousUploadingDisabled:{id:"commentForm.anonymous-uploading-disabled",defaultMessage:"Image uploading is disabled for anonymous users. Please log in not as anonymous user to be able to attach images."}};class Qa extends w{constructor(e){var t;super(e),this.textareaRef={current:null},this.onInput=e=>{const{value:t}=e.target,n=t.substr(0,yo.config.max_comment_size);zo(ro,{[this.props.id]:t}),this.state.errorLock?this.setState({preview:null,text:n}):this.setState({isErrorShown:!1,errorMessage:null,preview:null,text:n})},this.send=e=>Za(this,void 0,void 0,(function*(){const{text:t}=this.state;if(e&&e.preventDefault(),t&&t.trim()){t===this.props.value&&(this.props.onCancel&&this.props.onCancel(),this.setState({preview:null,text:""})),this.setState({isDisabled:!0,isErrorShown:!1,text:t});try{yield this.props.onSubmit(t,ho||document.title)}catch(e){return void this.setState({isErrorShown:!0,errorMessage:So(e,this.props.intl)})}zo(ro,(e=>null===e?null:(delete e[this.props.id],e))),this.setState({isDisabled:!1,preview:null,text:""})}})),this.renderMarkdownTip=()=>v("div",{className:"comment-form__markdown"},v(Qr,{id:"commentForm.notice-about-styling",defaultMessage:"Styling with <a>Markdown</a> is supported",values:{a:e=>v("a",{class:"comment-form__markdown-link",target:"_blank",href:"markdown-help.html"},e)}})),Ga+=1,this.textareaId=`textarea_${Ga}`;const n=Uo(ro);let r=null!==(t=null==n?void 0:n[e.id])&&void 0!==t?t:"";e.value&&(r=e.value),this.state={preview:null,isErrorShown:!1,errorMessage:null,errorLock:!1,isDisabled:!1,text:r,buttonText:null},this.getPreview=this.getPreview.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onDragOver=this.onDragOver.bind(this),this.onDrop=this.onDrop.bind(this),this.appendError=this.appendError.bind(this),this.uploadImage=this.uploadImage.bind(this),this.uploadImages=this.uploadImages.bind(this),this.onPaste=this.onPaste.bind(this)}componentWillReceiveProps(e){e.value!==this.props.value&&this.setState({text:e.value||""}),e.user&&!this.props.value&&this.setState({isErrorShown:!1,errorMessage:null})}shouldComponentUpdate(e,t){const n=null!==this.props.user&&this.props.user.id;return(null!==e.user&&e.user.id)!==n||e.mode!==this.props.mode||e.theme!==this.props.theme||e.value!==this.props.value||e.errorMessage!==this.props.errorMessage||t!==this.state}onKeyDown(e){13===e.keyCode&&(e.metaKey||e.ctrlKey)&&this.send(e)}onPaste(e){return Za(this,void 0,void 0,(function*(){if(!(e.clipboardData&&e.clipboardData.files.length>0))return;e.preventDefault();const t=Array.from(e.clipboardData.files);yield this.uploadImages(t)}))}getPreview(){var e,t;const n=null!==(t=null===(e=this.textareaRef.current)||void 0===e?void 0:e.value)&&void 0!==t?t:this.state.text;n&&n.trim()&&(this.setState({isErrorShown:!1,errorMessage:null,text:n}),this.props.getPreview(n).then((e=>this.setState({preview:e}))).catch((()=>{this.setState({isErrorShown:!0,errorMessage:null})})))}appendError(...e){this.state.errorMessage?this.setState({errorMessage:`${this.state.errorMessage}\n${e.join("\n")}`,isErrorShown:!0}):this.setState({errorMessage:e.join("\n"),isErrorShown:!0})}onDragOver(e){if(this.props.user||e.preventDefault(),!this.props.uploadImage)return;if(0===yo.config.max_image_size)return;if(!this.textareaRef.current)return;if(!e.dataTransfer)return;const t=Array.from(e.dataTransfer.items);0!==Array.from(t).filter((e=>"file"===e.kind&&Ya.test(e.type))).length&&(e.preventDefault(),e.dataTransfer.dropEffect="copy")}onDrop(e){const t=this.props.user&&ws(this.props.user);if(!this.props.user||t){const n=t?qa.anonymousUploadingDisabled:qa.unauthorizedUploadingDisabled;return this.setState({isErrorShown:!0,errorMessage:this.props.intl.formatMessage(n)}),void e.preventDefault()}if(!this.props.uploadImage)return;if(0===yo.config.max_image_size)return;if(!e.dataTransfer)return;const n=Array.from(e.dataTransfer.files).filter((e=>Ya.test(e.type)));0!==n.length&&(e.preventDefault(),this.uploadImages(n))}getSelection(){const e=this.textareaRef.current;if(e)return[e.selectionStart,e.selectionEnd];throw new Error("No textarea element reference exists")}setSelection(e){const t=this.textareaRef.current;if(t)return t.selectionStart=e[0],void(t.selectionEnd=e[1]);throw new Error("No textarea element reference exists")}uploadImage(e){const t=this.props.intl;return this.props.uploadImage(e).catch((n=>new Error(t.formatMessage(qa.uploadFileFail,{fileName:e.name,errorMessage:So(n,this.props.intl)}))))}uploadImages(e){return Za(this,void 0,void 0,(function*(){const t=this.props.intl;if(!this.props.uploadImage)return;if(!this.textareaRef.current)return;const n=`${(yo.config.max_image_size/1024/1024).toFixed(2)}MB`;this.setState({errorLock:!0,errorMessage:null,isErrorShown:!1,isDisabled:!0,buttonText:t.formatMessage(qa.uploading)});for(let r=0;r<e.length;r++){const o=e[r],i=0===r,s=0===this.state.text.length?"":"\n",a=`${s}![${t.formatMessage(qa.uploadingFile,{fileName:o.name})}]()`,l=a.length,c=this.getSelection(),u=this.state.text,d=()=>Za(this,void 0,void 0,(function*(){this.setState({text:u}),yield Fi(100),this.setSelection(c)}));if(o.size>yo.config.max_image_size){this.appendError(t.formatMessage(qa.exceededSize,{fileName:o.name,maxImageSize:n}));continue}this.setState({text:Ms(this.state.text,c,a)},(()=>{zo(ro,{[this.props.id]:this.state.text})})),!i&&(yield Fi(5e3));const m=yield this.uploadImage(o);if(m instanceof Error){this.appendError(m.message),yield d();continue}const f=`${s}![${m.name}](${m.url})`;this.setState({text:Ms(this.state.text,[c[0],c[0]+l],f)},(()=>{zo(ro,{[this.props.id]:this.state.text})})),yield Fi(100);const p=c[0]+f.length;this.setSelection([p,p])}this.setState({errorLock:!1,isDisabled:!1,buttonText:null})}))}render(){const{theme:e,mode:t,simpleView:n,mix:r,uploadImage:o,autofocus:i,user:s,intl:a}=this.props,{isDisabled:l,isErrorShown:c,preview:u,text:d,buttonText:m}=this.state,f=yo.config.max_comment_size-d.length,p=this.props.errorMessage||this.state.errorMessage,h={main:v(Qr,{id:"commentForm.send",defaultMessage:"Send"}),edit:v(Qr,{id:"commentForm.save",defaultMessage:"Save"}),reply:v(Qr,{id:"commentForm.reply",defaultMessage:"Reply"})},g=m||h[t||"main"],y=a.formatMessage(qa.placeholder);return v("form",{className:Zr()("comment-form",{mods:{theme:e,type:t||"reply",simple:n},mix:r}),onSubmit:this.send,"aria-label":a.formatMessage(qa.newComment),onDragOver:this.onDragOver,onDrop:this.onDrop},!n&&v("div",{className:"comment-form__control-panel"},v(Aa,{intl:a,allowUpload:Boolean(o),uploadImages:this.uploadImages,textareaId:this.textareaId})),v("div",{className:"comment-form__field-wrapper"},v(Wa,null,v(Qi,{id:this.textareaId,ref:this.textareaRef,onPaste:this.onPaste,className:"comment-form__field",placeholder:y,value:d,onInput:this.onInput,onKeyDown:this.onKeyDown,disabled:l,autofocus:!!i,spellcheck:!0})),f<100&&v("span",{className:"comment-form__counter"},f)),(c||!!p)&&(p||a.formatMessage(qa.unexpectedError)).split("\n").map((e=>v("p",{className:"comment-form__error",role:"alert",key:e},e))),v("div",{className:"comment-form__actions"},s?v(b,null,v("div",null,!n&&v(xi,{kind:"secondary",theme:e,size:"large",mix:"comment-form__button",disabled:l,onClick:this.getPreview},v(Qr,{id:"commentForm.preview",defaultMessage:"Preview"})),v(xi,{kind:"primary",size:"large",mix:"comment-form__button",type:"submit",disabled:l},g)),!n&&"main"===t&&v("div",{className:"comment-form__rss"},this.renderMarkdownTip(),v(Qr,{id:"commentForm.subscribe-by",defaultMessage:"Subscribe by"})," ",v(Ps,{userId:null!==s?s.id:null}),yo.config.email_notifications&&yo.query.show_email_subscription&&v(b,null," ",v(Qr,{id:"commentForm.subscribe-or",defaultMessage:"or"})," ",v(js,null)))):v(b,null,v(gs,null),this.renderMarkdownTip())),!!u&&v("div",{className:"comment-form__preview-wrapper"},v("div",{className:Zr()("comment-form__preview",{mix:Zr()("raw-content",{},{theme:e})}),dangerouslySetInnerHTML:{__html:u}})))}}const Ja="THREAD/COLLAPSE_RESTORE",Ka="THREAD/COLLAPSE_SET";function Xa(){return JSON.parse(Ro(no)||"[]")}const el=()=>({type:Ja,ids:Xa().reduce(((e,t)=>{const n=t.split("_");return n[0]===po&&n[1]===go&&e.push(n[2]),e}),[])}),tl=(e,t)=>(n,r)=>{n({type:Ka,id:e,collapsed:t}),((e,t,n)=>{const r=n.map((n=>`${e}_${t}_${n}`)),o=Xa().filter((n=>-1===n.indexOf(`${e}_${t}`))),i=new Set([...o,...r]);Po(no,JSON.stringify([...i]))})(po,go,Object.entries(r().collapsedThreads).reduce(((e,[t,n])=>(n&&e.push(t),e)),[]))},nl=e=>t=>{const n=t.collapsedThreads[e.id];return null!=n?n:(e.score||0)<=yo.config.critical_score};let rl,ol;function il(){return ol&&rl||(rl=new WeakMap,ol=new window.IntersectionObserver((e=>{e.forEach((e=>{const t=rl.get(e.target);t&&t(e.isIntersecting)}))}),{rootMargin:"50px"})),{observer:ol,instanceMap:rl}}const sl=({children:e})=>{const[t,n]=me(!1),r=ge(null);return pe((()=>{const e=r.current,{observer:t,instanceMap:o}=il();if(e.base instanceof Element)return t.observe(e.base),o.set(e.base,n),()=>{e.base instanceof Element&&(t.unobserve(e.base),o.delete(e.base))}}),[]),e({inView:t,ref:r})};function al(){return(al=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ll(e){var{mix:t,theme:n,picture:r}=e,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["mix","theme","picture"]);return v("img",al({className:Zr()("avatar-icon",{mix:t},{theme:n,default:!r}),src:r||s(955).Z,alt:""},o))}function cl(){return(cl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class ul extends w{constructor(e){super(e),this.elemRef={current:null},this.state={time:e.time.getTime()}}componentDidMount(){this.start()}componentWillReceiveProps(e){e.time!==this.props.time&&(this.setState({time:e.time.getTime()}),this.start())}componentWillUnmount(){window.clearInterval(this.intervalID)}shouldComponentUpdate(){return!1}tick(){if(this.elemRef){const e=Math.max(0,(this.state.time-(new Date).getTime())/1e3).toFixed(0);this.elemRef.current.innerText=e,"0"===e&&(this.props.onTimePassed&&this.props.onTimePassed(),window.clearInterval(this.intervalID),this.intervalID=void 0)}}start(){this.intervalID&&clearInterval(this.intervalID),this.tick(),this.intervalID=window.setInterval((()=>{this.tick()}),1e3)}render(e){return v("span",cl({},function(e,...t){const n=Object.assign({},e);for(const e of t)delete n[e];return n}(e,"time","onTimePassed"),{ref:this.elemRef}))}}const dl={id:"vote.own-comment",defaultMessage:"Can't vote for your own comment"},ml={id:"vote.guest",defaultMessage:"Sign in to vote"},fl={id:"vote.only-post-page",defaultMessage:"Voting allowed only on post's page"},pl={id:"vote.readonly",defaultMessage:"Can't vote on read-only topics"},hl={id:"vote.deleted",defaultMessage:"Can't vote for deleted comment"},gl={id:"vote.anonymous",defaultMessage:"Anonymous users can't vote"},vl={id:"vote.only-positive",defaultMessage:"Only positive score allowed"};var yl;function _l(e,t){return{[yl.OWN_COMMENT]:t.formatMessage(dl),[yl.GUEST]:t.formatMessage(ml),[yl.ONLY_POST_PAGE]:t.formatMessage(fl),[yl.READONLY]:t.formatMessage(pl),[yl.DELETED]:t.formatMessage(hl),[yl.ANONYMOUS]:t.formatMessage(gl),[yl.ONLY_POSITIVE]:t.formatMessage(vl)}[e]}!function(e){e[e.OWN_COMMENT=0]="OWN_COMMENT",e[e.GUEST=1]="GUEST",e[e.ONLY_POST_PAGE=2]="ONLY_POST_PAGE",e[e.READONLY=3]="READONLY",e[e.DELETED=4]="DELETED",e[e.ANONYMOUS=5]="ANONYMOUS",e[e.ONLY_POSITIVE=6]="ONLY_POSITIVE"}(yl||(yl={}));const bl={id:"blockingDuration.permanently",defaultMessage:"Permanently"},wl={id:"blockingDuration.month",defaultMessage:"For a month"},Ml={id:"blockingDuration.week",defaultMessage:"For a week"},Sl={id:"blockingDuration.day",defaultMessage:"For a day"};function xl(e){return[{label:e.formatMessage(bl),value:"permanently"},{label:e.formatMessage(wl),value:"43200m"},{label:e.formatMessage(Ml),value:"10080m"},{label:e.formatMessage(Sl),value:"1440m"}]}function El(){return(El=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var kl=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const Ol={id:"comment.delete-message",defaultMessage:"Do you want to delete this comment?"},Nl={id:"comment.hide-user-comment",defaultMessage:"Do you want to hide comments of {userName}?"},jl={id:"comment.pin-comment",defaultMessage:"Do you want to pin this comment?"},Al={id:"comment.unpin-comment",defaultMessage:"Do you want to unpin this comment?"},Cl={id:"comment.verify-user",defaultMessage:"Do you want to verify {userName}?"},Il={id:"comment.unverify-user",defaultMessage:"Do you want to unverify {userName}?"},Ll={id:"comment.block-user",defaultMessage:"Do you want to block {userName} {duration}?"},Dl={id:"comment.unblock-user",defaultMessage:"Do you want to unblock this user?"},Tl={id:"comment.deleted-comment",defaultMessage:"This comment was deleted"},Pl={id:"comment.controversy",defaultMessage:"Controversy: {value}"},Rl={id:"comment.toggle-verification",defaultMessage:"Toggle verification"},Ul={id:"comment.verified-user",defaultMessage:"Verified user"},Fl={id:"comment.unverified-user",defaultMessage:"Unverified user"},zl={id:"comment.go-to-parent",defaultMessage:"Go to parent comment"},Bl={id:"comment.expired-time",defaultMessage:"Editing time has expired."};function Hl(e){const t=document.createElement("div");t.innerHTML=e.replace("</p><p>"," ");const n=t.innerText||"",r=n.substr(0,100);return 100===r.length&&100!==n.length?`${r}...`:r}function $l({time:e}){const t=Jr();return v(Qr,{id:"comment.time",defaultMessage:"{day} at {time}",values:{day:t.formatDate(e),time:t.formatTime(e)}})}const Vl=class extends w{constructor(){super(...arguments),this.votingPromise=Promise.resolve(),this.textNode={current:null},this.updateState=e=>{const t={scoreDelta:e.data.vote,cachedScore:e.data.score};if(e.inView&&(t.renderDummy=!1),e.user&&e.user.id===e.data.user.id){const n=yo.config.edit_duration,r=yo.serverClientTimeDiff||0,o=new Date(new Date(e.data.time).getTime()+r+1e3*n);o<new Date?t.editDeadline=null:t.editDeadline=o}return t},this.state=Object.assign({renderDummy:"boolean"==typeof this.props.inView&&!this.props.inView,isCopied:!1,editDeadline:null,voteErrorMessage:null,scoreDelta:0,cachedScore:this.props.data.score,initial:!0},this.updateState(this.props)),this.toggleReplying=()=>{const{editMode:e,setReplyEditState:t,data:n}=this.props;null==t||t({id:n.id,state:e===Qo.Reply?Qo.None:Qo.Reply})},this.toggleEditing=()=>{const{editMode:e,setReplyEditState:t,data:n}=this.props;null==t||t({id:n.id,state:e===Qo.Edit?Qo.None:Qo.Edit})},this.toggleUserInfoVisibility=()=>{if(!window.parent)return;const{user:e}=this.props.data,t=JSON.stringify({isUserInfoShown:!0,user:e});window.parent.postMessage(t,"*")},this.togglePin=()=>{const e=!this.props.data.pin,t=this.props.intl,n=e?t.formatMessage(jl):t.formatMessage(Al);window.confirm(n)&&this.props.setPinState(this.props.data.id,e)},this.toggleVerify=()=>{const e=!this.props.data.user.verified,t=this.props.data.user.id,n=this.props.intl,r=this.props.data.user.name,o=e?n.formatMessage(Cl,{userName:r}):n.formatMessage(Il,{userName:r});window.confirm(o)&&this.props.setVerifiedStatus(t,e)},this.onBlockUserClick=e=>{const t=e.target;"change"===e.type&&t.blur(),this.blockUser(t.value)},this.blockUser=function(e,t=1e3){let n;return function(...r){window.clearTimeout(n),n=window.setTimeout((()=>e.apply(this,r)),t)}}((e=>{const{user:t}=this.props.data,n=xl(this.props.intl).find((t=>t.value===e));if(!n)return;const r=n.label,o=this.props.intl.formatMessage(Ll,{userName:t.name,duration:r.toLowerCase()});window.confirm(o)&&this.props.blockUser(t.id,t.name,e)}),100),this.onUnblockUserClick=()=>{const{user:e}=this.props.data,t=this.props.intl.formatMessage(Dl);window.confirm(t)&&this.props.unblockUser(e.id)},this.deleteComment=()=>{const e=this.props.intl.formatMessage(Ol);window.confirm(e)&&(this.props.setReplyEditState({id:this.props.data.id,state:Qo.None}),this.props.removeComment(this.props.data.id))},this.hideUser=()=>{const e=this.props.intl.formatMessage(Nl,{userName:this.props.data.user.name});window.confirm(e)&&this.props.hideUser(this.props.data.user)},this.handleVoteError=(e,t,n)=>{this.setState({scoreDelta:n,cachedScore:t,voteErrorMessage:So(e,this.props.intl)})},this.sendVotingRequest=(e,t,n)=>{this.votingPromise=this.votingPromise.then((()=>this.props.putCommentVote(this.props.data.id,e))).catch((e=>this.handleVoteError(e,t,n)))},this.increaseScore=()=>{const{cachedScore:e,scoreDelta:t}=this.state;1!==t&&(this.setState({scoreDelta:t+1,cachedScore:e+1,voteErrorMessage:null}),this.sendVotingRequest(1,e,t))},this.decreaseScore=()=>{const{cachedScore:e,scoreDelta:t}=this.state;-1!==t&&(this.setState({scoreDelta:t-1,cachedScore:e-1,voteErrorMessage:null}),this.sendVotingRequest(-1,e,t))},this.addComment=(e,t,n)=>kl(this,void 0,void 0,(function*(){yield this.props.addComment(e,t,n),this.props.setReplyEditState({id:this.props.data.id,state:Qo.None})})),this.updateComment=(e,t)=>kl(this,void 0,void 0,(function*(){yield this.props.updateComment(e,t),this.props.setReplyEditState({id:this.props.data.id,state:Qo.None})})),this.scrollToParent=e=>{const{data:{pid:t}}=this.props;e.preventDefault();const n=document.getElementById(`remark42__comment-${t}`);n&&(Ui({scrollTo:n.getBoundingClientRect().top})||n.scrollIntoView())},this.copyComment=()=>{!function(e){const t=document.createElement("textarea"),n=document.activeElement;t.value=e,t.setAttribute("readonly",""),Object.assign(t.style,{contain:"strict",position:"absolute",left:"-9999px",fontSize:"12pt"});const r=document.getSelection();let o=!1;r&&r.rangeCount>0&&(o=r.getRangeAt(0)),document.body.append(t),t.select(),t.selectionStart=0,t.selectionEnd=e.length;let i=!1;try{i=document.execCommand("copy")}catch(e){}t.remove(),r&&o&&(r.removeAllRanges(),r.addRange(o)),n&&n.focus()}(`<b>${this.props.data.user.name}</b>&nbsp;${this.props.data.time}<br>${(this.textNode.current.textContent||"").replace(/\n+/g,"<br>")}`),this.setState({isCopied:!0},(()=>{setTimeout((()=>this.setState({isCopied:!1})),3e3)}))},this.isAdmin=()=>!!this.props.user&&this.props.user.admin,this.isGuest=()=>!this.props.user,this.isAnonymous=()=>ws(this.props.user),this.isCurrentUser=()=>!this.isGuest()&&this.props.data.user.id===this.props.user.id,this.getDownvoteDisabledReason=()=>{const e=this.props.intl;return"main"!==this.props.view&&"pinned"!==this.props.view?_l(yl.ONLY_POST_PAGE,e):this.props.post_info.read_only?_l(yl.READONLY,e):this.props.data.delete?_l(yl.DELETED,e):this.isCurrentUser()?_l(yl.OWN_COMMENT,e):yo.config.positive_score&&this.props.data.score<1?_l(yl.ONLY_POSITIVE,e):this.isGuest()?_l(yl.GUEST,e):this.isAnonymous()&&!yo.config.anon_vote?_l(yl.ANONYMOUS,e):null},this.getUpvoteDisabledReason=()=>{const e=this.props.intl;return"main"!==this.props.view&&"pinned"!==this.props.view?_l(yl.ONLY_POST_PAGE,e):this.props.post_info.read_only?_l(yl.READONLY,e):this.props.data.delete?_l(yl.DELETED,e):this.isCurrentUser()?_l(yl.OWN_COMMENT,e):this.isGuest()?_l(yl.GUEST,e):this.isAnonymous()&&!yo.config.anon_vote?_l(yl.ANONYMOUS,e):null},this.getCommentControls=()=>{const e=this.isAdmin(),t=this.isCurrentUser(),n=[];if(this.props.data.delete)return n;if("main"!==this.props.view&&"pinned"!==this.props.view)return n;if(e&&(n.push(this.state.isCopied?v("span",{className:"comment__control comment__control_view_inactive"},v(Qr,{id:"comment.copied",defaultMessage:"Copied!"})):v(xi,El({kind:"link"},Ni(this.copyComment),{mix:"comment__control"}),v(Qr,{id:"comment.copy",defaultMessage:"Copy"}))),n.push(v(xi,El({kind:"link"},Ni(this.togglePin),{mix:"comment__control"}),this.props.data.pin?v(Qr,{id:"comment.unpin",defaultMessage:"Unpin"}):v(Qr,{id:"comment.pin",defaultMessage:"Pin"})))),t||n.push(v(xi,El({kind:"link"},Ni(this.hideUser),{mix:"comment__control"}),v(Qr,{id:"comment.hide",defaultMessage:"Hide"}))),e){this.props.isUserBanned&&n.push(v(xi,El({kind:"link"},Ni(this.onUnblockUserClick),{mix:"comment__control"}),v(Qr,{id:"comment.unblock",defaultMessage:"Unblock"})));const e=xl(this.props.intl);this.props.user.id===this.props.data.user.id||this.props.isUserBanned||n.push(v("span",{className:"comment__control comment__control_select-label"},v(Qr,{id:"comment.block",defaultMessage:"Block"}),v("select",{className:"comment__control_select",onBlur:this.onBlockUserClick,onChange:this.onBlockUserClick},v("option",{disabled:!0,selected:!0,value:void 0},v(Qr,{id:"comment.blocking-period",defaultMessage:"Blocking period"})),e.map((e=>v("option",{value:e.value},e.label)))))),this.props.data.delete||n.push(v(xi,El({kind:"link"},Ni(this.deleteComment),{mix:"comment__control"}),v(Qr,{id:"comment.delete",defaultMessage:"Delete"})))}return n}}componentWillReceiveProps(e){this.setState(this.updateState(e))}componentDidMount(){this.setState({initial:!1})}render(e,t){const n=this.isAdmin(),r=this.isGuest(),o=this.isCurrentUser(),i=e.editMode===Qo.Reply,s=e.editMode===Qo.Edit,a=yo.config.low_score,l=this.getDownvoteDisabledReason(),c=null!==l,u=this.getUpvoteDisabledReason(),d=null!==u,m=0===e.repliesCount&&t.editDeadline,f=!yo.config.positive_score,p=this.isAnonymous()?void 0:this.props.uploadImage,h=this.getCommentControls(),g=e.intl,y=this.props.CommentForm,_=Object.assign(Object.assign({},e.data),{controversyText:g.formatMessage(Pl,{value:(e.data.controversy||0).toFixed(2)}),text:"preview"===e.view?Hl(e.data.text):e.data.delete?g.formatMessage(Tl):e.data.text,time:new Date(e.data.time),orig:s?e.data.orig&&e.data.orig.replace(/&[#A-Za-z0-9]+;/gi,(e=>{const t=document.createElement("span");return t.innerHTML=e,t.innerText})):e.data.orig,score:{value:Math.abs(t.cachedScore),sign:f?t.cachedScore>0?"+":t.cachedScore<0?"−":null:"",view:t.cachedScore>0?"positive":t.cachedScore<0?"negative":void 0},user:Object.assign(Object.assign({},e.data.user),{picture:0===e.data.user.picture.indexOf(to)?`${eo}${e.data.user.picture}`:e.data.user.picture})}),b={disabled:e.disabled,pinned:e.data.pin,useless:!!e.isUserBanned||!!e.data.delete||"preview"!==e.view&&e.data.score<a&&!e.data.pin&&!e.disabled,guest:r,view:"main"===e.view||"pinned"===e.view?e.data.user.admin&&"admin":e.view,replying:"main"===e.view&&i,editing:"main"===e.view&&s,theme:"preview"===e.view?void 0:e.theme,level:e.level,collapsed:e.collapsed};if("preview"===e.view)return v("article",{className:Zr()("comment",{mix:e.mix},b)},v("div",{className:"comment__body"},!!_.title&&v("div",{className:"comment__title"},v("a",{className:"comment__title-link",href:`${_.locator.url}#remark42__comment-${_.id}`},_.title)),v("div",{className:"comment__info"},!!_.title&&_.user.name,!_.title&&v("a",{href:`${_.locator.url}#remark42__comment-${_.id}`,className:"comment__username"},_.user.name))," ",v("div",{className:Zr()("comment__text",{mix:Zr()("raw-content",{},{theme:e.theme})}),dangerouslySetInnerHTML:{__html:_.text}})));if(this.state.renderDummy&&!e.editMode){const[t,n]=this.base?[this.base.scrollWidth,this.base.scrollHeight]:[100,100];return v("article",{id:e.disabled?void 0:`remark42__comment-${_.id}`,style:{width:`${t}px`,height:`${n}px`}})}const w=g.formatMessage(zl);return v("article",{className:Zr()("comment",{mix:this.props.mix},b),id:e.disabled?void 0:`remark42__comment-${_.id}`},"user"===e.view&&_.title&&v("div",{className:"comment__title"},v("a",{className:"comment__title-link",href:`${_.locator.url}#remark42__comment-${_.id}`},_.title)),v("div",{className:"comment__info"},"user"!==e.view&&!e.collapsed&&v(ll,{mix:"comment__avatar",theme:this.props.theme,picture:_.user.picture}),"user"!==e.view&&v("span",El({},Ni(this.toggleUserInfoVisibility),{className:"comment__username",title:_.user.id}),_.user.name),n&&"user"!==e.view&&v("span",El({},Ni(this.toggleVerify),{"aria-label":g.formatMessage(Rl),title:_.user.verified?g.formatMessage(Ul):g.formatMessage(Fl),className:Zr()("comment__verification",{},{active:_.user.verified,clickable:!0})})),!n&&!!_.user.verified&&"user"!==e.view&&v("span",{title:g.formatMessage(Ul),className:Zr()("comment__verification",{},{active:!0})}),v("a",{href:`${_.locator.url}#remark42__comment-${_.id}`,className:"comment__time"},v($l,{time:_.time})),!!e.level&&e.level>0&&"main"===e.view&&v("a",{className:"comment__link-to-parent",href:`${_.locator.url}#remark42__comment-${_.pid}`,"aria-label":w,title:w,onClick:e=>this.scrollToParent(e)}," "),e.isUserBanned&&"user"!==e.view&&v("span",{className:"comment__status"},v(Qr,{id:"comment.blocked-user",defaultMessage:"Blocked"})),n&&!e.isUserBanned&&e.data.delete&&v("span",{className:"comment__status"},v(Qr,{id:"comment.deleted-user",defaultMessage:"Deleted"})),v("span",{className:Zr()("comment__score",{},{view:_.score.view})},v("span",El({className:Zr()("comment__vote",{},{type:"up",selected:1===t.scoreDelta,disabled:d}),"aria-disabled":1===t.scoreDelta||d?"true":"false"},Ni(d?void 0:this.increaseScore),{title:u||void 0}),"Vote up"),v("span",{className:"comment__score-value",title:_.controversyText},_.score.sign,_.score.value),v("span",El({className:Zr()("comment__vote",{},{type:"down",selected:-1===t.scoreDelta,disabled:c}),"aria-disabled":-1===t.scoreDelta||d?"true":"false"},Ni(c?void 0:this.decreaseScore),{title:l||void 0}),"Vote down"))),v("div",{className:"comment__body"},!!t.voteErrorMessage&&v("div",{className:"voting__error",role:"alert"},v(Qr,{id:"comment.vote-error",defaultMessage:"Voting error: {voteErrorMessage}",values:{voteErrorMessage:t.voteErrorMessage}})),(!e.collapsed||"pinned"===e.view)&&v("div",{className:Zr()("comment__text",{mix:Zr()("raw-content",{},{theme:e.theme})}),ref:this.textNode,dangerouslySetInnerHTML:{__html:_.text}}),(!e.collapsed||"pinned"===e.view)&&v("div",{className:"comment__actions"},!e.data.delete&&!e.isCommentsDisabled&&!e.disabled&&"main"===e.view&&v(xi,El({kind:"link"},Ni(this.toggleReplying),{mix:"comment__action"}),v(Qr,i?{id:"comment.cancel",defaultMessage:"Cancel"}:{id:"comment.reply",defaultMessage:"Reply"})),!e.data.delete&&!e.disabled&&!!_.orig&&o&&(m||s)&&"main"===e.view&&[v(xi,El({kind:"link"},Ni(this.toggleEditing),{mix:["comment__action","comment__action_type_edit"]}),v(Qr,s?{id:"comment.cancel",defaultMessage:"Cancel"}:{id:"comment.edit",defaultMessage:"Edit"})),!n&&v(xi,El({kind:"link"},Ni(this.deleteComment),{mix:["comment__action","comment__action_type_delete"]}),v(Qr,{id:"comment.delete",defaultMessage:"Delete"})),t.editDeadline&&v(ul,{className:"comment__edit-timer",time:t.editDeadline,onTimePassed:()=>this.setState({editDeadline:null})})],h.length>0&&v("span",{className:"comment__controls"},h))),y&&i&&"main"===e.view&&v(y,{id:_.id,intl:this.props.intl,user:e.user,theme:e.theme,mode:"reply",mix:"comment__input",onSubmit:(e,t)=>this.addComment(e,t,_.id),onCancel:this.toggleReplying,getPreview:this.props.getPreview,autofocus:!0,uploadImage:p,simpleView:yo.config.simple_view}),y&&s&&"main"===e.view&&v(y,{id:_.id,intl:this.props.intl,user:e.user,theme:e.theme,value:_.orig,mode:"edit",mix:"comment__input",onSubmit:t=>this.updateComment(e.data.id,t),onCancel:this.toggleEditing,getPreview:this.props.getPreview,errorMessage:null===t.editDeadline?g.formatMessage(Bl):void 0,autofocus:!0,uploadImage:p,simpleView:yo.config.simple_view}))}},Wl=e=>{const t=Pt();return ye((()=>Object.entries(e).reduce(((e,[n,r])=>(e[n]=(...e)=>t(r(...e)),e)),{})),[t,...Object.values(e)])};function Zl(){return(Zl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Gl={addComment:di,updateComment:mi,removeComment:e=>(t,n)=>ui(void 0,void 0,void 0,(function*(){const r=n().user;if(!r)return;r.admin?yield(e=>Ao.delete(`/comment/${e}`,{url:go}))(e):yield(e=>No.put(`/comment/${e}`,{url:go},{delete:!0}))(e);let o=n().comments.allComments[e];o=Object.assign(Object.assign({},o),{delete:!0,edit:{summary:"",time:(new Date).toISOString()}}),t({type:oi,comment:o})})),setReplyEditState:e=>t=>{null!==e&&e.state===Qo.None&&(e=null),t(pi(e))},setPinState:(e,t)=>(n,r)=>ui(void 0,void 0,void 0,(function*(){t?yield(e=>Ao.put(`/pin/${e}`,{url:go,pin:1}))(e):yield(e=>Ao.put(`/pin/${e}`,{url:go,pin:0}))(e);let o=r().comments.allComments[e];o=Object.assign(Object.assign({},o),{pin:t,edit:{summary:"",time:(new Date).toISOString()}}),n({type:oi,comment:o})})),putCommentVote:(e,t)=>n=>ui(void 0,void 0,void 0,(function*(){yield(({id:e,value:t})=>No.put(`/vote/${e}`,{url:go,vote:t}))({id:e,value:t});const r=yield(e=>No.get(`/id/${e}`,{url:go}))(e);n({type:oi,comment:r})})),blockUser:vi,unblockUser:yi,hideUser:bi,setVerifiedStatus:(e,t)=>(n,r)=>hi(void 0,void 0,void 0,(function*(){t?yield(e=>Ao.put(`/verify/${e}`,{verified:1}))(e):yield(e=>Ao.put(`/verify/${e}`,{verified:0}))(e);const o=Object.values(r().comments.allComments).filter((t=>t.user.id===e));if(!o.length)return;const i=o[0].user;n({type:ii,ids:o.map((e=>e.id)),patch:{user:Object.assign(Object.assign({},i),{verified:t})}})}))},Yl=e=>{const t=(r=Dt().getState(),{editMode:(n=(o=e).data.id,e=>null===e.comments.activeComment||e.comments.activeComment.id!==n?Qo.None:e.comments.activeComment.state)(r),user:r.user,isUserBanned:o.data.user.block||void 0!==r.bannedUsers.find((e=>e.id===o.data.user.id)),post_info:r.info,isCommentsDisabled:r.info.read_only||!1,theme:r.theme,collapsed:nl(o.data)(r),getPreview:Co,uploadImage:Lo});var n,r,o;const i=Wl(Gl),s=Jr();return v(Vl,Zl({},e,t,i,{intl:s}))};function ql(){return(ql=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Ql=({id:e,level:t,mix:n,getPreview:r})=>{const o=Pt(),i=Jr(),{collapsed:s,comment:a,childs:l,theme:c}=Ft((e=>t=>{const{theme:n,comments:r}=t,{allComments:o,childComments:i}=r,s=o[e];return{comment:s,childs:i[e],collapsed:nl(s)(t),theme:n}})(e),Bt),u=_e((()=>{o(tl(e,!s))}),[e,s,o]);if(a.hidden)return null;const d=t>0,m=l?l.length:0;return v("div",{className:Zr()("thread",{mix:n},{level:t,theme:c,indented:d}),role:["listitem"].concat(!s&&m?"list":[]).join(" "),"aria-expanded":!s},v(sl,null,(n=>v(Yl,{CommentForm:Qa,ref:n.ref,key:`comment-${e}`,view:"main",intl:i,data:a,repliesCount:m,level:t,inView:n.inView}))),!s&&l&&!!l.length&&l.map((e=>v(Ql,{key:`thread-${e}`,id:e,level:Math.min(t+1,6),getPreview:r}))),t<6&&v("div",ql({className:Zr()("thread__collapse",{mods:{collapsed:s}})},Ni(u)),v("div",null)))};function Jl(){return(Jl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Kl=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const Xl=e=>({sort:e.comments.sort,isCommentsLoading:e.comments.isFetching,user:e.user,childToParentComments:Object.entries(e.comments.childComments).reduce(((e,[t,n])=>(n.forEach((n=>e[n]=t)),e)),{}),collapsedThreads:e.collapsedThreads,topComments:e.comments.topComments,pinnedComments:e.comments.pinnedComments.map((t=>e.comments.allComments[t])).filter((e=>!e.hidden)),theme:e.theme,info:e.info,hiddenUsers:e.hiddenUsers,blockedUsers:e.bannedUsers,getPreview:Co,uploadImage:Lo}),ec={updateSorting:function(e){return(t,n)=>ui(this,void 0,void 0,(function*(){const{sort:r}=n().comments;t({type:ci,payload:e});try{yield t(fi(e)),Po(io,e)}catch(e){t({type:ci,payload:r})}}))},fetchComments:fi,setUser:gi,fetchUser:()=>e=>hi(void 0,void 0,void 0,(function*(){const t=yield Io();return e(gi(t)),t})),fetchBlockedUsers:()=>e=>hi(void 0,void 0,void 0,(function*(){const t=(yield Ao.get("/blocked"))||[];return e({type:$o,list:t}),t})),setTheme:e=>t=>t({type:Mi,theme:e}),setCommentsReadOnlyState:function(e){return(t,n)=>function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const{info:r}=n();yield e?Ao.put("/readonly",{url:go,ro:1}):Ao.put("/readonly",{url:go,ro:0}),t(pi()),t(Ko(Object.assign(Object.assign({},r),{read_only:e})))}))},blockUser:vi,unblockUser:yi,hideUser:bi,unhideUser:e=>(t,n)=>{const r=Bo();Object.prototype.hasOwnProperty.call(r,e)&&delete r[e],Po(oo,JSON.stringify(r)),t({type:Yo,id:e})},addComment:di,updateComment:mi,setCollapse:tl,unsetCommentMode:pi},tc={id:"root.pinned-comments",defaultMessage:"Pinned comments"};class nc extends w{constructor(){super(...arguments),this.state={isUserLoading:!0,commentsShown:vo,wasSomeoneUnblocked:!1,isSettingsVisible:!1},this.changeSort=e=>Kl(this,void 0,void 0,(function*(){e!==this.props.sort&&(yield this.props.updateSorting(e))})),this.logout=()=>Kl(this,void 0,void 0,(function*(){yield jo.get("/logout"),this.props.setUser(),this.props.unsetCommentMode(),localStorage.removeItem(so),yield this.props.fetchComments()})),this.checkUrlHash=e=>{const t=e?`#${e.newURL.split("#")[1]}`:window.location.hash;0===t.indexOf("#remark42__comment-")&&(e&&e.preventDefault(),document.querySelector(t)||((e,t,n)=>{const r=[];let o=e.replace("#remark42__comment-","");for(;t[o];)o=t[o],n[o]&&r.push(o);return r})(t,this.props.childToParentComments,this.props.collapsedThreads).forEach((e=>this.props.setCollapse(e,!1))),setTimeout((()=>{const e=document.querySelector(t);e&&(Ui({scrollTo:e.getBoundingClientRect().top}),e.classList.add("comment_highlighting"),setTimeout((()=>{e.classList.remove("comment_highlighting")}),5e3))}),500))},this.onBlockedUsersShow=()=>Kl(this,void 0,void 0,(function*(){this.props.user&&this.props.user.admin&&(yield this.props.fetchBlockedUsers()),this.setState({isSettingsVisible:!0})})),this.onBlockedUsersHide=()=>Kl(this,void 0,void 0,(function*(){this.state.wasSomeoneUnblocked&&this.props.fetchComments(),this.setState({wasSomeoneUnblocked:!1,isSettingsVisible:!1})})),this.onUnblockSomeone=()=>{this.setState({wasSomeoneUnblocked:!0})},this.showMore=()=>{this.setState({commentsShown:this.state.commentsShown+10})}}componentWillMount(){const e=this.props.fetchUser().finally((()=>this.setState({isUserLoading:!1})));Promise.all([e,this.props.fetchComments()]).finally((()=>{Ui({remarkIframeHeight:document.body.offsetHeight}),setTimeout(this.checkUrlHash),window.addEventListener("hashchange",this.checkUrlHash)})),window.addEventListener("message",this.onMessage.bind(this))}onMessage(e){if(e.data)try{const t="string"==typeof e.data?JSON.parse(e.data):e.data;t.theme&&ao.includes(t.theme)&&this.props.setTheme(t.theme)}catch(e){}}render(e,{isUserLoading:t,commentsShown:n,isSettingsVisible:r}){if(t)return v(Ei,{mix:"root__preloader"});const o=e.info.read_only,i=ws(this.props.user)?void 0:this.props.uploadImage;return v(b,null,v(bs,{user:this.props.user,hiddenUsers:this.props.hiddenUsers,onSortChange:this.changeSort,isCommentsDisabled:o,postInfo:this.props.info,onSignOut:this.logout,onBlockedUsersShow:this.onBlockedUsersShow,onBlockedUsersHide:this.onBlockedUsersHide,onCommentsChangeReadOnlyMode:this.props.setCommentsReadOnlyState}),v("div",{className:"root__main"},r?v(Pi,{intl:this.props.intl,user:this.props.user,hiddenUsers:this.props.hiddenUsers,blockedUsers:this.props.blockedUsers,blockUser:this.props.blockUser,unblockUser:this.props.unblockUser,hideUser:this.props.hideUser,unhideUser:this.props.unhideUser,onUnblockSomeone:this.onUnblockSomeone}):v(b,null,!o&&v(Qa,{id:encodeURI(go||""),intl:this.props.intl,theme:e.theme,mix:"root__input",mode:"main",user:e.user,onSubmit:(e,t)=>this.props.addComment(e,t),getPreview:this.props.getPreview,uploadImage:i,simpleView:yo.config.simple_view}),this.props.pinnedComments.length>0&&v("div",{className:"root__pinned-comments",role:"region","aria-label":this.props.intl.formatMessage(tc)},this.props.pinnedComments.map((e=>v(Yl,{CommentForm:Qa,intl:this.props.intl,key:`pinned-comment-${e.id}`,view:"pinned",data:e,level:0,disabled:!0,mix:"root__pinned-comment"})))),!!this.props.topComments.length&&!e.isCommentsLoading&&v("div",{className:"root__threads",role:"list"},(lo&&n<this.props.topComments.length?this.props.topComments.slice(0,n):this.props.topComments).map((e=>v(Ql,{key:`thread-${e}`,id:e,mix:"root__thread",level:0,getPreview:this.props.getPreview}))),n<this.props.topComments.length&&lo&&v(xi,{kind:"primary",size:"middle",mix:"root__show-more",onClick:this.showMore},v(Qr,{id:"root.show-more",defaultMessage:"Show more"}))),e.isCommentsLoading&&v("div",{className:"root__threads",role:"list"},v(Ei,{mix:"root__preloader"})))))}}const rc=e=>v("a",{class:"root__copyright-link",href:"https://remark42.com/"},e),oc=()=>{const e=Ft(Xl),t=Wl(ec),n=Jr();return v("div",{className:Xr()(Zr()("root",{},{theme:e.theme}),e.theme)},v(nc,Jl({},e,t,{intl:n})),v("p",{className:"root__copyright",role:"contentinfo"},v(Qr,{id:"root.powered-by",defaultMessage:"Powered by <a>Remark42</a>",values:{a:rc}})))},ic=mo(),sc=(ic.isDefaultPicture,ic.id,ic.name,ic.picture,"USER-INFO/SET");const ac=({comments:e,isLoading:t})=>{const n=Jr();return t?v(Ei,{mix:"user-info__preloader"}):v(b,null,e.map((e=>v(Vl,{CommentForm:null,intl:n,data:e,level:0,view:"user",user:null,isCommentsDisabled:!1,theme:"light",post_info:null}))))};function lc(){return(lc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const cc={fetchInfo:()=>e=>function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function*(){if(!ic.id)return null;const t=yield(n=ic.id,10,No.get("/comments",{user:n,limit:10}));var n;return e({type:sc,id:ic.id,comments:t.comments}),t.comments}))},uc={id:"user-info.unexpected-error",defaultMessage:"Something went wrong"};class dc extends w{constructor(){super(...arguments),this.state={isLoading:!0,error:null}}componentWillMount(){!this.props.comments&&this.state.isLoading&&this.props.fetchInfo().then((()=>{this.setState({isLoading:!1})})).catch((()=>{this.setState({isLoading:!1,error:this.props.intl.formatMessage(uc)})})),document.addEventListener("keydown",dc.onKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",dc.onKeyDown)}render(){const e=ic,{comments:t=[]}=this.props,{isLoading:n}=this.state;return e?v("div",{className:Zr()("root user-info",{})},v(ll,{mix:"user-info__avatar",picture:e.picture}),v("p",{className:"user-info__title"},v(Qr,{id:"user-info.last-comments",defaultMessage:"Last comments by {userName}",values:{userName:e.name}})),v("p",{className:"user-info__id"},e.id),!!t&&v(ac,{isLoading:n,comments:t})):null}static onKeyDown(e){27===e.keyCode&&Ui({isUserInfoShown:!1})}}const mc=e=>e.userComments[ic.id],fc=()=>{const e=Ft(mc),t=Wl(cc),n=Jr();return v(dc,lc({comments:e},t,{intl:n}))};function pc(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(o){return"function"==typeof o?o(n,r,e):t(o)}}}}var hc=pc();hc.withExtraArgument=pc;const gc=hc,vc=function(e,t){return e===t||e!=e&&t!=t},yc=function(e,t){for(var n=e.length;n--;)if(vc(e[n][0],t))return n;return-1};var _c=Array.prototype.splice;function bc(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}bc.prototype.clear=function(){this.__data__=[],this.size=0},bc.prototype.delete=function(e){var t=this.__data__,n=yc(t,e);return!(n<0||(n==t.length-1?t.pop():_c.call(t,n,1),--this.size,0))},bc.prototype.get=function(e){var t=this.__data__,n=yc(t,e);return n<0?void 0:t[n][1]},bc.prototype.has=function(e){return yc(this.__data__,e)>-1},bc.prototype.set=function(e,t){var n=this.__data__,r=yc(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};const wc=bc,Mc="object"==typeof global&&global&&global.Object===Object&&global;var Sc="object"==typeof self&&self&&self.Object===Object&&self;const xc=Mc||Sc||Function("return this")(),Ec=xc.Symbol;var kc=Object.prototype,Oc=kc.hasOwnProperty,Nc=kc.toString,jc=Ec?Ec.toStringTag:void 0;var Ac=Object.prototype.toString;var Cc=Ec?Ec.toStringTag:void 0;const Ic=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Cc&&Cc in Object(e)?function(e){var t=Oc.call(e,jc),n=e[jc];try{e[jc]=void 0;var r=!0}catch(e){}var o=Nc.call(e);return r&&(t?e[jc]=n:delete e[jc]),o}(e):function(e){return Ac.call(e)}(e)},Lc=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Dc=function(e){if(!Lc(e))return!1;var t=Ic(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Tc=xc["__core-js_shared__"];var Pc,Rc=(Pc=/[^.]+$/.exec(Tc&&Tc.keys&&Tc.keys.IE_PROTO||""))?"Symbol(src)_1."+Pc:"";var Uc=Function.prototype.toString;const Fc=function(e){if(null!=e){try{return Uc.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var zc=/^\[object .+?Constructor\]$/,Bc=Function.prototype,Hc=Object.prototype,$c=Bc.toString,Vc=Hc.hasOwnProperty,Wc=RegExp("^"+$c.call(Vc).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Zc=function(e){return!(!Lc(e)||(t=e,Rc&&Rc in t))&&(Dc(e)?Wc:zc).test(Fc(e));var t},Gc=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Zc(n)?n:void 0},Yc=Gc(xc,"Map"),qc=Gc(Object,"create");var Qc=Object.prototype.hasOwnProperty;var Jc=Object.prototype.hasOwnProperty;function Kc(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Kc.prototype.clear=function(){this.__data__=qc?qc(null):{},this.size=0},Kc.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Kc.prototype.get=function(e){var t=this.__data__;if(qc){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Qc.call(t,e)?t[e]:void 0},Kc.prototype.has=function(e){var t=this.__data__;return qc?void 0!==t[e]:Jc.call(t,e)},Kc.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=qc&&void 0===t?"__lodash_hash_undefined__":t,this};const Xc=Kc,eu=function(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map};function tu(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}tu.prototype.clear=function(){this.size=0,this.__data__={hash:new Xc,map:new(Yc||wc),string:new Xc}},tu.prototype.delete=function(e){var t=eu(this,e).delete(e);return this.size-=t?1:0,t},tu.prototype.get=function(e){return eu(this,e).get(e)},tu.prototype.has=function(e){return eu(this,e).has(e)},tu.prototype.set=function(e,t){var n=eu(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};const nu=tu;function ru(e){var t=this.__data__=new wc(e);this.size=t.size}ru.prototype.clear=function(){this.__data__=new wc,this.size=0},ru.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ru.prototype.get=function(e){return this.__data__.get(e)},ru.prototype.has=function(e){return this.__data__.has(e)},ru.prototype.set=function(e,t){var n=this.__data__;if(n instanceof wc){var r=n.__data__;if(!Yc||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new nu(r)}return n.set(e,t),this.size=n.size,this};const ou=ru;function iu(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new nu;++t<n;)this.add(e[t])}iu.prototype.add=iu.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},iu.prototype.has=function(e){return this.__data__.has(e)};const su=iu,au=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},lu=function(e,t,n,r,o,i){var s=1&n,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var d=-1,m=!0,f=2&n?new su:void 0;for(i.set(e,t),i.set(t,e);++d<a;){var p=e[d],h=t[d];if(r)var g=s?r(h,p,d,t,e,i):r(p,h,d,e,t,i);if(void 0!==g){if(g)continue;m=!1;break}if(f){if(!au(t,(function(e,t){if(s=t,!f.has(s)&&(p===e||o(p,e,n,r,i)))return f.push(t);var s}))){m=!1;break}}else if(p!==h&&!o(p,h,n,r,i)){m=!1;break}}return i.delete(e),i.delete(t),m},cu=xc.Uint8Array,uu=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},du=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n};var mu=Ec?Ec.prototype:void 0,fu=mu?mu.valueOf:void 0;const pu=Array.isArray;var hu=Object.prototype.propertyIsEnumerable,gu=Object.getOwnPropertySymbols;const vu=gu?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var s=e[n];t(s,n,e)&&(i[o++]=s)}return i}(gu(e),(function(t){return hu.call(e,t)})))}:function(){return[]},yu=function(e){return null!=e&&"object"==typeof e},_u=function(e){return yu(e)&&"[object Arguments]"==Ic(e)};var bu=Object.prototype,wu=bu.hasOwnProperty,Mu=bu.propertyIsEnumerable;const Su=_u(function(){return arguments}())?_u:function(e){return yu(e)&&wu.call(e,"callee")&&!Mu.call(e,"callee")};var xu="object"==typeof exports&&exports&&!exports.nodeType&&exports,Eu=xu&&"object"==typeof module&&module&&!module.nodeType&&module,ku=Eu&&Eu.exports===xu?xc.Buffer:void 0;const Ou=(ku?ku.isBuffer:void 0)||function(){return!1};var Nu=/^(?:0|[1-9]\d*)$/;const ju=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Nu.test(e))&&e>-1&&e%1==0&&e<t},Au=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var Cu={};Cu["[object Float32Array]"]=Cu["[object Float64Array]"]=Cu["[object Int8Array]"]=Cu["[object Int16Array]"]=Cu["[object Int32Array]"]=Cu["[object Uint8Array]"]=Cu["[object Uint8ClampedArray]"]=Cu["[object Uint16Array]"]=Cu["[object Uint32Array]"]=!0,Cu["[object Arguments]"]=Cu["[object Array]"]=Cu["[object ArrayBuffer]"]=Cu["[object Boolean]"]=Cu["[object DataView]"]=Cu["[object Date]"]=Cu["[object Error]"]=Cu["[object Function]"]=Cu["[object Map]"]=Cu["[object Number]"]=Cu["[object Object]"]=Cu["[object RegExp]"]=Cu["[object Set]"]=Cu["[object String]"]=Cu["[object WeakMap]"]=!1;var Iu="object"==typeof exports&&exports&&!exports.nodeType&&exports,Lu=Iu&&"object"==typeof module&&module&&!module.nodeType&&module,Du=Lu&&Lu.exports===Iu&&Mc.process,Tu=function(){try{return Lu&&Lu.require&&Lu.require("util").types||Du&&Du.binding&&Du.binding("util")}catch(e){}}(),Pu=Tu&&Tu.isTypedArray;const Ru=Pu?(Uu=Pu,function(e){return Uu(e)}):function(e){return yu(e)&&Au(e.length)&&!!Cu[Ic(e)]};var Uu,Fu=Object.prototype.hasOwnProperty;const zu=function(e,t){var n=pu(e),r=!n&&Su(e),o=!n&&!r&&Ou(e),i=!n&&!r&&!o&&Ru(e),s=n||r||o||i,a=s?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=a.length;for(var c in e)!t&&!Fu.call(e,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ju(c,l))||a.push(c);return a};var Bu=Object.prototype;const Hu=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object);var $u=Object.prototype.hasOwnProperty;const Vu=function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||Bu))return Hu(e);var t,n,r=[];for(var o in Object(e))$u.call(e,o)&&"constructor"!=o&&r.push(o);return r},Wu=function(e){return null!=(t=e)&&Au(t.length)&&!Dc(t)?zu(e):Vu(e);var t},Zu=function(e){return function(e,t,n){var r=t(e);return pu(e)?r:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(r,n(e))}(e,Wu,vu)};var Gu=Object.prototype.hasOwnProperty;const Yu=Gc(xc,"DataView"),qu=Gc(xc,"Promise"),Qu=Gc(xc,"Set"),Ju=Gc(xc,"WeakMap");var Ku="[object Map]",Xu="[object Promise]",ed="[object Set]",td="[object WeakMap]",nd="[object DataView]",rd=Fc(Yu),od=Fc(Yc),id=Fc(qu),sd=Fc(Qu),ad=Fc(Ju),ld=Ic;(Yu&&ld(new Yu(new ArrayBuffer(1)))!=nd||Yc&&ld(new Yc)!=Ku||qu&&ld(qu.resolve())!=Xu||Qu&&ld(new Qu)!=ed||Ju&&ld(new Ju)!=td)&&(ld=function(e){var t=Ic(e),n="[object Object]"==t?e.constructor:void 0,r=n?Fc(n):"";if(r)switch(r){case rd:return nd;case od:return Ku;case id:return Xu;case sd:return ed;case ad:return td}return t});const cd=ld;var ud="[object Arguments]",dd="[object Array]",md="[object Object]",fd=Object.prototype.hasOwnProperty;const pd=function(e,t,n,r,o,i){var s=pu(e),a=pu(t),l=s?dd:cd(e),c=a?dd:cd(t),u=(l=l==ud?md:l)==md,d=(c=c==ud?md:c)==md,m=l==c;if(m&&Ou(e)){if(!Ou(t))return!1;s=!0,u=!1}if(m&&!u)return i||(i=new ou),s||Ru(e)?lu(e,t,n,r,o,i):function(e,t,n,r,o,i,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new cu(e),new cu(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return vc(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=uu;case"[object Set]":var l=1&r;if(a||(a=du),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;r|=2,s.set(e,t);var u=lu(a(e),a(t),r,o,i,s);return s.delete(e),u;case"[object Symbol]":if(fu)return fu.call(e)==fu.call(t)}return!1}(e,t,l,n,r,o,i);if(!(1&n)){var f=u&&fd.call(e,"__wrapped__"),p=d&&fd.call(t,"__wrapped__");if(f||p){var h=f?e.value():e,g=p?t.value():t;return i||(i=new ou),o(h,g,n,r,i)}}return!!m&&(i||(i=new ou),function(e,t,n,r,o,i){var s=1&n,a=Zu(e),l=a.length;if(l!=Zu(t).length&&!s)return!1;for(var c=l;c--;){var u=a[c];if(!(s?u in t:Gu.call(t,u)))return!1}var d=i.get(e),m=i.get(t);if(d&&m)return d==t&&m==e;var f=!0;i.set(e,t),i.set(t,e);for(var p=s;++c<l;){var h=e[u=a[c]],g=t[u];if(r)var v=s?r(g,h,u,t,e,i):r(h,g,u,e,t,i);if(!(void 0===v?h===g||o(h,g,n,r,i):v)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var y=e.constructor,_=t.constructor;y==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _||(f=!1)}return i.delete(e),i.delete(t),f}(e,t,n,r,o,i))},hd=function e(t,n,r,o,i){return t===n||(null==t||null==n||!yu(t)&&!yu(n)?t!=t&&n!=n:pd(t,n,r,o,e,i))},gd=function(e,t){return hd(e,t)};function vd(e,t){return gd(e,t)?e:t}const yd=(e,t)=>{if(!t.replies)return e;e[t.comment.id]||(e[t.comment.id]=[]);for(const n of t.replies)e[t.comment.id].push(n.comment.id),n.replies&&yd(e,n);return e},_d=(e,t)=>(e[t.comment.id]=((e,t)=>e?e.id!==t.id?t:e.edit?t.edit?e.edit.time!==t.edit.time?t:e:t:t.edit?t:e:t)(e[t.comment.id],t.comment),t.replies&&t.replies.reduce(_d,e),e),bd=q({sort:function(e=function(){return Ro(io)||"-active"}(),t){switch(t.type){case ci:return t.payload;default:return e}},isFetching:function(e=!1,t){switch(t.type){case ai:return!0;case li:case"COMMENTS/FETCHING_FAILURE":return!1;default:return e}},topComments:(e=[],t)=>{switch(t.type){case ni:return vd(e,t.comments.map((e=>e.comment.id)));case ri:return t.comment.pid?e:[t.comment.id,...e];default:return e}},childComments:(e={},t)=>{switch(t.type){case ni:return t.comments.reduce(yd,{});case ri:return t.comment.pid?Object.assign(Object.assign({},e),{[t.comment.pid]:[t.comment.id,...e[t.comment.pid]||[]]}):e;default:return e}},allComments:(e={},t)=>{switch(t.type){case ni:return t.comments.reduce(_d,Object.assign({},e));case ri:case oi:return Object.assign(Object.assign({},e),{[t.comment.id]:t.comment});case ii:{let n=e,r=!1;const o={summary:"",time:(new Date).toISOString()};for(const i of t.ids)Object.prototype.hasOwnProperty.call(e,i)&&(r||(r=!0,n=Object.assign({},n)),n[i]=Object.assign(Object.assign(Object.assign({},n[i]),{edit:o}),t.patch));return n}default:return e}},activeComment:(e=null,t)=>{switch(t.type){case si:return t.mode;default:return e}},pinnedComments:(e=[],t)=>{switch(t.type){case ni:return ti(t.comments).map((e=>e.id));case oi:{const n=e.indexOf(t.comment.id);if(!t.comment.pin){if(-1===n)return e;const t=[...e];return t.splice(n,1),t}return-1!==n?e:[...e,t.comment.id]}case ii:return Object.prototype.hasOwnProperty.call(t.patch,"pin")?t.patch.pin?[...e,...t.ids].reduce(((e,t)=>(-1===e.indexOf(t)&&e.push(t),e)),[]):e.filter((e=>-1===t.ids.indexOf(e))):e;default:return e}}}),wd={url:"",count:0,read_only:!1,first_time:"",last_time:""};function Md(e=wd,t){switch(t.type){case Jo:return vd(e,t.info);default:return e}}function Sd(e=yo.query.theme,t){switch(t.type){case Mi:return t.theme;default:return e}}const xd=(e=null,t)=>{switch(t.type){case Ho:return t.user;case qo:return null===e?e:Object.assign(Object.assign({},e),{email_subscription:t.payload});default:return e}},Ed=(e=[],t)=>{switch(t.type){case $o:return t.list;case Vo:return void 0!==e.find((e=>e.id===t.user.id))?e:[t.user,...e];case Wo:{const n=e.findIndex((e=>e.id===t.id));return-1===n?e:[...e.slice(0,n),...e.slice(n+1)]}default:return e}},kd=(e={},t)=>{switch(t.type){case Zo:return t.payload;case Go:return Object.assign(Object.assign({},e),{[t.user.id]:t.user});case Yo:{if(!Object.prototype.hasOwnProperty.call(e,t.id))return e;const n=Object.assign({},e);return delete n[t.id],n}default:return e}};function Od(e={},t){switch(t.type){case sc:return Object.assign(Object.assign({},e),{[t.id]:t.comments});default:return e}}function Nd(e={},t){switch(t.type){case Ja:return t.ids.reduce(((e,t)=>(e[t]=!0,e)),{});case Ka:return Object.assign(Object.assign({},e),{[t.id]:t.collapsed});default:return e}}const jd=q(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({comments:bd},n),t),o),i),r)),Ad=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},i=t.map((function(e){return e(o)}));return X({},n,{dispatch:r=ee.apply(void 0,i)(n.dispatch)})}}}(gc),Cd=function e(t,n,r){var o;if("function"==typeof n&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof n&&void 0===r&&(r=n,n=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(e)(t,n)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var i=t,s=n,a=[],l=a,c=!1;function u(){l===a&&(l=a.slice())}function d(){if(c)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return s}function m(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(c)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return u(),l.push(e),function(){if(t){if(c)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,u();var n=l.indexOf(e);l.splice(n,1),a=null}}}function f(e){if(!G(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(c)throw new Error("Reducers may not dispatch actions.");try{c=!0,s=i(s,e)}finally{c=!1}for(var t=a=l,n=0;n<t.length;n++)(0,t[n])();return e}function p(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");i=e,f({type:Z.REPLACE})}function h(){var e,t=m;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(d())}return n(),{unsubscribe:t(n)}}})[V.Z]=function(){return this},e}return f({type:Z.INIT}),(o={dispatch:f,subscribe:m,getState:d,replaceReducer:p})[V.Z]=h,o}(jd,(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:ee)(Ad));function Id(){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){s.p=`${eo}/web/`;const e=document.getElementById("remark42");if(!e)throw new Error("Remark42: Can't find root node.");const t=mo(),n=function(e){return e.locale||"en"}(t),r=yield function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){return"ru"===e?s.e(697).then(s.t.bind(s,551,19)).then((e=>e.default)).catch((()=>Hr)):"de"===e?s.e(913).then(s.t.bind(s,887,19)).then((e=>e.default)).catch((()=>Hr)):"fi"===e?s.e(135).then(s.t.bind(s,613,19)).then((e=>e.default)).catch((()=>Hr)):"es"===e?s.e(352).then(s.t.bind(s,635,19)).then((e=>e.default)).catch((()=>Hr)):"zh"===e?s.e(922).then(s.t.bind(s,2,19)).then((e=>e.default)).catch((()=>Hr)):"tr"===e?s.e(300).then(s.t.bind(s,80,19)).then((e=>e.default)).catch((()=>Hr)):"bg"===e?s.e(372).then(s.t.bind(s,495,19)).then((e=>e.default)).catch((()=>Hr)):"ua"===e?s.e(220).then(s.t.bind(s,722,19)).then((e=>e.default)).catch((()=>Hr)):"pl"===e?s.e(640).then(s.t.bind(s,18,19)).then((e=>e.default)).catch((()=>Hr)):"vi"===e?s.e(936).then(s.t.bind(s,723,19)).then((e=>e.default)).catch((()=>Hr)):"be"===e?s.e(313).then(s.t.bind(s,361,19)).then((e=>e.default)).catch((()=>Hr)):"fr"===e?s.e(231).then(s.t.bind(s,612,19)).then((e=>e.default)).catch((()=>Hr)):"ja"===e?s.e(43).then(s.t.bind(s,182,19)).then((e=>e.default)).catch((()=>Hr)):"ko"===e?s.e(491).then(s.t.bind(s,861,19)).then((e=>e.default)).catch((()=>Hr)):"bp"===e?s.e(677).then(s.t.bind(s,498,19)).then((e=>e.default)).catch((()=>Hr)):Hr}))}(n).catch((()=>({}))),o=function(e,t){if("function"==typeof e)return Q(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var r in e){var o=e[r];"function"==typeof o&&(n[r]=Q(o,t))}return n}({fetchHiddenUsers:_i,restoreCollapsedThreads:el},Cd.dispatch);o.fetchHiddenUsers(),o.restoreCollapsedThreads(),yo.config=yield No.get("/config"),z(v(Br,{locale:n,messages:r},v(Nt,{store:Cd},"user-info"===t.page?v(fc,null):v(oc,null))),e)}))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",Id):Id()})()})();
//# sourceMappingURL=remark.mjs.map